
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Francisco Alfaro">
      
      
        <link rel="canonical" href="https://github.com/satwikkansal/wtfpython/CN/">
      
      
        <link rel="prev" href="../USA/">
      
      
        <link rel="next" href="../VI/">
      
      
      <link rel="icon" href="https://www.svgrepo.com/show/405305/face-screaming-in-fear.svg">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.22">
    
    
      
        <title>Chinese - What the f*ck Python!</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.732c4fb1.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/neoteroi-mkdocs.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#table-of-contents" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href=".." title="What the f*ck Python!" class="md-header__button md-logo" aria-label="What the f*ck Python!" data-md-component="logo">
      
  <img src="https://www.svgrepo.com/show/405305/face-screaming-in-fear.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            What the f*ck Python!
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Chinese
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="BÃºsqueda" placeholder="BÃºsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando bÃºsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/satwikkansal/wtfpython" title="Ir al repositorio" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    satwikkansal/wtfpython
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="PestaÃ±as" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  ğŸ  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../USA/" class="md-tabs__link">
        
  
    
  
  ğŸ Original

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
    
  
  ğŸŒ World

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="NavegaciÃ³n" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="What the f*ck Python!" class="md-nav__button md-logo" aria-label="What the f*ck Python!" data-md-component="logo">
      
  <img src="https://www.svgrepo.com/show/405305/face-screaming-in-fear.svg" alt="logo">

    </a>
    What the f*ck Python!
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/satwikkansal/wtfpython" title="Ir al repositorio" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    satwikkansal/wtfpython
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ğŸ  Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../USA/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ğŸ Original
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    ğŸŒ World
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            ğŸŒ World
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Chinese
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vietnamese
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../KO/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Korean
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RU/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Russian
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    German
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<p align="center"><img src="../images/logo.png#gh-light-mode-only" alt=""><img src="../images/logo-dark.png#gh-dark-mode-only" alt=""></p>
<h1 align="center">What the f*ck Python! ğŸ</h1>
<p align="center">ä¸€äº›æœ‰è¶£ä¸”é²œä¸ºäººçŸ¥çš„ Python ç‰¹æ€§.</p>

<p>ç¿»è¯‘ç‰ˆæœ¬: <a href="https://github.com/satwikkansal/wtfpython">English</a> | <a href="https://github.com/vuduclyunitn/wtfptyhon-vi">Vietnamese Tiáº¿ng Viá»‡t</a> | <a href="https://web.archive.org/web/20220511161045/https://github.com/JoseDeFreitas/wtfpython-es">Spanish EspaÃ±ol</a> | <a href="https://github.com/buttercrab/wtfpython-ko">Korean í•œêµ­ì–´</a> | <a href="https://github.com/frontdevops/wtfpython">Russian Ğ ÑƒÑÑĞºĞ¸Ğ¹</a> | <a href="https://github.com/BenSt099/wtfpython">German Deutsch</a> | <a href="https://github.com/satwikkansal/wtfpython/issues/new?title=Add%20translation%20for%20[LANGUAGE]&amp;body=Expected%20time%20to%20finish:%20[X]%20weeks.%20I%27ll%20start%20working%20on%20it%20from%20[Y].">Add translation</a></p>
<p>å…¶ä»–æ¨¡å¼: <a href="https://mybinder.org/v2/gh/robertparley/wtfpython-cn/master?labpath=irrelevant%2Fwtf.ipynb">Interactive</a> </p>
<p><a href="http://www.wtfpl.net"><img alt="WTFPL 2.0" src="https://img.shields.io/badge/License-WTFPL%202.0-lightgrey.svg?style=flat-square" /></a>   <a href="https://github.com/satwikkansal/wtfpython/commit/19d4b075152d93e5bc75c5d08279338a895cfa27"><img alt="Commit id" src="https://img.shields.io/badge/Commit-19d4b0-yellow.svg" /></a> </p>
<p>Python, æ˜¯ä¸€ä¸ªè®¾è®¡ä¼˜ç¾çš„è§£é‡Šå‹é«˜çº§è¯­è¨€, å®ƒæä¾›äº†å¾ˆå¤šèƒ½è®©ç¨‹åºå‘˜æ„Ÿåˆ°èˆ’é€‚çš„åŠŸèƒ½ç‰¹æ€§. ä½†æœ‰çš„æ—¶å€™, Python çš„ä¸€äº›è¾“å‡ºç»“æœå¯¹äºåˆå­¦è€…æ¥è¯´ä¼¼ä¹å¹¶ä¸æ˜¯é‚£ä¹ˆä¸€ç›®äº†ç„¶.</p>
<p>è¿™ä¸ªæœ‰è¶£çš„é¡¹ç›®æ„åœ¨æ”¶é›† Python ä¸­é‚£äº›éš¾ä»¥ç†è§£å’Œåäººç±»ç›´è§‰çš„ä¾‹å­ä»¥åŠé²œä¸ºäººçŸ¥çš„åŠŸèƒ½ç‰¹æ€§, å¹¶å°è¯•è®¨è®ºè¿™äº›ç°è±¡èƒŒåçœŸæ­£çš„åŸç†!</p>
<p>è™½ç„¶ä¸‹é¢çš„æœ‰äº›ä¾‹å­å¹¶ä¸ä¸€å®šä¼šè®©ä½ è§‰å¾— WTFs, ä½†å®ƒä»¬ä¾ç„¶æœ‰å¯èƒ½ä¼šå‘Šè¯‰ä½ ä¸€äº›ä½ æ‰€ä¸çŸ¥é“çš„ Python æœ‰è¶£ç‰¹æ€§.  æˆ‘è§‰å¾—è¿™æ˜¯ä¸€ç§å­¦ä¹ ç¼–ç¨‹è¯­è¨€å†…éƒ¨åŸç†çš„å¥½åŠæ³•, è€Œä¸”æˆ‘ç›¸ä¿¡ä½ ä¹Ÿä¼šä»ä¸­è·å¾—ä¹è¶£!</p>
<p>å¦‚æœæ‚¨æ˜¯ä¸€ä½ç»éªŒæ¯”è¾ƒä¸°å¯Œçš„ Python ç¨‹åºå‘˜, ä½ å¯ä»¥å°è¯•æŒ‘æˆ˜çœ‹æ˜¯å¦èƒ½ä¸€æ¬¡å°±æ‰¾åˆ°ä¾‹å­çš„æ­£ç¡®ç­”æ¡ˆ. ä½ å¯èƒ½å¯¹å…¶ä¸­çš„ä¸€äº›ä¾‹å­å·²ç»æ¯”è¾ƒç†Ÿæ‚‰äº†, é‚£è¿™ä¹Ÿè®¸èƒ½å”¤èµ·ä½ å½“å¹´è¸©è¿™äº›å‘æ—¶çš„ç”œèœœå›å¿† :sweat_smile:</p>
<p>PS: å¦‚æœä½ ä¸æ˜¯ç¬¬ä¸€æ¬¡è¯»äº†, ä½ å¯ä»¥åœ¨<a href="https://github.com/satwikkansal/wtfpython/releases/">è¿™é‡Œ</a>è·å–å˜åŠ¨å†…å®¹.</p>
<p>é‚£ä¹ˆ, è®©æˆ‘ä»¬å¼€å§‹å§...</p>
<h1 id="table-of-contents">Table of Contents/ç›®å½•</h1>
<!-- TOC -->

<ul>
<li><a href="#table-of-contentsç›®å½•">Table of Contents/ç›®å½•</a></li>
<li><a href="#structure-of-the-examplesç¤ºä¾‹ç»“æ„">Structure of the Examples/ç¤ºä¾‹ç»“æ„</a></li>
<li><a href="#usageç”¨æ³•">Usage/ç”¨æ³•</a></li>
<li><a href="#-examplesç¤ºä¾‹">ğŸ‘€ Examples/ç¤ºä¾‹</a><ul>
<li><a href="#section-strain-your-brainå¤§è„‘è¿åŠ¨">Section: Strain your brain!/å¤§è„‘è¿åŠ¨!</a><ul>
<li><a href="#-First-things-first!/è¦äº‹ä¼˜å…ˆ-*">&gt; First things first!/è¦äº‹ä¼˜å…ˆ *</a></li>
<li><a href="#-strings-can-be-tricky-sometimeså¾®å¦™çš„å­—ç¬¦ä¸²-">&gt; Strings can be tricky sometimes/å¾®å¦™çš„å­—ç¬¦ä¸² *</a></li>
<li><a href="#-be-careful-with-chained-operationså°å¿ƒé“¾å¼æ“ä½œ">&gt; Be careful with chained operations/å°å¿ƒé“¾å¼æ“ä½œ</a></li>
<li><a href="#-How-not-to-use-is-operator/ä¸ºä»€ä¹ˆä¸ä½¿ç”¨-is-æ“ä½œç¬¦-">&gt; How not to use <code>is</code> operator/ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ <code>is</code> æ“ä½œç¬¦</a></li>
<li><a href="#-Hash-browniesæ˜¯æ—¶å€™æ¥ç‚¹è›‹ç³•äº†">&gt; Hash brownies/æ˜¯æ—¶å€™æ¥ç‚¹è›‹ç³•äº†!</a></li>
<li><a href="#-deep-down-were-all-the-sameæœ¬è´¨ä¸Šæˆ‘ä»¬éƒ½ä¸€æ ·-">&gt; Deep down, we're all the same./æœ¬è´¨ä¸Š,æˆ‘ä»¬éƒ½ä¸€æ ·. *</a></li>
<li><a href="#-disorder-within-order/æœ‰åºä¸­æ½œè—ç€æ— åº-*">&gt; Disorder within order/æœ‰åºä¸­æ½œè—ç€æ— åº *</a></li>
<li><a href="#-Keep-tryingä¸åœçš„try-">&gt; Keep trying.../ä¸åœçš„try *</a></li>
<li><a href="#-for-whatä¸ºä»€ä¹ˆ">&gt; For what?/ä¸ºä»€ä¹ˆ?</a></li>
<li><a href="#-evaluation-time-discrepancyæ‰§è¡Œæ—¶æœºå·®å¼‚">&gt; Evaluation time discrepancy/æ‰§è¡Œæ—¶æœºå·®å¼‚</a></li>
<li><a href="#-is-not--is-not-is-not-is-not--ä¸æ˜¯-is-not-">&gt; <code>is not ...</code> is not <code>is (not ...)</code> / <code>is not ...</code> ä¸æ˜¯ <code>is (not ...)</code></a></li>
<li><a href="#-a-tic-tac-toe-where-x-wins-in-the-first-attemptä¸€è¹´å³è‡³">&gt; A tic-tac-toe where X wins in the first attempt!/ä¸€è¹´å³è‡³!</a></li>
<li><a href="#-SchrÃ¶dingers-variableè–›å®šè°”çš„å˜é‡-">&gt; SchrÃ¶dinger's variable/è–›å®šè°”çš„å˜é‡ *</a></li>
<li><a href="#-the-chicken-egg-problem/å…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹-*">&gt; The chicken-egg problem/å…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹ *</a></li>
<li><a href="#-subclass-relationshipså­ç±»å…³ç³»-">&gt; Subclass relationships/å­ç±»å…³ç³» *</a></li>
<li><a href="#-Methods-equality-and-identity/æ–¹æ³•çš„ç›¸ç­‰æ€§å’Œå”¯ä¸€æ€§-">&gt; Methods equality and identity/æ–¹æ³•çš„ç›¸ç­‰æ€§å’Œå”¯ä¸€æ€§ *</a></li>
<li><a href="#-All-true-ation/è¿”å›Trueçš„allå‡½æ•°-">&gt; All-true-ation/è¿”å›Trueçš„allå‡½æ•° *</a></li>
<li><a href="#-the-surprising-commaæ„å¤–çš„é€—å·">&gt; The surprising comma/æ„å¤–çš„é€—å·</a></li>
<li><a href="#-strings-and-the-backslasheså­—ç¬¦ä¸²ä¸åæ–œæ ">&gt; Strings and the backslashes/å­—ç¬¦ä¸²ä¸åæ–œæ </a></li>
<li><a href="#-not-knotåˆ«çº ç»“">&gt; not knot!/åˆ«çº ç»“!</a></li>
<li><a href="#-half-triple-quoted-stringsä¸‰ä¸ªå¼•å·">&gt; Half triple-quoted strings/ä¸‰ä¸ªå¼•å·</a></li>
<li><a href="#-whats-wrong-with-booleanså¸ƒå°”ä½ å’‹äº†">&gt; What's wrong with booleans?/å¸ƒå°”ä½ å’‹äº†?</a></li>
<li><a href="#-class-attributes-and-instance-attributesç±»å±æ€§å’Œå®ä¾‹å±æ€§">&gt; Class attributes and instance attributes/ç±»å±æ€§å’Œå®ä¾‹å±æ€§</a></li>
<li><a href="#-yielding-noneç”Ÿæˆ-none">&gt; yielding None/ç”Ÿæˆ None</a></li>
<li><a href="#-Yielding-from-return/ç”Ÿæˆå™¨é‡Œçš„return-">&gt; Yielding from... return!/ç”Ÿæˆå™¨é‡Œçš„return *</a></li>
<li><a href="#-Nan-reflexivityNançš„è‡ªåæ€§">&gt; Nan-reflexivity/Nançš„è‡ªåæ€§</a></li>
<li><a href="#-mutating-the-immutableå¼ºäººæ‰€éš¾">&gt; Mutating the immutable!/å¼ºäººæ‰€éš¾</a></li>
<li><a href="#-the-disappearing-variable-from-outer-scopeæ¶ˆå¤±çš„å¤–éƒ¨å˜é‡">&gt; The disappearing variable from outer scope/æ¶ˆå¤±çš„å¤–éƒ¨å˜é‡</a></li>
<li><a href="#-the-mysterious-key-type-conversionç¥ç§˜çš„é”®å‹è½¬æ¢-">&gt; The mysterious key type conversion/ç¥ç§˜çš„é”®å‹è½¬æ¢ *</a></li>
<li><a href="#-lets-see-if-you-can-guess-thisçœ‹çœ‹ä½ èƒ½å¦çŒœåˆ°è¿™ä¸€ç‚¹">&gt; Let's see if you can guess this?/çœ‹çœ‹ä½ èƒ½å¦çŒœåˆ°è¿™ä¸€ç‚¹?</a></li>
<li><a href="#-exceeds-the-limit-for-integer-string-conversionæ•´å‹è½¬å­—ç¬¦ä¸²è¶Šç•Œ">&gt; Exceeds the limit for integer string conversion/æ•´å‹è½¬å­—ç¬¦ä¸²è¶Šç•Œ</a></li>
</ul>
</li>
<li><a href="#section-slippery-slopesæ»‘å¡è°¬è¯¯">Section: Slippery Slopes/æ»‘å¡è°¬è¯¯</a><ul>
<li><a href="#-modifying-a-dictionary-while-iterating-over-itè¿­ä»£å­—å…¸æ—¶çš„ä¿®æ”¹">&gt; Modifying a dictionary while iterating over it/è¿­ä»£å­—å…¸æ—¶çš„ä¿®æ”¹</a></li>
<li><a href="#-stubborn-del-operatoråšå¼ºçš„-del-">&gt; Stubborn <code>del</code> operator/åšå¼ºçš„ <code>del</code> *</a></li>
<li><a href="#-the-out-of-scope-variableå¤–éƒ¨ä½œç”¨åŸŸå˜é‡">&gt; The out of scope variable/å¤–éƒ¨ä½œç”¨åŸŸå˜é‡</a></li>
<li><a href="#-deleting-a-list-item-while-iteratingè¿­ä»£åˆ—è¡¨æ—¶åˆ é™¤å…ƒç´ ">&gt; Deleting a list item while iterating/è¿­ä»£åˆ—è¡¨æ—¶åˆ é™¤å…ƒç´ </a></li>
<li><a href="#-&gt;-Lossy-zip-of-iterators/ä¸¢ä¸‰è½å››çš„zip-">&gt; Lossy zip of iterators/ä¸¢ä¸‰è½å››çš„zip *</a></li>
<li><a href="#-loop-variables-leaking-outå¾ªç¯å˜é‡æ³„æ¼">&gt; Loop variables leaking out!/å¾ªç¯å˜é‡æ³„æ¼!</a></li>
<li><a href="#-beware-of-default-mutable-argumentså½“å¿ƒé»˜è®¤çš„å¯å˜å‚æ•°">&gt; Beware of default mutable arguments!/å½“å¿ƒé»˜è®¤çš„å¯å˜å‚æ•°!</a></li>
<li><a href="#-catching-the-exceptionsæ•è·å¼‚å¸¸">&gt; Catching the Exceptions/æ•è·å¼‚å¸¸</a></li>
<li><a href="#-same-operands-different-storyåŒäººä¸åŒå‘½">&gt; Same operands, different story!/åŒäººä¸åŒå‘½!</a></li>
<li><a href="#-name-resolution-ignoring-class-scopeå¿½ç•¥ç±»ä½œç”¨åŸŸçš„åç§°è§£æ">&gt; Name resolution ignoring class scope/å¿½ç•¥ç±»ä½œç”¨åŸŸçš„åç§°è§£æ</a></li>
<li><a href="#-rounding-like-a-banker/åƒé“¶è¡Œå®¶ä¸€æ ·èˆå…¥-">&gt; Rounding like a banker/åƒé“¶è¡Œå®¶ä¸€æ ·èˆå…¥ *</a></li>
<li><a href="#-needles-in-a-haystackå¤§æµ·æé’ˆ">&gt; Needles in a Haystack/å¤§æµ·æé’ˆ</a></li>
<li><a href="#-Splitsiesåˆ†å‰²å‡½æ•°-">&gt; Splitsies/åˆ†å‰²å‡½æ•°</a></li>
<li><a href="#-Wild-importsé€šé…ç¬¦å¯¼å…¥æ–¹å¼-">&gt; Wild imports/é€šé…ç¬¦å¯¼å…¥æ–¹å¼ *</a></li>
<li><a href="#-All-sortedéƒ½æ’åºäº†å—-">&gt; All sorted?/éƒ½æ’åºäº†å—ï¼Ÿ *</a></li>
<li><a href="#-midnight-time-doesnt-existä¸å­˜åœ¨çš„åˆå¤œ">&gt; Midnight time doesn't exist?/ä¸å­˜åœ¨çš„åˆå¤œ?</a></li>
</ul>
</li>
<li><a href="#section-the-hidden-treasureséšè—çš„å®è—">Section: The Hidden treasures!/éšè—çš„å®è—!</a><ul>
<li><a href="#-okay-python-can-you-make-me-flypython-å¯å¦å¸¦æˆ‘é£-">&gt; Okay Python, Can you make me fly?/Python, å¯å¦å¸¦æˆ‘é£? *</a></li>
<li><a href="#-goto-but-whygoto-ä½†ä¸ºä»€ä¹ˆ-">&gt; <code>goto</code>, but why?/<code>goto</code>, ä½†ä¸ºä»€ä¹ˆ? *</a></li>
<li><a href="#-brace-yourselfåšå¥½æ€æƒ³å‡†å¤‡-">&gt; Brace yourself!/åšå¥½æ€æƒ³å‡†å¤‡ *</a></li>
<li><a href="#-lets-meet-friendly-language-uncle-for-lifeè®©ç”Ÿæ´»æ›´å‹å¥½-">&gt; Let's meet Friendly Language Uncle For Life/è®©ç”Ÿæ´»æ›´å‹å¥½ *</a></li>
<li><a href="#-even-python-understands-that-love-is-complicatedè¿Pythonä¹ŸçŸ¥é“çˆ±æ˜¯éš¾è¨€çš„-">&gt; Even Python understands that love is complicated/è¿Pythonä¹ŸçŸ¥é“çˆ±æ˜¯éš¾è¨€çš„ *</a></li>
<li><a href="#-yes-it-existsæ˜¯çš„-å®ƒå­˜åœ¨">&gt; Yes, it exists!/æ˜¯çš„, å®ƒå­˜åœ¨!</a></li>
<li><a href="#-Ellipsisçœç•¥-">&gt; Ellipsis/çœç•¥ *</a></li>
<li><a href="#-inpinityæ— é™-">&gt; Inpinity/æ— é™ *</a></li>
<li><a href="#-Lets-mangleä¿®é¥°æ—¶é—´-">&gt; Let's mangle/ä¿®é¥°æ—¶é—´! *</a></li>
</ul>
</li>
<li><a href="#section-appearances-are-deceptiveå¤–è¡¨æ˜¯é ä¸ä½çš„">Section: Appearances are deceptive!/å¤–è¡¨æ˜¯é ä¸ä½çš„!</a><ul>
<li><a href="#-skipping-linesè·³è¿‡ä¸€è¡Œ">&gt; Skipping lines?/è·³è¿‡ä¸€è¡Œ?</a></li>
<li><a href="#-teleportationç©ºé—´ç§»åŠ¨-">&gt; Teleportation/ç©ºé—´ç§»åŠ¨ *</a></li>
<li><a href="#-well-something-is-fishyå—¯æœ‰äº›å¯ç–‘">&gt; Well, something is fishy.../å—¯, æœ‰äº›å¯ç–‘...</a></li>
</ul>
</li>
<li><a href="#section-miscellaneousæ‚é¡¹">Section: Miscellaneous/æ‚é¡¹</a><ul>
<li><a href="#--is-fasteræ›´å¿«çš„-">&gt; <code>+=</code> is faster/æ›´å¿«çš„ <code>+=</code> </a></li>
<li><a href="#-lets-make-a-giant-stringæ¥åšä¸ªå·¨å¤§çš„å­—ç¬¦ä¸²å§">&gt; Let's make a giant string!/æ¥åšä¸ªå·¨å¤§çš„å­—ç¬¦ä¸²å§!</a></li>
<li><a href="#-Slowing-down-dict-lookupsè®©å­—å…¸çš„æŸ¥æ‰¾æ…¢ä¸‹æ¥-">&gt; Slowing down <code>dict</code> lookups/è®©å­—å…¸çš„æŸ¥æ‰¾æ…¢ä¸‹æ¥ *</a></li>
<li><a href="#-Bloating-instance-dicts/å˜è‡ƒè‚¿çš„dictå®ä¾‹ä»¬-">&gt; Bloating instance <code>dict</code>s/å˜è‡ƒè‚¿çš„<code>dict</code>å®ä¾‹ä»¬ *</a></li>
<li><a href="#-minor-oneså°çŸ¥è¯†ç‚¹">&gt; Minor Ones/å°çŸ¥è¯†ç‚¹</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#contributingè´¡çŒ®">Contributing/è´¡çŒ®</a></li>
<li><a href="#acknowledgementsè‡´è°¢">Acknowledgements/è‡´è°¢</a></li>
<li><a href="#-licenseè®¸å¯">ğŸ“ License/è®¸å¯</a><ul>
<li><a href="#helpå¸®åŠ©">Help/å¸®åŠ©</a></li>
<li><a href="#surprise-your-geeky-pythonist-friendsæƒ³ç»™ä½ çš„æå®¢æœ‹å‹ä¸€ä¸ªæƒŠå–œ">Surprise your geeky pythonist friends?/æƒ³ç»™ä½ çš„æå®¢æœ‹å‹ä¸€ä¸ªæƒŠå–œ?</a></li>
<li><a href="#need-a-pdf-versionéœ€è¦æ¥ä¸€ä»½pdfç‰ˆçš„">Need a pdf version?/éœ€è¦æ¥ä¸€ä»½pdfç‰ˆçš„?</a></li>
<li><a href="#follow-commitè¿½è¸ªCommit">Follow Commit/è¿½è¸ªCommit</a></li>
<li><a href="#996icu">996.icu</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->

<h1 id="structure-of-the-examples">Structure of the Examples/ç¤ºä¾‹ç»“æ„</h1>
<p>æ‰€æœ‰ç¤ºä¾‹çš„ç»“æ„éƒ½å¦‚ä¸‹æ‰€ç¤º:</p>
<blockquote>
<h3 id="_1">&gt; ä¸€ä¸ªç²¾é€‰çš„æ ‡é¢˜ *</h3>
<p>æ ‡é¢˜æœ«å°¾çš„æ˜Ÿå·è¡¨ç¤ºè¯¥ç¤ºä¾‹åœ¨ç¬¬ä¸€ç‰ˆä¸­ä¸å­˜åœ¨ï¼Œæ˜¯æœ€è¿‘æ·»åŠ çš„.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># å‡†å¤‡ä»£ç .</span>
<span class="c1"># é‡Šæ”¾é­”æ³•...</span>
</code></pre></div>
<p><strong>Output (Python version):</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">è§¦å‘è¯­å¥</span>
<span class="n">å‡ºä¹æ„æ–™çš„è¾“å‡ºç»“æœ</span>
</code></pre></div>
(å¯é€‰): å¯¹æ„å¤–è¾“å‡ºç»“æœçš„ç®€çŸ­æè¿°.</p>
<h4 id="_2">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>ç®€è¦è¯´æ˜å‘ç”Ÿäº†ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆä¼šå‘ç”Ÿ.
  <div class="highlight"><pre><span></span><code><span class="n">å¦‚æœ‰å¿…è¦</span><span class="p">,</span> <span class="n">ä¸¾ä¾‹è¯´æ˜</span>
</code></pre></div>
  <strong>Output:</strong>
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">è§¦å‘è¯­å¥</span> <span class="c1"># ä¸€äº›è®©é­”æ³•å˜å¾—å®¹æ˜“ç†è§£çš„ä¾‹å­</span>
<span class="c1"># ä¸€äº›æ­£å¸¸çš„è¾“å…¥</span>
</code></pre></div></li>
</ul>
</blockquote>
<p><strong>æ³¨æ„:</strong> æ‰€æœ‰çš„ç¤ºä¾‹éƒ½åœ¨ Python 3.5.2 ç‰ˆæœ¬çš„äº¤äº’è§£é‡Šå™¨ä¸Šæµ‹è¯•è¿‡, å¦‚æœä¸ç‰¹åˆ«è¯´æ˜åº”è¯¥é€‚ç”¨äºæ‰€æœ‰ Python ç‰ˆæœ¬.</p>
<h1 id="usage">Usage/ç”¨æ³•</h1>
<p>æˆ‘ä¸ªäººå»ºè®®, æœ€å¥½ä¾æ¬¡é˜…è¯»ä¸‹é¢çš„ç¤ºä¾‹, å¹¶å¯¹æ¯ä¸ªç¤ºä¾‹:
- ä»”ç»†é˜…è¯»è®¾ç½®ä¾‹å­æœ€å¼€å§‹çš„ä»£ç .  å¦‚æœæ‚¨æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„ Python ç¨‹åºå‘˜, é‚£ä¹ˆå¤§å¤šæ•°æ—¶å€™æ‚¨éƒ½èƒ½æˆåŠŸé¢„æœŸåˆ°åé¢çš„ç»“æœ.
- é˜…è¯»è¾“å‡ºç»“æœ,
  + ç¡®è®¤ç»“æœæ˜¯å¦å¦‚ä½ æ‰€æ–™.
  + ç¡®è®¤ä½ æ˜¯å¦çŸ¥é“è¿™èƒŒåçš„åŸç†.
    - å¦‚æœä¸çŸ¥é“, æ·±å‘¼å¸ç„¶åé˜…è¯»è¯´æ˜ (å¦‚æœä½ è¿˜æ˜¯çœ‹ä¸æ˜ç™½, åˆ«æ²‰é»˜! å¯ä»¥åœ¨<a href="https://github.com/satwikkansal/wtfPython">è¿™</a>æä¸ª issue).
    - å¦‚æœçŸ¥é“, ç»™è‡ªå·±ç‚¹å¥–åŠ±, ç„¶åå»çœ‹ä¸‹ä¸€ä¸ªä¾‹å­.</p>
<p>PS: ä½ ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œé˜…è¯» WTFpython. æˆ‘ä»¬æœ‰ pypi åŒ… å’Œ npm åŒ…(æ”¯æŒä»£ç é«˜äº®).(è¯‘: è¿™ä¸¤ä¸ªéƒ½æ˜¯è‹±æ–‡ç‰ˆçš„)</p>
<p>å®‰è£… npm åŒ… <a href="https://www.npmjs.com/package/wtfpython"><code>wtfpython</code></a>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>npm<span class="w"> </span>install<span class="w"> </span>-g<span class="w"> </span>wtfpython
</code></pre></div></p>
<p>æˆ–è€…, å®‰è£… pypi åŒ… <a href="https://pypi.python.org/pypi/wtfpython"><code>wtfpython</code></a>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>wtfpython<span class="w"> </span>-U
</code></pre></div></p>
<p>ç°åœ¨, åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ <code>wtfpython</code>, ä½ å°±å¯ä»¥å¼€å§‹æµè§ˆäº†.</p>
<hr />
<h1 id="examples">ğŸ‘€ Examples/ç¤ºä¾‹</h1>
<h2 id="section-strain-your-brain">Section: Strain your brain!/å¤§è„‘è¿åŠ¨!</h2>
<h3 id="first-things-first">&gt; First things first!/è¦äº‹ä¼˜å…ˆ *</h3>
<!-- Example ID: d3d73936-3cf1-4632-b5ab-817981338863 -->
<!-- read-only -->

<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒPython 3.8 æ¨å‡º"æµ·è±¡"è¿ç®—ç¬¦ (<code>:=</code>) æ–¹ä¾¿æ˜“ç”¨ï¼Œè®©æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹ã€‚</p>
<p>1.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Python ç‰ˆæœ¬ 3.8+</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;wtf_walrus&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="s1">&#39;wtf_walrus&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">:=</span> <span class="s2">&quot;wtf_walrus&quot;</span>
<span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="n">a</span> <span class="o">:=</span> <span class="s2">&quot;wtf_walrus&quot;</span>
      <span class="o">^</span>
<span class="ne">SyntaxError</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">syntax</span>

<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="n">a</span> <span class="o">:=</span> <span class="s2">&quot;wtf_walrus&quot;</span><span class="p">)</span> <span class="c1"># è¯¥è¯­å¥æœ‰æ•ˆ</span>
<span class="s1">&#39;wtf_walrus&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="s1">&#39;wtf_walrus&#39;</span>
</code></pre></div>
<p>2 .</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Python ç‰ˆæœ¬ 3.8+</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="n">a</span> <span class="o">:=</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
<span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="mi">6</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span> <span class="c1"># å…¸å‹æ‹†åŒ…æ“ä½œ</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
<span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span> <span class="c1"># å‡ºé”™å•¦</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span>
          <span class="o">^</span>
<span class="ne">SyntaxError</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">syntax</span>

<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">:=</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span> <span class="c1"># è¿™é‡Œçš„ç»“æœæ˜¯ä¸€ä¸ªå¥‡æ€ªçš„ä¸‰å…ƒç»„</span>
<span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="c1"># aå€¼ä»ç„¶æ²¡å˜?</span>
<span class="mi">6</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span>
<span class="mi">16</span>
</code></pre></div>
<h4 id="_3">ğŸ’¡ è¯´æ˜</h4>
<p><strong>â€œæµ·è±¡â€è¿ç®—ç¬¦ç®€ä»‹</strong></p>
<p>æµ·è±¡è¿ç®—ç¬¦ (<code>:=</code>) åœ¨Python 3.8ä¸­è¢«å¼•å…¥ï¼Œç”¨æ¥åœ¨è¡¨è¾¾å¼ä¸­ä¸ºå˜é‡èµ‹å€¼ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">some_func</span><span class="p">():</span>
        <span class="c1"># å‡è®¾è¿™å„¿æœ‰ä¸€äº›è€—æ—¶çš„è®¡ç®—</span>
        <span class="c1"># time.sleep(1000)</span>
        <span class="k">return</span> <span class="mi">5</span>

<span class="c1"># å¼•å…¥â€œæµ·è±¡â€è¿ç®—ç¬¦å‰çš„ä¾‹å­</span>
<span class="k">if</span> <span class="n">some_func</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">some_func</span><span class="p">())</span> <span class="c1"># ç³Ÿç³•çš„æ¡ˆä¾‹â€”â€”å‡½æ•°è¿ç®—äº†ä¸¤æ¬¡</span>

<span class="c1"># æˆ–è€…ï¼ŒåŠ ä»¥æ”¹è¿›ï¼š</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">some_func</span><span class="p">()</span>
<span class="k">if</span> <span class="n">a</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="c1"># æœ‰äº†â€œæµ·è±¡â€è¿ç®—ç¬¦ï¼Œä½ å¯ä»¥å†™çš„æ›´ç®€æ´ï¼š</span>
<span class="k">if</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">some_func</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</code></pre></div>
<p><strong>è¾“å‡º (&gt; Python 3.8):</strong></p>
<p><div class="highlight"><pre><span></span><code><span class="mi">5</span>
<span class="mi">5</span>
<span class="mi">5</span>
</code></pre></div>
è¿™æ ·æ—¢å‡å°‘äº†ä¸€è¡Œä»£ç ï¼Œåˆé¿å…äº†ä¸¤æ¬¡è°ƒç”¨ <code>some_func</code> å‡½æ•°ã€‚</p>
<ul>
<li>
<p>åœ¨é¡¶å±‚çš„æ— æ‹¬å·èµ‹å€¼æ“ä½œï¼ˆä½¿ç”¨â€œæµ·è±¡â€è¿ç®—ç¬¦ï¼‰è¢«é™åˆ¶ï¼Œå› æ­¤ä¾‹1ä¸­çš„ <code>a := "wtf_walrus"</code> å‡ºç°äº† <code>SyntaxError</code> ã€‚ç”¨æ‹¬å·æ‹¬èµ·æ¥ã€‚å®ƒå°±èƒ½æ­£å¸¸å·¥ä½œäº†ã€‚</p>
</li>
<li>
<p>ä¸€èˆ¬çš„ï¼ŒåŒ…å« <code>=</code> æ“ä½œçš„è¡¨è¾¾å¼æ˜¯ä¸èƒ½ç”¨æ‹¬å·æ‹¬èµ·æ¥çš„ï¼Œå› æ­¤ <code>(a, b = 6, 9)</code> ä¸­å‡ºç°äº†è¯­æ³•é”™è¯¯ã€‚</p>
</li>
<li>
<p>â€œæµ·è±¡â€è¿ç®—ç¬¦çš„è¯­æ³•å½¢å¼ä¸ºï¼š<code>NAME:= expr</code>ï¼Œ<code>NAME</code> æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ ‡è¯†ç¬¦ï¼Œè€Œ <code>expr</code> æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„è¡¨è¾¾å¼ã€‚ å› æ­¤ï¼Œè¿™æ„å‘³ç€å®ƒä¸æ”¯æŒå¯è¿­ä»£çš„æ‰“åŒ…å’Œæ‹†åŒ…ã€‚</p>
</li>
<li>
<p><code>(a := 6, 9)</code> ç­‰ä»·äº <code>((a := 6), 9)</code> ï¼Œæœ€ç»ˆå¾—åˆ° <code>(a, 9)</code> (å…¶ä¸­ <code>a</code> çš„å€¼ä¸º6)</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="n">a</span> <span class="o">:=</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span> <span class="o">==</span> <span class="p">((</span><span class="n">a</span> <span class="o">:=</span> <span class="mi">6</span><span class="p">),</span> <span class="mi">9</span><span class="p">)</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">:=</span> <span class="mi">696</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span>
<span class="p">(</span><span class="mi">696</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="n">a</span> <span class="c1"># ä¸¤ä¸ªå˜é‡æŒ‡å‘åŒä¸€å†…å­˜ç©ºé—´</span>
<span class="kc">True</span>
</code></pre></div>
</li>
<li>
<p>ç±»ä¼¼çš„ï¼Œ <code>(a, b := 16, 19)</code> ç­‰ä»·äº <code>(a, (b := 16), 19)</code> ï¼Œåªæ˜¯ä¸€ä¸ªä¸‰å…ƒç»„ã€‚ </p>
</li>
</ul>
<hr />
<h3 id="strings-can-be-tricky-sometimes">&gt; Strings can be tricky sometimes/å¾®å¦™çš„å­—ç¬¦ä¸² *</h3>
<p>1.
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;some_string&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="mi">140420665652016</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">id</span><span class="p">(</span><span class="s2">&quot;some&quot;</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span> <span class="c1"># æ³¨æ„ä¸¤ä¸ªçš„idå€¼æ˜¯ç›¸åŒçš„.</span>
<span class="mi">140420665652016</span>
</code></pre></div></p>
<p>2.
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;wtf&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="s2">&quot;wtf&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
<span class="kc">True</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;wtf!&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="s2">&quot;wtf!&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
<span class="kc">False</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="s2">&quot;wtf!&quot;</span><span class="p">,</span> <span class="s2">&quot;wtf!&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="ow">is</span> <span class="n">b</span> 
<span class="kc">True</span> <span class="c1"># 3.7 ç‰ˆæœ¬è¿”å›ç»“æœä¸º False.</span>
</code></pre></div></p>
<p>3.
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;a&#39;</span> <span class="o">*</span> <span class="mi">20</span> <span class="ow">is</span> <span class="s1">&#39;aaaaaaaaaaaaaaaaaaaa&#39;</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;a&#39;</span> <span class="o">*</span> <span class="mi">21</span> <span class="ow">is</span> <span class="s1">&#39;aaaaaaaaaaaaaaaaaaaaa&#39;</span>
<span class="kc">False</span> <span class="c1"># 3.7 ç‰ˆæœ¬è¿”å›ç»“æœä¸º True</span>
</code></pre></div></p>
<p>å¾ˆå¥½ç†è§£, å¯¹å§?</p>
<h4 id="_4">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>è¿™äº›è¡Œä¸ºæ˜¯ç”±äº Cpython åœ¨ç¼–è¯‘ä¼˜åŒ–æ—¶, æŸäº›æƒ…å†µä¸‹ä¼šå°è¯•ä½¿ç”¨å·²ç»å­˜åœ¨çš„ä¸å¯å˜å¯¹è±¡è€Œä¸æ˜¯æ¯æ¬¡éƒ½åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡. (è¿™ç§è¡Œä¸ºè¢«ç§°ä½œå­—ç¬¦ä¸²çš„é©»ç•™[string interning])</li>
<li>å‘ç”Ÿé©»ç•™ä¹‹å, è®¸å¤šå˜é‡å¯èƒ½æŒ‡å‘å†…å­˜ä¸­çš„ç›¸åŒå­—ç¬¦ä¸²å¯¹è±¡. (ä»è€ŒèŠ‚çœå†…å­˜)</li>
<li>åœ¨ä¸Šé¢çš„ä»£ç ä¸­, å­—ç¬¦ä¸²æ˜¯éšå¼é©»ç•™çš„. ä½•æ—¶å‘ç”Ÿéšå¼é©»ç•™åˆ™å–å†³äºå…·ä½“çš„å®ç°. è¿™é‡Œæœ‰ä¸€äº›æ–¹æ³•å¯ä»¥ç”¨æ¥çŒœæµ‹å­—ç¬¦ä¸²æ˜¯å¦ä¼šè¢«é©»ç•™:</li>
<li>æ‰€æœ‰é•¿åº¦ä¸º 0 å’Œé•¿åº¦ä¸º 1 çš„å­—ç¬¦ä¸²éƒ½è¢«é©»ç•™.</li>
<li>å­—ç¬¦ä¸²åœ¨ç¼–è¯‘æ—¶è¢«å®ç° (<code>'wtf'</code> å°†è¢«é©»ç•™, ä½†æ˜¯ <code>''.join(['w', 't', 'f'])</code> å°†ä¸ä¼šè¢«é©»ç•™)</li>
<li>
<p>å­—ç¬¦ä¸²ä¸­åªåŒ…å«å­—æ¯ï¼Œæ•°å­—æˆ–ä¸‹åˆ’çº¿æ—¶å°†ä¼šé©»ç•™. æ‰€ä»¥ <code>'wtf!'</code> ç”±äºåŒ…å« <code>!</code> è€Œæœªè¢«é©»ç•™. å¯ä»¥åœ¨<a href="https://github.com/python/cpython/blob/3.6/Objects/codeobject.c#L19">è¿™é‡Œ</a>æ‰¾åˆ° CPython å¯¹æ­¤è§„åˆ™çš„å®ç°.</p>
<p><img src="../images/string-intern/string_intern.png" alt=""></p>
</li>
<li>
<p>å½“åœ¨åŒä¸€è¡Œå°† <code>a</code> å’Œ <code>b</code> çš„å€¼è®¾ç½®ä¸º <code>"wtf!"</code> çš„æ—¶å€™, Python è§£é‡Šå™¨ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡, ç„¶ååŒæ—¶å¼•ç”¨ç¬¬äºŒä¸ªå˜é‡(è¯‘: ä»…é€‚ç”¨äº3.7ä»¥ä¸‹, è¯¦ç»†æƒ…å†µè¯·çœ‹<a href="https://github.com/leisurelicht/wtfpython-cn/issues/13">è¿™é‡Œ</a>). å¦‚æœä½ åœ¨ä¸åŒçš„è¡Œä¸Šè¿›è¡Œèµ‹å€¼æ“ä½œ, å®ƒå°±ä¸ä¼šâ€œçŸ¥é“â€å·²ç»æœ‰ä¸€ä¸ª <code>wtfï¼</code> å¯¹è±¡ (å› ä¸º <code>"wtf!"</code> ä¸æ˜¯æŒ‰ç…§ä¸Šé¢æåˆ°çš„æ–¹å¼è¢«éšå¼é©»ç•™çš„). å®ƒæ˜¯ä¸€ç§ç¼–è¯‘å™¨ä¼˜åŒ–, ç‰¹åˆ«é€‚ç”¨äºäº¤äº’å¼ç¯å¢ƒ.</p>
</li>
<li>å¸¸é‡æŠ˜å (constant folding) æ˜¯ Python ä¸­çš„ä¸€ç§ <a href="https://en.wikipedia.org/wiki/Peephole_optimization">çª¥å­”ä¼˜åŒ–(peephole optimization)</a> æŠ€æœ¯. è¿™æ„å‘³ç€åœ¨ç¼–è¯‘æ—¶è¡¨è¾¾å¼ <code>'a'*20</code> ä¼šè¢«æ›¿æ¢ä¸º <code>'aaaaaaaaaaaaaaaaaaaa'</code> ä»¥å‡å°‘è¿è¡Œæ—¶çš„æ—¶é’Ÿå‘¨æœŸ. åªæœ‰é•¿åº¦å°äº 20 çš„å­—ç¬¦ä¸²æ‰ä¼šå‘ç”Ÿå¸¸é‡æŠ˜å . (ä¸ºå•¥? æƒ³è±¡ä¸€ä¸‹ç”±äºè¡¨è¾¾å¼ <code>'a'*10**10</code> è€Œç”Ÿæˆçš„ <code>.pyc</code> æ–‡ä»¶çš„å¤§å°). ç›¸å…³çš„æºç å®ç°åœ¨<a href="https://github.com/python/cpython/blob/3.6/Python/peephole.c#L288">è¿™é‡Œ</a>.</li>
<li>å¦‚æœä½ æ˜¯ä½¿ç”¨ 3.7 ç‰ˆæœ¬ä¸­è¿è¡Œä¸Šè¿°ç¤ºä¾‹ä»£ç , ä¼šå‘ç°éƒ¨åˆ†ä»£ç çš„è¿è¡Œç»“æœä¸æ³¨é‡Šè¯´æ˜ç›¸åŒ. è¿™æ˜¯å› ä¸ºåœ¨ 3.7 ç‰ˆæœ¬ä¸­, å¸¸é‡æŠ˜å å·²ç»ä»çª¥å­”ä¼˜åŒ–å™¨è¿ç§»è‡³æ–°çš„ AST ä¼˜åŒ–å™¨, åè€…å¯ä»¥ä»¥æ›´é«˜çš„ä¸€è‡´æ€§æ¥æ‰§è¡Œä¼˜åŒ–. (ç”± Eugene Toder å’Œ INADA Naoki åœ¨ <a href="https://bugs.python.org/issue29469">bpo-29469</a> å’Œ <a href="https://bugs.python.org/issue11549">bpo-11549</a> ä¸­è´¡çŒ®.) </li>
<li>(è¯‘: ä½†æ˜¯åœ¨æœ€æ–°çš„ 3.8 ç‰ˆæœ¬ä¸­, ç»“æœåˆå˜å›å»äº†. è™½ç„¶ 3.8 ç‰ˆæœ¬å’Œ 3.7 ç‰ˆæœ¬ä¸€æ ·, éƒ½æ˜¯ä½¿ç”¨ AST ä¼˜åŒ–å™¨. ç›®å‰ä¸ç¡®å®šå®˜æ–¹å¯¹ 3.8 ç‰ˆæœ¬çš„ AST åšäº†ä»€ä¹ˆè°ƒæ•´.)</li>
</ul>
<hr />
<h3 id="be-careful-with-chained-operations">&gt; Be careful with chained operations/å°å¿ƒé“¾å¼æ“ä½œ</h3>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="kc">False</span> <span class="o">==</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">False</span><span class="p">]</span> <span class="c1"># å¯ä»¥ç†è§£</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kc">False</span> <span class="o">==</span> <span class="p">(</span><span class="kc">False</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">False</span><span class="p">])</span> <span class="c1"># å¯ä»¥ç†è§£</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kc">False</span> <span class="o">==</span> <span class="kc">False</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">False</span><span class="p">]</span> <span class="c1"># ä¸ºæ¯›?</span>
<span class="kc">True</span>

<span class="o">&gt;&gt;&gt;</span> <span class="kc">True</span> <span class="ow">is</span> <span class="kc">False</span> <span class="o">==</span> <span class="kc">False</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kc">False</span> <span class="ow">is</span> <span class="kc">False</span> <span class="ow">is</span> <span class="kc">False</span>
<span class="kc">True</span>

<span class="o">&gt;&gt;&gt;</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="mi">1</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span>
<span class="kc">False</span>
</code></pre></div>
<h4 id="_5">ğŸ’¡ è¯´æ˜:</h4>
<p>æ ¹æ® https://docs.python.org/3/reference/expressions.html#comparisons</p>
<blockquote>
<p>å½¢å¼ä¸Š, å¦‚æœ a, b, c, ..., y, z æ˜¯è¡¨è¾¾å¼, è€Œ op1, op2, ..., opN æ˜¯æ¯”è¾ƒè¿ç®—ç¬¦, é‚£ä¹ˆé™¤äº†æ¯ä¸ªè¡¨è¾¾å¼æœ€å¤šåªå‡ºç°ä¸€æ¬¡ä»¥å¤– a op1 b op2 c ... y opN z å°±ç­‰äº a op1 b and b op2 c and ... y opN z.</p>
</blockquote>
<p>è™½ç„¶ä¸Šé¢çš„ä¾‹å­ä¼¼ä¹å¾ˆæ„šè ¢, ä½†æ˜¯åƒ <code>a == b == c</code> æˆ– <code>0 &lt;= x &lt;= 100</code> å°±å¾ˆæ£’äº†.</p>
<ul>
<li><code>False is False is False</code> ç›¸å½“äº <code>(False is False) and (False is False)</code></li>
<li><code>True is False == False</code> ç›¸å½“äº <code>(True is False) and (False == False)</code>, ç”±äºè¯­å¥çš„ç¬¬ä¸€éƒ¨åˆ† (<code>True is False</code>) ç­‰äº <code>False</code>, å› æ­¤æ•´ä¸ªè¡¨è¾¾å¼çš„ç»“æœä¸º <code>False</code>.</li>
<li><code>1 &gt; 0 &lt; 1</code> ç›¸å½“äº <code>(1 &gt; 0) and (0 &lt; 1)</code>, æ‰€ä»¥æœ€ç»ˆç»“æœä¸º <code>True</code>.</li>
<li>è¡¨è¾¾å¼ <code>(1 &gt; 0) &lt; 1</code> ç›¸å½“äº <code>True &lt; 1</code> ä¸”
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">int</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kc">True</span> <span class="o">+</span> <span class="mi">1</span> <span class="c1"># ä¸è¿™ä¸ªä¾‹å­æ— å…³ï¼Œåªæ˜¯å¨±ä¹ä¸€ä¸‹</span>
<span class="mi">2</span>
</code></pre></div>
  æ‰€ä»¥, <code>1 &lt; 1</code> ç­‰äº <code>False</code></li>
</ul>
<hr />
<h3 id="how-not-to-use-is-operator-is">&gt; How not to use <code>is</code> operator/ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ <code>is</code> æ“ä½œç¬¦</h3>
<!-- Example ID: 230fa2ac-ab36-4ad1-b675-5f5a1c1a6217 --->

<p>ä¸‹é¢æ˜¯ä¸€ä¸ªåœ¨äº’è”ç½‘ä¸Šéå¸¸æœ‰åçš„ä¾‹å­.</p>
<p>1.</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">256</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">256</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
<span class="kc">True</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">257</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">257</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
<span class="kc">False</span>
</code></pre></div>
<p>2.</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
<span class="kc">False</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
<span class="kc">True</span>
</code></pre></div>
<p>3.
<strong>Output</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">257</span><span class="p">,</span> <span class="mi">257</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
<span class="kc">True</span>
</code></pre></div>
<p><strong>Output (Python 3.7.x specifically)</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">257</span><span class="p">,</span> <span class="mi">257</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
<span class="kc">False</span>
</code></pre></div>
<h4 id="_6">ğŸ’¡ è¯´æ˜:</h4>
<p><strong><code>is</code> å’Œ <code>==</code> çš„åŒºåˆ«</strong></p>
<ul>
<li><code>is</code> è¿ç®—ç¬¦æ£€æŸ¥ä¸¤ä¸ªè¿ç®—å¯¹è±¡æ˜¯å¦å¼•ç”¨è‡ªåŒä¸€å¯¹è±¡ (å³, å®ƒæ£€æŸ¥ä¸¤ä¸ªè¿ç®—å¯¹è±¡æ˜¯å¦ç›¸åŒ).</li>
<li><code>==</code> è¿ç®—ç¬¦æ¯”è¾ƒä¸¤ä¸ªè¿ç®—å¯¹è±¡çš„å€¼æ˜¯å¦ç›¸ç­‰.</li>
<li>å› æ­¤ <code>is</code> ä»£è¡¨å¼•ç”¨ç›¸åŒ, <code>==</code> ä»£è¡¨å€¼ç›¸ç­‰. ä¸‹é¢çš„ä¾‹å­å¯ä»¥å¾ˆå¥½çš„è¯´æ˜è¿™ç‚¹,
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="p">[]</span> <span class="o">==</span> <span class="p">[]</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[]</span> <span class="ow">is</span> <span class="p">[]</span> <span class="c1"># è¿™ä¸¤ä¸ªç©ºåˆ—è¡¨ä½äºä¸åŒçš„å†…å­˜åœ°å€.</span>
<span class="kc">False</span>
</code></pre></div></li>
</ul>
<p><strong><code>256</code> æ˜¯ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡, è€Œ <code>257</code> ä¸æ˜¯</strong></p>
<p>å½“ä½ å¯åŠ¨Python çš„æ—¶å€™, æ•°å€¼ä¸º <code>-5</code> åˆ° <code>256</code> çš„å¯¹è±¡å°±å·²ç»è¢«åˆ†é…å¥½äº†. è¿™äº›æ•°å­—å› ä¸ºç»å¸¸è¢«ä½¿ç”¨, æ‰€ä»¥ä¼šè¢«æå‰å‡†å¤‡å¥½.</p>
<p>Python é€šè¿‡è¿™ç§åˆ›å»ºå°æ•´æ•°æ± çš„æ–¹å¼æ¥é¿å…å°æ•´æ•°é¢‘ç¹çš„ç”³è¯·å’Œé”€æ¯å†…å­˜ç©ºé—´.</p>
<p>å¼•ç”¨è‡ª https://docs.python.org/3/c-api/long.html</p>
<blockquote>
<p>å½“å‰çš„å®ç°ä¸º-5åˆ°256ä¹‹é—´çš„æ‰€æœ‰æ•´æ•°ä¿ç•™ä¸€ä¸ªæ•´æ•°å¯¹è±¡æ•°ç»„, å½“ä½ åˆ›å»ºäº†ä¸€ä¸ªè¯¥èŒƒå›´å†…çš„æ•´æ•°æ—¶, ä½ åªéœ€è¦è¿”å›ç°æœ‰å¯¹è±¡çš„å¼•ç”¨. æ‰€ä»¥æ”¹å˜1çš„å€¼æ˜¯æœ‰å¯èƒ½çš„. æˆ‘æ€€ç–‘è¿™ç§è¡Œä¸ºåœ¨Pythonä¸­æ˜¯æœªå®šä¹‰è¡Œä¸º. :-)</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">id</span><span class="p">(</span><span class="mi">256</span><span class="p">)</span>
<span class="mi">10922528</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">256</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">256</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="mi">10922528</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="mi">10922528</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">id</span><span class="p">(</span><span class="mi">257</span><span class="p">)</span>
<span class="mi">140084850247312</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">257</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">257</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">id</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="mi">140084850247440</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">id</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="mi">140084850247344</span>
</code></pre></div>
<p>è¿™é‡Œè§£é‡Šå™¨å¹¶æ²¡æœ‰æ™ºèƒ½åˆ°èƒ½åœ¨æ‰§è¡Œ <code>y = 257</code> æ—¶æ„è¯†åˆ°æˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæ•´æ•° <code>257</code>, æ‰€ä»¥å®ƒåœ¨å†…å­˜ä¸­åˆæ–°å»ºäº†å¦ä¸€ä¸ªå¯¹è±¡.</p>
<p>ç±»ä¼¼çš„ä¼˜åŒ–ä¹Ÿé€‚ç”¨äºå…¶ä»–<strong>ä¸å¯å˜</strong>å¯¹è±¡ï¼Œä¾‹å¦‚ç©ºå…ƒç»„ã€‚ç”±äºåˆ—è¡¨æ˜¯å¯å˜çš„ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆ <code>[] is []</code> å°†è¿”å› <code>False</code> è€Œ <code>() is ()</code> å°†è¿”å› <code>True</code>ã€‚ è¿™è§£é‡Šäº†æˆ‘ä»¬çš„ç¬¬äºŒä¸ªä»£ç æ®µã€‚è€Œç¬¬ä¸‰ä¸ªå‘¢ï¼š</p>
<p><strong>å½“ <code>a</code> å’Œ <code>b</code> åœ¨åŒä¸€è¡Œä¸­ä½¿ç”¨ç›¸åŒçš„å€¼åˆå§‹åŒ–æ—¶ï¼Œä¼šæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡.</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">257</span><span class="p">,</span> <span class="mi">257</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="mi">140640774013296</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="mi">140640774013296</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">257</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">257</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="mi">140640774013392</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="mi">140640774013488</span>
</code></pre></div>
<ul>
<li>å½“ a å’Œ b åœ¨åŒä¸€è¡Œä¸­è¢«è®¾ç½®ä¸º <code>257</code> æ—¶, Python è§£é‡Šå™¨ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡, ç„¶ååŒæ—¶å¼•ç”¨ç¬¬äºŒä¸ªå˜é‡. å¦‚æœä½ åœ¨ä¸åŒçš„è¡Œä¸Šè¿›è¡Œ, å®ƒå°±ä¸ä¼š "çŸ¥é“" å·²ç»å­˜åœ¨ä¸€ä¸ª <code>257</code> å¯¹è±¡äº†.</li>
<li>è¿™æ˜¯ä¸€ç§ç‰¹åˆ«ä¸ºäº¤äº’å¼ç¯å¢ƒåšçš„ç¼–è¯‘å™¨ä¼˜åŒ–. å½“ä½ åœ¨å®æ—¶è§£é‡Šå™¨ä¸­è¾“å…¥ä¸¤è¡Œçš„æ—¶å€™, ä»–ä»¬ä¼šå•ç‹¬ç¼–è¯‘, å› æ­¤ä¹Ÿä¼šå•ç‹¬è¿›è¡Œä¼˜åŒ–. å¦‚æœä½ åœ¨ <code>.py</code> æ–‡ä»¶ä¸­å°è¯•è¿™ä¸ªä¾‹å­, åˆ™ä¸ä¼šçœ‹åˆ°ç›¸åŒçš„è¡Œä¸º, å› ä¸ºæ–‡ä»¶æ˜¯ä¸€æ¬¡æ€§ç¼–è¯‘çš„ã€‚è¿™ç§ä¼˜åŒ–ä¸ä»…é™äºæ•´æ•°ï¼Œå®ƒä¹Ÿé€‚ç”¨äºå…¶ä»–ä¸å¯å˜æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ï¼ˆæŸ¥çœ‹ç¤ºä¾‹â€œå¾®å¦™çš„å­—ç¬¦ä¸²â€ï¼‰å’Œæµ®ç‚¹æ•°ï¼Œ</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mf">257.0</span><span class="p">,</span> <span class="mf">257.0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="ow">is</span> <span class="n">b</span>
<span class="kc">True</span>
</code></pre></div>
<ul>
<li>ä¸ºä»€ä¹ˆè¿™ä¸é€‚ç”¨äº Python 3.7ï¼Ÿ å¤§æ¦‚æ˜¯å› ä¸ºæ­¤ç±»ç¼–è¯‘å™¨ä¼˜åŒ–æ˜¯ç‰¹å®šäºå®ç°çš„ï¼ˆå³å¯èƒ½éšç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿç­‰è€Œå˜åŒ–ï¼‰ã€‚æˆ‘ä»åœ¨è¯•å›¾å¼„æ¸…æ¥šå¯¼è‡´é—®é¢˜çš„å…·ä½“å®ç°æ›´æ”¹ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹æ­¤ <a href="https://github.com/satwikkansal/wtfpython/issues/100">é—®é¢˜</a> ä»¥è·å–æ›´æ–°ã€‚</li>
</ul>
<hr />
<h3 id="hash-brownies">&gt; Hash brownies/æ˜¯æ—¶å€™æ¥ç‚¹è›‹ç³•äº†!</h3>
<ul>
<li>hash brownieæŒ‡ä¸€ç§å«æœ‰å¤§éº»æˆåˆ†çš„è›‹ç³•, æ‰€ä»¥è¿™é‡Œæ˜¯å¥åŒå…³</li>
<li>è¿™é‡Œä¿ç•™åŸä½œè€…å¯¹äºæ ‡é¢˜çš„ç¿»è¯‘</li>
</ul>
<!-- Example ID: eb17db53-49fd-4b61-85d6-345c5ca213ff --->

<p>1.
<div class="highlight"><pre><span></span><code><span class="n">some_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">some_dict</span><span class="p">[</span><span class="mf">5.5</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;JavaScript&quot;</span>
<span class="n">some_dict</span><span class="p">[</span><span class="mf">5.0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Ruby&quot;</span>
<span class="n">some_dict</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Python&quot;</span>
</code></pre></div></p>
<p><strong>Output:</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span><span class="p">[</span><span class="mf">5.5</span><span class="p">]</span>
<span class="s2">&quot;JavaScript&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span><span class="p">[</span><span class="mf">5.0</span><span class="p">]</span> <span class="c1"># &quot;Python&quot; æ¶ˆé™¤äº† &quot;Ruby&quot; çš„å­˜åœ¨?</span>
<span class="s2">&quot;Python&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> 
<span class="s2">&quot;Python&quot;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">complex_five</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">0</span><span class="n">j</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">complex_five</span><span class="p">)</span>
<span class="nb">complex</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span><span class="p">[</span><span class="n">complex_five</span><span class="p">]</span>
<span class="s2">&quot;Python&quot;</span>
</code></pre></div>
<p>ä¸ºä»€ä¹ˆåˆ°å¤„éƒ½æ˜¯Python?</p>
<h4 id="_7">ğŸ’¡ è¯´æ˜</h4>
<ul>
<li>
<p>è¿™ä¸ª StackOverflowçš„ <a href="https://stackoverflow.com/a/32211042/4354153">å›ç­”</a> æ¼‚äº®åœ°è§£é‡Šäº†è¿™èƒŒåçš„åŸºæœ¬åŸç†.</p>
</li>
<li>
<p>Python å­—å…¸ä¸­é”®çš„å”¯ä¸€æ€§æ˜¯æ ¹æ® <em>ç­‰ä»·æ€§</em>ï¼Œè€Œä¸æ˜¯åŒä¸€æ€§ã€‚ å› æ­¤ï¼Œå³ä½¿ <code>5</code>ã€<code>5.0</code> å’Œ <code>5 + 0j</code> æ˜¯ä¸åŒç±»å‹çš„ä¸åŒå¯¹è±¡ï¼Œç”±äºå®ƒä»¬æ˜¯ç›¸ç­‰çš„ï¼Œå®ƒä»¬ä¸èƒ½éƒ½åœ¨åŒä¸€ä¸ª <code>dict</code>ï¼ˆæˆ– <code>set</code>ï¼‰ä¸­ã€‚ åªè¦æ‚¨æ’å…¥å…¶ä¸­ä»»ä½•ä¸€ä¸ªï¼Œå°è¯•æŸ¥æ‰¾ä»»ä½•ä¸åŒä½†ç­‰ä»·çš„é”®éƒ½å°†ä½¿ç”¨åŸå§‹æ˜ å°„å€¼æˆåŠŸï¼ˆè€Œä¸æ˜¯å› â€œKeyErrorâ€è€Œå¤±è´¥ï¼‰ï¼š</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="mi">5</span> <span class="o">==</span> <span class="mf">5.0</span> <span class="o">==</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">0</span><span class="n">j</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">5</span> <span class="ow">is</span> <span class="ow">not</span> <span class="mf">5.0</span> <span class="ow">is</span> <span class="ow">not</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">0</span><span class="n">j</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span><span class="p">[</span><span class="mf">5.0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Ruby&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mf">5.0</span> <span class="ow">in</span> <span class="n">some_dict</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="mi">5</span> <span class="ow">in</span> <span class="n">some_dict</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="mi">5</span> <span class="o">+</span> <span class="mi">0</span><span class="n">j</span> <span class="ow">in</span> <span class="n">some_dict</span><span class="p">)</span>
<span class="kc">True</span>
</code></pre></div>
<ul>
<li>è¿™åœ¨èµ‹å€¼çš„æ—¶å€™ä¹Ÿä¼šç”Ÿæ•ˆã€‚å› æ­¤ï¼Œå½“æ‚¨æ‰§è¡Œ <code>some_dict[5] = "Python"</code> æ—¶ï¼ŒPython ä¼šæ‰¾åˆ°å…·æœ‰ç­‰ä»·é”®å€¼ <code>5.0 -&gt; "Ruby"</code> çš„ç°æœ‰é¡¹ï¼Œè¦†ç›–å…¶å€¼ï¼Œå¹¶ä¿ç•™åŸå§‹é”®å€¼ã€‚</li>
</ul>
<p><div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span>
<span class="p">{</span><span class="mf">5.0</span><span class="p">:</span> <span class="s1">&#39;Ruby&#39;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Python&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span>
<span class="p">{</span><span class="mf">5.0</span><span class="p">:</span> <span class="s1">&#39;Python&#39;</span><span class="p">}</span>
</code></pre></div>
* é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å°†é”®å€¼æ›´æ–°ä¸º<code>5</code>ï¼ˆè€Œä¸æ˜¯<code>5.0</code>ï¼‰ï¼Ÿ æˆ‘ä»¬å®é™…ä¸Šä¸èƒ½åŸåœ°æ›´æ–°ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å…ˆåˆ é™¤é”®ï¼ˆ<code>del some_dict[5.0]</code>ï¼‰ï¼Œç„¶åé‡æ–°èµ‹å€¼ï¼ˆ<code>some_dict[5]</code>ï¼‰å¾—åˆ°æ•´æ•°<code>5</code> ä½œä¸ºé”®è€Œä¸æ˜¯æµ®ç‚¹æ•° <code>5.0</code>ï¼Œå°½ç®¡è¿™å±äºæå°‘æ•°æƒ…å†µã€‚</p>
<ul>
<li>Python æ˜¯å¦‚ä½•åœ¨åŒ…å« <code>5.0</code> çš„å­—å…¸ä¸­æ‰¾åˆ° <code>5</code> çš„ï¼Ÿ Python åªéœ€è¦èŠ±è´¹å¸¸æ•°æ—¶é—´ï¼Œè€Œæ— éœ€ä½¿ç”¨å“ˆå¸Œå‡½æ•°éå†æ¯ä¸€é¡¹ã€‚å½“ Python åœ¨ dict ä¸­æŸ¥æ‰¾é”® <code>foo</code> æ—¶ï¼Œå®ƒé¦–å…ˆè®¡ç®— <code>hash(foo)</code>ï¼ˆä»¥å¸¸æ•°æ—¶é—´è¿è¡Œï¼‰ã€‚å› ä¸ºåœ¨ Python ä¸­ï¼Œè¦æ±‚ç›¸ç­‰çš„å¯¹è±¡å…·æœ‰ç›¸åŒçš„å“ˆå¸Œå€¼ï¼ˆæ­¤å¤„ä¸º<a href="https://docs.python.org/3/reference/datamodel.html#object.__hash__">æ–‡æ¡£</a>ï¼‰ï¼Œ<code>5</code> ã€<code>5.0</code> å’Œ <code>5 + 0j</code> å…·æœ‰ç›¸åŒçš„å“ˆå¸Œå€¼ã€‚</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="mi">5</span> <span class="o">==</span> <span class="mf">5.0</span> <span class="o">==</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">0</span><span class="n">j</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">hash</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="nb">hash</span><span class="p">(</span><span class="mf">5.0</span><span class="p">)</span> <span class="o">==</span> <span class="nb">hash</span><span class="p">(</span><span class="mi">5</span> <span class="o">+</span> <span class="mi">0</span><span class="n">j</span><span class="p">)</span>
<span class="kc">True</span>
</code></pre></div>
<p><strong>æ³¨æ„ï¼š</strong> åä¹‹ä¸ä¸€å®šæ­£ç¡®ï¼šå…·æœ‰ç›¸ç­‰å“ˆå¸Œå€¼çš„å¯¹è±¡æœ¬èº«å¯èƒ½ä¸ç›¸ç­‰ã€‚ï¼ˆè¿™æ˜¯[å“ˆå¸Œå†²çª](https://en.wikipedia.org/wiki/Collision_(computer_science)ï¼‰é€ æˆçš„ï¼Œè¿™ä¹Ÿä¼šé™ä½å“ˆå¸Œè¿ç®—çš„æ€§èƒ½ã€‚ï¼‰</p>
<hr />
<h3 id="deep-down-were-all-the-same">&gt; Deep down, we're all the same./æœ¬è´¨ä¸Š,æˆ‘ä»¬éƒ½ä¸€æ ·. *</h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">WTF</span><span class="p">:</span>
  <span class="k">pass</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">WTF</span><span class="p">()</span> <span class="o">==</span> <span class="n">WTF</span><span class="p">()</span> <span class="c1"># ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡åº”è¯¥ä¸ç›¸ç­‰</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">WTF</span><span class="p">()</span> <span class="ow">is</span> <span class="n">WTF</span><span class="p">()</span> <span class="c1"># ä¹Ÿä¸ç›¸åŒ</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">hash</span><span class="p">(</span><span class="n">WTF</span><span class="p">())</span> <span class="o">==</span> <span class="nb">hash</span><span class="p">(</span><span class="n">WTF</span><span class="p">())</span> <span class="c1"># å“ˆå¸Œå€¼ä¹Ÿåº”è¯¥ä¸åŒ</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">id</span><span class="p">(</span><span class="n">WTF</span><span class="p">())</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">WTF</span><span class="p">())</span>
<span class="kc">True</span>
</code></pre></div></p>
<h4 id="_8">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>å½“è°ƒç”¨ <code>id</code> å‡½æ•°æ—¶, Python åˆ›å»ºäº†ä¸€ä¸ª <code>WTF</code> ç±»çš„å¯¹è±¡å¹¶ä¼ ç»™ <code>id</code> å‡½æ•°. ç„¶å <code>id</code> å‡½æ•°è·å–å…¶idå€¼ (ä¹Ÿå°±æ˜¯å†…å­˜åœ°å€), ç„¶åä¸¢å¼ƒè¯¥å¯¹è±¡. è¯¥å¯¹è±¡å°±è¢«é”€æ¯äº†.</li>
<li>å½“æˆ‘ä»¬è¿ç»­ä¸¤æ¬¡è¿›è¡Œè¿™ä¸ªæ“ä½œæ—¶, Pythonä¼šå°†ç›¸åŒçš„å†…å­˜åœ°å€åˆ†é…ç»™ç¬¬äºŒä¸ªå¯¹è±¡. å› ä¸º (åœ¨CPythonä¸­) <code>id</code> å‡½æ•°ä½¿ç”¨å¯¹è±¡çš„å†…å­˜åœ°å€ä½œä¸ºå¯¹è±¡çš„idå€¼, æ‰€ä»¥ä¸¤ä¸ªå¯¹è±¡çš„idå€¼æ˜¯ç›¸åŒçš„.</li>
<li>ç»¼ä¸Š, å¯¹è±¡çš„idå€¼ä»…ä»…åœ¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå†…å”¯ä¸€. åœ¨å¯¹è±¡è¢«é”€æ¯ä¹‹å, æˆ–è¢«åˆ›å»ºä¹‹å‰, å…¶ä»–å¯¹è±¡å¯ä»¥å…·æœ‰ç›¸åŒçš„idå€¼.</li>
<li>é‚£ä¸ºä»€ä¹ˆ <code>is</code> æ“ä½œçš„ç»“æœä¸º <code>False</code> å‘¢? è®©æˆ‘ä»¬çœ‹çœ‹è¿™æ®µä»£ç .
  <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">WTF</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I&quot;</span><span class="p">)</span>
  <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;D&quot;</span><span class="p">)</span>
</code></pre></div></li>
</ul>
<p><strong>Output:</strong>
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">WTF</span><span class="p">()</span> <span class="ow">is</span> <span class="n">WTF</span><span class="p">()</span>
<span class="n">I</span>
<span class="n">I</span>
<span class="n">D</span>
<span class="n">D</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">id</span><span class="p">(</span><span class="n">WTF</span><span class="p">())</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">WTF</span><span class="p">())</span>
<span class="n">I</span>
<span class="n">D</span>
<span class="n">I</span>
<span class="n">D</span>
<span class="kc">True</span>
</code></pre></div>
  æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„, å¯¹è±¡é”€æ¯çš„é¡ºåºæ˜¯é€ æˆæ‰€æœ‰ä¸åŒä¹‹å¤„çš„åŸå› .</p>
<hr />
<h3 id="disorder-within-order">&gt; Disorder within order/æœ‰åºä¸­æ½œè—ç€æ— åº *</h3>
<!-- Example ID: 91bff1f8-541d-455a-9de4-6cd8ff00ea66 --->

<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>

<span class="n">dictionary</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="n">dictionary</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">;</span> <span class="n">dictionary</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span><span class="p">;</span>

<span class="n">ordered_dict</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<span class="n">ordered_dict</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">;</span> <span class="n">ordered_dict</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span><span class="p">;</span>

<span class="n">another_ordered_dict</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<span class="n">another_ordered_dict</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span><span class="p">;</span> <span class="n">another_ordered_dict</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">DictWithHash</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    å®ç°äº† __hash__ é­”æ³•æ–¹æ³•çš„dictç±»</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="fm">__hash__</span> <span class="o">=</span> <span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="mi">0</span>

<span class="k">class</span> <span class="nc">OrderedDictWithHash</span><span class="p">(</span><span class="n">OrderedDict</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    å®ç°äº† __hash__ é­”æ³•æ–¹æ³•çš„OrderedDictç±»</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="fm">__hash__</span> <span class="o">=</span> <span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="mi">0</span>
</code></pre></div>
<p><strong>Output</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">dictionary</span> <span class="o">==</span> <span class="n">ordered_dict</span> <span class="c1"># å¦‚æœ a == b</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dictionary</span> <span class="o">==</span> <span class="n">another_ordered_dict</span> <span class="c1"># ä¸” b == c</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ordered_dict</span> <span class="o">==</span> <span class="n">another_ordered_dict</span> <span class="c1"># é‚£ä¹ˆä¸ºä»€ä¹ˆ c == a ä¸æˆç«‹??</span>
<span class="kc">False</span>

<span class="c1"># ä¼—æ‰€å‘¨çŸ¥ï¼Œsetæ•°æ®ç»“æ„å‚¨å­˜ä¸é‡å¤å…ƒç´ ï¼Œ</span>
<span class="c1"># è®©æˆ‘ä»¬ç”Ÿæˆä»¥ä¸Šå­—å…¸çš„ set æ•°æ®ç±»å‹ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆâ€¦â€¦</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">({</span><span class="n">dictionary</span><span class="p">,</span> <span class="n">ordered_dict</span><span class="p">,</span> <span class="n">another_ordered_dict</span><span class="p">})</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="n">unhashable</span> <span class="nb">type</span><span class="p">:</span> <span class="s1">&#39;dict&#39;</span>

<span class="c1"># dictç±»æ²¡æœ‰å®ç° __hash__ ï¼Œå‡ºé”™å¯ä»¥ç†è§£ï¼Œæ¥ä¸‹æ¥ä½¿ç”¨æˆ‘ä»¬æ´¾ç”Ÿçš„ç±»ã€‚</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">dictionary</span> <span class="o">=</span> <span class="n">DictWithHash</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dictionary</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">;</span> <span class="n">dictionary</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span><span class="p">;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ordered_dict</span> <span class="o">=</span> <span class="n">OrderedDictWithHash</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ordered_dict</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">;</span> <span class="n">ordered_dict</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span><span class="p">;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_ordered_dict</span> <span class="o">=</span> <span class="n">OrderedDictWithHash</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_ordered_dict</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span><span class="p">;</span> <span class="n">another_ordered_dict</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">({</span><span class="n">dictionary</span><span class="p">,</span> <span class="n">ordered_dict</span><span class="p">,</span> <span class="n">another_ordered_dict</span><span class="p">})</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">({</span><span class="n">ordered_dict</span><span class="p">,</span> <span class="n">another_ordered_dict</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">})</span> <span class="c1"># äº¤æ¢é¡ºåº</span>
<span class="mi">2</span>
</code></pre></div></p>
<p>åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆ?</p>
<h4 id="_9">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p>ç­‰å·çš„ä¼ é€’æ€§æ²¡æœ‰åœ¨ <code>dictionary</code>, <code>ordered_dict</code> å’Œ <code>another_ordered_dict</code> ä¹‹é—´ç”Ÿæ•ˆæ˜¯ <code>OrderedDict</code> ç±»ä¸­ <code>__eq__</code> æ–¹æ³•çš„å®ç°æ–¹å¼é€ æˆçš„ã€‚æ ¹æ®<a href="https://docs.python.org/3/library/collections.html#ordereddict-objects">æ–‡æ¡£</a>ä»¥ä¸‹éƒ¨åˆ†:</p>
<blockquote>
<p>å¯¹äº <code>OrderedDict</code> ç±»ä¹‹é—´ï¼Œç›¸ç­‰æ€§çš„åˆ¤å®šæ˜¯ä½ç½®æ•æ„Ÿçš„ï¼Œå®ç°ç±»ä¼¼äº <code>list(od1.items())==list(od2.items())</code>ã€‚å¯¹äº <code>OrderedDict</code> ç±»ä¸å…¶ä»– <code>Mapping</code> å¯¹è±¡ï¼ˆä¾‹å¦‚<code>dict</code> ç±»ï¼‰ï¼Œç›¸ç­‰æ€§çš„åˆ¤å®šæ˜¯éä½ç½®æ•æ„Ÿçš„ã€‚
- è¿™æ˜¯ä¸ºäº†ä»»ä½•ä½¿ç”¨å¸¸è§„ <code>dict</code> ç±»çš„åœ°æ–¹èƒ½å¤Ÿç›´æ¥ä½¿ç”¨ <code>OrderedDict</code> å¯¹è±¡ä»£æ›¿ã€‚
- å¥½å•¦ï¼Œé‚£ä¸ºä»€ä¹ˆæ”¹å˜é¡ºåºä¼šå½±å“ <code>set</code> å¯¹è±¡ç”Ÿæˆçš„é•¿åº¦å‘¢? ç­”æ¡ˆå°±æ˜¯ä¸Šé¢è¯´çš„ç¼ºä¹ç­‰å·çš„ä¼ é€’æ€§ã€‚å› ä¸º <code>set</code> ç±»æ˜¯å”¯ä¸€å…ƒç´ çš„æ— åºé›†åˆï¼Œå…ƒç´ æ’å…¥çš„é¡ºåºä¸åº”è¯¥æœ‰å½±å“ã€‚ä½†åœ¨æ­¤ä¾‹ä¸­ï¼Œç¡®æœ‰ä¸åŒã€‚è®©æˆ‘ä»¬è¿›ä¸€æ­¥æ·±å…¥ã€‚</p>
</blockquote>
<p><div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">dictionary</span><span class="p">)</span> <span class="c1"># æ¶‰åŠçš„å˜é‡æ˜¯å‰åºç‰‡æ®µå®šä¹‰çš„ mapping å¯¹è±¡</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ordered_dict</span> <span class="ow">in</span> <span class="n">some_set</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ordered_dict</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">some_set</span><span class="p">)</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_ordered_dict</span> <span class="ow">in</span> <span class="n">some_set</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">another_ordered_dict</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">some_set</span><span class="p">)</span>
<span class="mi">1</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">another_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ordered_dict</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_ordered_dict</span> <span class="ow">in</span> <span class="n">another_set</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">another_ordered_dict</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">another_set</span><span class="p">)</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dictionary</span> <span class="ow">in</span> <span class="n">another_set</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">another_ordered_dict</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">another_set</span><span class="p">)</span>
<span class="mi">2</span>
</code></pre></div>
å› æ­¤ï¼Œä¸ä¸€è‡´æ€§æ˜¯ç”±äº <code>another_ordered_dict in another_set</code> ç»“æœä¸º <code>False</code>ã€‚ å› ä¸º <code>ordered_dict</code> å·²ç»åœ¨ <code>another_set</code> ä¸­ï¼Œä½†å¦‚å‰æ‰€è¿°ï¼Œ <code>ordered_dict == another_ordered_dict</code> çš„ç»“æœä¸º <code>False</code>ï¼Œä¼šåœ¨åç»­å†åŠ å…¥ <code>another_ordered_dict</code> åˆ° <code>another_set</code> ä¸­ã€‚</p>
</li>
</ul>
<hr />
<h3 id="keep-tryingtry">&gt; Keep trying.../ä¸åœçš„try *</h3>
<!-- Example ID: b4349443-e89f-4d25-a109-8616be9d41a --->

<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">some_func</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;from_try&#39;</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;from_finally&#39;</span>

<span class="k">def</span> <span class="nf">another_func</span><span class="p">():</span> 
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Finally!&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">one_more_func</span><span class="p">():</span> <span class="c1"># A gotcha!</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="mi">1</span> <span class="o">/</span> <span class="n">i</span>
            <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
                <span class="c1"># Let&#39;s throw it here and handle it outside for loop</span>
                <span class="k">raise</span> <span class="ne">ZeroDivisionError</span><span class="p">(</span><span class="s2">&quot;A trivial divide by zero error&quot;</span><span class="p">)</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Iteration&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="k">break</span>
    <span class="k">except</span> <span class="ne">ZeroDivisionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Zero division error occurred&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</code></pre></div>
<p><strong>Output:</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_func</span><span class="p">()</span>
<span class="s1">&#39;from_finally&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">another_func</span><span class="p">()</span>
<span class="n">Finally</span><span class="err">!</span>
<span class="n">Finally</span><span class="err">!</span>
<span class="n">Finally</span><span class="err">!</span>

<span class="o">&gt;&gt;&gt;</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">0</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">ZeroDivisionError</span><span class="p">:</span> <span class="n">division</span> <span class="n">by</span> <span class="n">zero</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">one_more_func</span><span class="p">()</span>
<span class="n">Iteration</span> <span class="mi">0</span>
</code></pre></div>
<h4 id="_10">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>å½“åœ¨ "try...finally" è¯­å¥çš„ <code>try</code> ä¸­æ‰§è¡Œ <code>return</code>, <code>break</code> æˆ– <code>continue</code> å, <code>finally</code> å­å¥ä¾ç„¶ä¼šæ‰§è¡Œ.</li>
<li>å‡½æ•°çš„è¿”å›å€¼ç”±æœ€åæ‰§è¡Œçš„ <code>return</code> è¯­å¥å†³å®š. ç”±äº <code>finally</code> å­å¥ä¸€å®šä¼šæ‰§è¡Œ, æ‰€ä»¥ <code>finally</code> å­å¥ä¸­çš„ <code>return</code> å°†å§‹ç»ˆæ˜¯æœ€åæ‰§è¡Œçš„è¯­å¥.</li>
<li>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœ finally å­å¥æ‰§è¡Œ <code>return</code> æˆ– <code>break</code> è¯­å¥ï¼Œä¸´æ—¶ä¿å­˜çš„å¼‚å¸¸å°†è¢«ä¸¢å¼ƒã€‚</li>
</ul>
<hr />
<h3 id="for-what">&gt; For what?/ä¸ºä»€ä¹ˆ?</h3>
<div class="highlight"><pre><span></span><code><span class="n">some_string</span> <span class="o">=</span> <span class="s2">&quot;wtf&quot;</span>
<span class="n">some_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">some_dict</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">some_string</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span> <span class="c1"># åˆ›å»ºäº†ç´¢å¼•å­—å…¸.</span>
<span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;f&#39;</span><span class="p">}</span>
</code></pre></div></p>
<h4 id="_11">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li><a href="https://docs.python.org/3/reference/grammar.html">Python è¯­æ³•</a> ä¸­å¯¹ <code>for</code> çš„å®šä¹‰æ˜¯:
  <div class="highlight"><pre><span></span><code>for_stmt: &#39;for&#39; exprlist &#39;in&#39; testlist &#39;:&#39; suite [&#39;else&#39; &#39;:&#39; suite]
</code></pre></div>
  å…¶ä¸­ <code>exprlist</code> æŒ‡åˆ†é…ç›®æ ‡. è¿™æ„å‘³ç€å¯¹å¯è¿­ä»£å¯¹è±¡ä¸­çš„<strong>æ¯ä¸€é¡¹éƒ½ä¼šæ‰§è¡Œ</strong>ç±»ä¼¼ <code>{exprlist} = {next_value}</code> çš„æ“ä½œ.</li>
</ul>
<p>ä¸€ä¸ªæœ‰è¶£çš„ä¾‹å­è¯´æ˜äº†è¿™ä¸€ç‚¹:
  <div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">10</span>
</code></pre></div></p>
<p><strong>Output:</strong>
  <div class="highlight"><pre><span></span><code>0
1
2
3
</code></pre></div></p>
<p>ä½ å¯æ›¾è§‰å¾—è¿™ä¸ªå¾ªç¯åªä¼šè¿è¡Œä¸€æ¬¡?</p>
<p><strong>ğŸ’¡ è¯´æ˜:</strong></p>
<ul>
<li>
<p>ç”±äºå¾ªç¯åœ¨Pythonä¸­å·¥ä½œæ–¹å¼, èµ‹å€¼è¯­å¥ <code>i = 10</code> å¹¶ä¸ä¼šå½±å“è¿­ä»£å¾ªç¯, åœ¨æ¯æ¬¡è¿­ä»£å¼€å§‹ä¹‹å‰, è¿­ä»£å™¨(è¿™é‡ŒæŒ‡ <code>range(4)</code>) ç”Ÿæˆçš„ä¸‹ä¸€ä¸ªå…ƒç´ å°±è¢«è§£åŒ…å¹¶èµ‹å€¼ç»™ç›®æ ‡åˆ—è¡¨çš„å˜é‡(è¿™é‡ŒæŒ‡ <code>i</code>)äº†.</p>
</li>
<li>
<p>åœ¨æ¯ä¸€æ¬¡çš„è¿­ä»£ä¸­, <code>enumerate(some_string)</code> å‡½æ•°å°±ç”Ÿæˆä¸€ä¸ªæ–°å€¼ <code>i</code> (è®¡æ•°å™¨å¢åŠ ) å¹¶ä» <code>some_string</code> ä¸­è·å–ä¸€ä¸ªå­—ç¬¦. ç„¶åå°†å­—å…¸ <code>some_dict</code> é”® <code>i</code> (åˆšåˆšåˆ†é…çš„) çš„å€¼è®¾ä¸ºè¯¥å­—ç¬¦. æœ¬ä¾‹ä¸­å¾ªç¯çš„å±•å¼€å¯ä»¥ç®€åŒ–ä¸º:
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">i</span><span class="p">,</span> <span class="n">some_dict</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">i</span><span class="p">,</span> <span class="n">some_dict</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">i</span><span class="p">,</span> <span class="n">some_dict</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span>
</code></pre></div></p>
</li>
</ul>
<hr />
<h3 id="evaluation-time-discrepancy">&gt; Evaluation time discrepancy/æ‰§è¡Œæ—¶æœºå·®å¼‚</h3>
<p>1.
<div class="highlight"><pre><span></span><code><span class="n">array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">15</span><span class="p">]</span>
<span class="c1"># ä¸€ä¸ªå…¸å‹çš„ç”Ÿæˆå™¨è¡¨è¾¾å¼</span>
<span class="n">g</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">array</span> <span class="k">if</span> <span class="n">array</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">22</span><span class="p">]</span>
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">))</span> <span class="c1">#å…¶ä»–çš„å€¼å»å“ªå„¿äº†ï¼Ÿ</span>
<span class="p">[</span><span class="mi">8</span><span class="p">]</span>
</code></pre></div></p>
<p>2.</p>
<div class="highlight"><pre><span></span><code><span class="n">array_1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="n">g1</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">array_1</span><span class="p">)</span>
<span class="n">array_1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>

<span class="n">array_2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="n">g2</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">array_2</span><span class="p">)</span>
<span class="n">array_2</span><span class="p">[:]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">g1</span><span class="p">))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">g2</span><span class="p">))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
</code></pre></div></p>
<p>3.</p>
<div class="highlight"><pre><span></span><code><span class="n">array_3</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">array_4</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
<span class="n">gen</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">array_3</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">array_4</span><span class="p">)</span>

<span class="n">array_3</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="n">array_4</span> <span class="o">=</span> <span class="p">[</span><span class="mi">400</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">600</span><span class="p">]</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">gen</span><span class="p">))</span>
<span class="p">[</span><span class="mi">401</span><span class="p">,</span> <span class="mi">501</span><span class="p">,</span> <span class="mi">601</span><span class="p">,</span> <span class="mi">402</span><span class="p">,</span> <span class="mi">502</span><span class="p">,</span> <span class="mi">602</span><span class="p">,</span> <span class="mi">403</span><span class="p">,</span> <span class="mi">503</span><span class="p">,</span> <span class="mi">603</span><span class="p">]</span>
</code></pre></div></p>
<h4 id="_12">ğŸ’¡ è¯´æ˜</h4>
<ul>
<li>åœ¨<a href="https://wiki.python.org/moin/Generators">ç”Ÿæˆå™¨</a>è¡¨è¾¾å¼ä¸­, <code>in</code> å­å¥åœ¨å£°æ˜æ—¶æ‰§è¡Œ, è€Œæ¡ä»¶å­å¥åˆ™æ˜¯åœ¨è¿è¡Œæ—¶æ‰§è¡Œ.</li>
<li>æ‰€ä»¥åœ¨è¿è¡Œå‰, <code>array</code> å·²ç»è¢«é‡æ–°èµ‹å€¼ä¸º <code>[2, 8, 22]</code>, å› æ­¤å¯¹äºä¹‹å‰çš„ <code>1</code>, <code>8</code> å’Œ <code>15</code>, åªæœ‰ <code>count(8)</code> çš„ç»“æœæ˜¯å¤§äº <code>0</code> çš„, æ‰€ä»¥ç”Ÿæˆå™¨åªä¼šç”Ÿæˆ <code>8</code>.</li>
<li>ç¬¬äºŒéƒ¨åˆ†ä¸­ <code>g1</code> å’Œ <code>g2</code> çš„è¾“å‡ºå·®å¼‚åˆ™æ˜¯ç”±äºå˜é‡ <code>array_1</code> å’Œ <code>array_2</code> è¢«é‡æ–°èµ‹å€¼çš„æ–¹å¼å¯¼è‡´çš„.</li>
<li>åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹, <code>array_1</code> è¢«ç»‘å®šåˆ°æ–°å¯¹è±¡ <code>[1,2,3,4,5]</code>, å› ä¸º <code>in</code> å­å¥æ˜¯åœ¨å£°æ˜æ—¶è¢«æ‰§è¡Œçš„ï¼Œ æ‰€ä»¥å®ƒä»ç„¶å¼•ç”¨æ—§å¯¹è±¡ <code>[1,2,3,4]</code>(å¹¶æ²¡æœ‰è¢«é”€æ¯).</li>
<li>åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹, å¯¹ <code>array_2</code> çš„åˆ‡ç‰‡èµ‹å€¼å°†ç›¸åŒçš„æ—§å¯¹è±¡ <code>[1,2,3,4]</code> åŸåœ°æ›´æ–°ä¸º <code>[1,2,3,4,5]</code>. å› æ­¤ <code>g2</code> å’Œ <code>array_2</code> ä»ç„¶å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡(è¿™ä¸ªå¯¹è±¡ç°åœ¨å·²ç»æ›´æ–°ä¸º <code>[1,2,3,4,5]</code>).</li>
<li>å¥½å•¦ï¼ŒæŒ‰ç…§ç›®å‰è®¨è®ºçš„é€»è¾‘ï¼Œç¬¬ä¸‰ä¸ªä»£ç æ®µä¸­çš„ <code>list(gen)</code> çš„å€¼ä¸åº”è¯¥æ˜¯ <code>[11, 21, 31, 12, 22, 32, 13, 23, 33]</code> å—? ï¼ˆæ¯•ç«Ÿ <code>array_3</code> å’Œ <code>array_4</code> çš„è¡Œä¸ºä¸ <code>array_1</code> ä¸€æ ·ï¼‰ã€‚ <a href="https://www.python.org/dev/peps/pep-0289/#the-details">PEP-289</a> ä¸­è§£é‡Šäº†ï¼ˆåªæœ‰ï¼‰<code>array_4</code> å€¼æ›´æ–°çš„åŸå› 
     &gt; åªæœ‰æœ€å¤–å±‚çš„ for è¡¨è¾¾å¼ä¼šç«‹å³è®¡ç®—ï¼Œå…¶ä»–è¡¨è¾¾å¼ä¼šå»¶è¿Ÿåˆ°ç”Ÿæˆå™¨è¿è¡Œã€‚</li>
</ul>
<hr />
<h3 id="is-not-is-not-is-not-is-not-is-not">&gt; <code>is not ...</code> is not <code>is (not ...)</code>/<code>is not ...</code> ä¸æ˜¯ <code>is (not ...)</code></h3>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;something&#39;</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;something&#39;</span> <span class="ow">is</span> <span class="p">(</span><span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
<span class="kc">False</span>
</code></pre></div>
<h4 id="_13">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li><code>is not</code> æ˜¯ä¸ªå•ç‹¬çš„äºŒå…ƒè¿ç®—ç¬¦, ä¸åˆ†åˆ«ä½¿ç”¨ <code>is</code> å’Œ <code>not</code> ä¸åŒ.</li>
<li>å¦‚æœæ“ä½œç¬¦ä¸¤ä¾§çš„å˜é‡æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡, åˆ™ <code>is not</code> çš„ç»“æœä¸º <code>False</code>, å¦åˆ™ç»“æœä¸º <code>True</code>.</li>
</ul>
<hr />
<h3 id="a-tic-tac-toe-where-x-wins-in-the-first-attempt">&gt; A tic-tac-toe where X wins in the first attempt!/ä¸€è¹´å³è‡³!</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># æˆ‘ä»¬å…ˆåˆå§‹åŒ–ä¸€ä¸ªå˜é‡row</span>
<span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span> <span class="c1">#row i[&#39;&#39;, &#39;&#39;, &#39;&#39;]</span>
<span class="c1"># å¹¶åˆ›å»ºä¸€ä¸ªå˜é‡board</span>
<span class="n">board</span> <span class="o">=</span> <span class="p">[</span><span class="n">row</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">board</span>
<span class="p">[[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">board</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="s1">&#39;&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;X&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">board</span>
<span class="p">[[</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]]</span>
</code></pre></div></p>
<p>æˆ‘ä»¬æœ‰æ²¡æœ‰èµ‹å€¼è¿‡3ä¸ª "X" å‘¢ï¼Ÿ</p>
<h4 id="_14">ğŸ’¡ è¯´æ˜:</h4>
<p>å½“æˆ‘ä»¬åˆå§‹åŒ– <code>row</code> å˜é‡æ—¶, ä¸‹é¢è¿™å¼ å›¾å±•ç¤ºäº†å†…å­˜ä¸­çš„æƒ…å†µã€‚</p>
<p><img alt="image" src="../images/tic-tac-toe/after_row_initialized.png" /></p>
<p>è€Œå½“é€šè¿‡å¯¹ <code>row</code> åšä¹˜æ³•æ¥åˆå§‹åŒ– <code>board</code> æ—¶, å†…å­˜ä¸­çš„æƒ…å†µåˆ™å¦‚ä¸‹å›¾æ‰€ç¤º (æ¯ä¸ªå…ƒç´  <code>board[0]</code>, <code>board[1]</code> å’Œ <code>board[2]</code> éƒ½å’Œ <code>row</code> ä¸€æ ·å¼•ç”¨äº†åŒä¸€åˆ—è¡¨.)</p>
<p><img alt="image" src="../images/tic-tac-toe/after_board_initialized.png" /></p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸ä½¿ç”¨å˜é‡ <code>row</code> ç”Ÿæˆ <code>board</code> æ¥é¿å…è¿™ç§æƒ…å†µ. (<a href="https://github.com/satwikkansal/wtfpython/issues/68">è¿™ä¸ª</a>issueæå‡ºäº†è¿™ä¸ªéœ€æ±‚.)</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">board</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">board</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;X&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">board</span>
<span class="p">[[</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]]</span>
</code></pre></div>
<hr />
<h3 id="schrodingers-variable">&gt; SchrÃ¶dinger's variable/è–›å®šè°”çš„å˜é‡ *</h3>
<!-- Example ID: 4dc42f77-94cb-4eb5-a120-8203d3ed7604 --->

<div class="highlight"><pre><span></span><code><span class="n">funcs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">some_func</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">x</span>
    <span class="n">funcs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">some_func</span><span class="p">)</span>
    <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">some_func</span><span class="p">())</span> <span class="c1"># æ³¨æ„è¿™é‡Œå‡½æ•°è¢«æ‰§è¡Œäº†</span>

<span class="n">funcs_results</span> <span class="o">=</span> <span class="p">[</span><span class="n">func</span><span class="p">()</span> <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">funcs</span><span class="p">]</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">results</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">funcs_results</span>
<span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
</code></pre></div></p>
<p>å³ä½¿æ¯æ¬¡åœ¨è¿­ä»£ä¸­å°† <code>some_func</code> åŠ å…¥ <code>funcs</code> å‰çš„ <code>x</code> å€¼éƒ½ä¸ç›¸åŒ, æ‰€æœ‰çš„å‡½æ•°è¿˜æ˜¯éƒ½è¿”å›6.</p>
<p>// å†æ¢ä¸ªä¾‹å­</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">powers_of_x</span> <span class="o">=</span> <span class="p">[</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">f</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">powers_of_x</span><span class="p">]</span>
<span class="p">[</span><span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">,</span> <span class="mi">512</span><span class="p">]</span>
</code></pre></div>
<h4 id="_15">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p>å½“åœ¨å¾ªç¯å†…éƒ¨å®šä¹‰ä¸€ä¸ªå‡½æ•°æ—¶, å¦‚æœè¯¥å‡½æ•°åœ¨å…¶ä¸»ä½“ä¸­ä½¿ç”¨äº†å¾ªç¯å˜é‡, åˆ™é—­åŒ…å‡½æ•°å°†ä¸å¾ªç¯å˜é‡ç»‘å®š, è€Œä¸æ˜¯å®ƒçš„å€¼. å› æ­¤, æ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯ä½¿ç”¨æœ€ååˆ†é…ç»™å˜é‡çš„å€¼æ¥è¿›è¡Œè®¡ç®—çš„.</p>
</li>
<li>
<p>å¯ä»¥é€šè¿‡å°†å¾ªç¯å˜é‡ä½œä¸ºå‘½åå˜é‡ä¼ é€’ç»™å‡½æ•°æ¥è·å¾—é¢„æœŸçš„ç»“æœ. <strong>ä¸ºä»€ä¹ˆè¿™æ ·å¯è¡Œ?</strong> å› ä¸ºè¿™ä¼šåœ¨å‡½æ•°å†…å†æ¬¡å®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒä½¿ç”¨äº†æ¥è‡ªä¸Šä¸‹æ–‡çš„<code>x</code>ï¼ˆå³<em>ä¸æ˜¯</em>å±€éƒ¨å˜é‡ï¼‰ï¼š
ï¼ˆè¯‘è€…æ³¨: inspectä½äºPythonæ ‡å‡†åº“ä¸­ï¼Œè¯¥æ¨¡å—ç”¨äºæ”¶é›†pythonå¯¹è±¡çš„ä¿¡æ¯ï¼Œå¯ä»¥è·å–ç±»æˆ–å‡½æ•°çš„å‚æ•°çš„ä¿¡æ¯ï¼Œæºç ï¼Œè§£æå †æ ˆï¼Œå¯¹å¯¹è±¡è¿›è¡Œç±»å‹æ£€æŸ¥ç­‰ç­‰ï¼ŒPython3.3+ç‰ˆæœ¬æ”¯æŒgetclosurevarså‡½æ•°ï¼‰
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">inspect</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getclosurevars</span><span class="p">(</span><span class="n">funcs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">ClosureVars</span><span class="p">(</span><span class="n">nonlocals</span><span class="o">=</span><span class="p">{},</span> <span class="nb">globals</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span> <span class="n">builtins</span><span class="o">=</span><span class="p">{},</span> <span class="n">unbound</span><span class="o">=</span><span class="nb">set</span><span class="p">())</span>
</code></pre></div></p>
</li>
</ul>
<p>ç”±äº <code>x</code> æ˜¯ä¸€ä¸ªå…¨å±€å€¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ›´æ–° <code>x</code> æ¥æ›´æ”¹ <code>funcs</code> ç”¨æ¥æŸ¥æ‰¾å’Œè¿”å›çš„å€¼ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">42</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">func</span><span class="p">()</span> <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">funcs</span><span class="p">]</span>
<span class="p">[</span><span class="mi">42</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">42</span><span class="p">]</span>
</code></pre></div>
<ul>
<li>è¦è·å¾—æƒ³è¦çš„ç»“æœï¼Œæ‚¨å¯ä»¥å°†å¾ªç¯å˜é‡ä½œä¸ºå‘½åå˜é‡ä¼ é€’ç»™å‡½æ•°ã€‚ <strong>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ</strong> å› ä¸ºè¿™ä¼šåœ¨å‡½æ•°çš„ä½œç”¨åŸŸå†…å®šä¹‰å˜é‡ã€‚ å®ƒå°†ä¸å†è¿›å…¥å‘¨å›´ï¼ˆå…¨å±€ï¼‰èŒƒå›´æ¥æŸ¥æ‰¾å˜é‡å€¼ï¼Œè€Œæ˜¯ä¼šåˆ›å»ºä¸€ä¸ªå±€éƒ¨å˜é‡æ¥å­˜å‚¨è¯¥æ—¶é—´ç‚¹çš„â€œxâ€å€¼ã€‚</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">funcs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">some_func</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span>
    <span class="n">funcs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">some_func</span><span class="p">)</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">funcs_results</span> <span class="o">=</span> <span class="p">[</span><span class="n">func</span><span class="p">()</span> <span class="k">for</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">funcs</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">funcs_results</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
</code></pre></div></p>
<p>æ­¤æ—¶ï¼Œä¸å†ä½¿ç”¨å…¨å±€å˜é‡ <code>x</code>ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getclosurevars</span><span class="p">(</span><span class="n">funcs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">ClosureVars</span><span class="p">(</span><span class="n">nonlocals</span><span class="o">=</span><span class="p">{},</span> <span class="nb">globals</span><span class="o">=</span><span class="p">{},</span> <span class="n">builtins</span><span class="o">=</span><span class="p">{},</span> <span class="n">unbound</span><span class="o">=</span><span class="nb">set</span><span class="p">())</span>
</code></pre></div>
<hr />
<h3 id="the-chicken-egg-problem">&gt; The chicken-egg problem/å…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹ *</h3>
<!-- Example ID: 60730dc2-0d79-4416-8568-2a63323b3ce8 --->

<p>1.
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
<span class="kc">True</span>
</code></pre></div>
é‚£ä¹ˆåˆ°åº•è°æ˜¯â€œæœ€ç»ˆâ€çš„åŸºç±»å‘¢ï¼Ÿä¸‹è¾¹é¡ºä¾¿åˆ—å‡ºæ›´å¤šçš„ä»¤äººå›°æƒ‘çš„åœ°æ–¹</p>
<p>2. </p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">class</span> <span class="nc">A</span><span class="p">:</span> <span class="k">pass</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>
<span class="kc">True</span>
</code></pre></div>
<p>3.</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">issubclass</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">issubclass</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">issubclass</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
<span class="kc">False</span>
</code></pre></div>
<h4 id="_16">ğŸ’¡ è¯´æ˜</h4>
<ul>
<li><code>type</code> æ˜¯ Python ä¸­çš„<a href="https://realpython.com/python-metaclasses/">å…ƒç±»</a>ã€‚</li>
<li>Python ä¸­ï¼Œ<strong>ä¸€åˆ‡</strong>çš†å¯¹è±¡ï¼Œå…¶ä¸­åŒ…æ‹¬ç±»åŠå…¶å¯¹è±¡ï¼ˆå®ä¾‹ï¼‰ã€‚</li>
<li><code>type</code> ç±»å‹æ˜¯<code>object</code>ç±»çš„å…ƒç±»ï¼Œæ¯ä¸ªç±»ï¼ˆåŒ…æ‹¬<code>type</code>ï¼‰éƒ½ç›´æ¥æˆ–é—´æ¥åœ°ç»§æ‰¿è‡ª<code>object</code>ã€‚</li>
<li>å¯¹è±¡å’Œç±»å‹ä¹‹é—´æ²¡æœ‰çœŸæ­£çš„åŸºç±»ã€‚ä¸Šè¿°ç‰‡æ®µä¸­çš„ä»¤äººå›°æƒ‘çš„åœ°æ–¹ä¹‹æ‰€ä»¥å‡ºç°ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä» Python ç±»çš„è§’åº¦è€ƒè™‘è¿™äº›å…³ç³»ï¼ˆissubclass å’Œ isinstanceï¼‰ã€‚ <code>object</code>å’Œ<code>type</code>ä¹‹é—´çš„å…³ç³»ä¸èƒ½åœ¨çº¯pythonä¸­é‡ç°ã€‚ æ›´å‡†ç¡®åœ°è¯´ï¼Œä»¥ä¸‹å…³ç³»ä¸èƒ½åœ¨çº¯ Python ä¸­é‡ç°:<ul>
<li>Aç±»æ˜¯Bç±»çš„ä¸€ä¸ªå®ä¾‹ï¼ŒBç±»æ˜¯Aç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚</li>
<li>Aç±»æ˜¯å®ƒè‡ªå·±çš„ä¸€ä¸ªå®ä¾‹ã€‚</li>
</ul>
</li>
<li><code>object</code>å’Œ<code>type</code>ä¹‹é—´çš„å…³ç³»ï¼ˆæ—¢æ˜¯å½¼æ­¤çš„å®ä¾‹ï¼Œä¹Ÿæ˜¯å®ƒä»¬è‡ªå·±çš„å®ä¾‹ï¼‰å­˜åœ¨äº Python ä¸­ï¼Œè¿™æ˜¯æºäºå®ç°å±‚çº§ä¸Šçš„â€œä½œå¼Šâ€è¡Œä¸ºã€‚</li>
</ul>
<hr />
<h3 id="subclass-relationships">&gt; Subclass relationships/å­ç±»å…³ç³» *</h3>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Hashable</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">issubclass</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">issubclass</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">Hashable</span><span class="p">)</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">issubclass</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">Hashable</span><span class="p">)</span>
<span class="kc">False</span>
</code></pre></div></p>
<p>å­ç±»å…³ç³»åº”è¯¥æ˜¯å¯ä¼ é€’çš„, å¯¹å§? (å³, å¦‚æœ <code>A</code> æ˜¯ <code>B</code> çš„å­ç±», <code>B</code> æ˜¯ <code>C</code> çš„å­ç±», é‚£ä¹ˆ <code>A</code> <em>åº”è¯¥</em> æ˜¯ <code>C</code> çš„å­ç±».)</p>
<h4 id="_17">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>Python ä¸­çš„å­ç±»å…³ç³»å¹¶ä¸ä¸€å®šæ˜¯ä¼ é€’çš„. ä»»ä½•äººéƒ½å¯ä»¥åœ¨å…ƒç±»ä¸­éšæ„å®šä¹‰ <code>__subclasscheck__</code>.</li>
<li>å½“ <code>issubclass(cls, Hashable)</code> è¢«è°ƒç”¨æ—¶, å®ƒåªæ˜¯åœ¨ <code>cls</code> ä¸­å¯»æ‰¾ <code>__hash__</code> æ–¹æ³•æˆ–è€…ä»ç»§æ‰¿çš„çˆ¶ç±»ä¸­å¯»æ‰¾ <code>__hash__</code> æ–¹æ³•.</li>
<li>ç”±äº <code>object</code> is å¯æ•£åˆ—çš„(hashable), ä½†æ˜¯ <code>list</code> æ˜¯ä¸å¯æ•£åˆ—çš„, æ‰€ä»¥å®ƒæ‰“ç ´äº†è¿™ç§ä¼ é€’å…³ç³».</li>
<li>åœ¨<a href="https://www.naftaliharris.com/blog/python-subclass-intransitivity/">è¿™é‡Œ</a>å¯ä»¥æ‰¾åˆ°æ›´è¯¦ç»†çš„è§£é‡Š.</li>
</ul>
<hr />
<h3 id="methods-equality-and-identity">&gt; Methods equality and identity/æ–¹æ³•çš„ç›¸ç­‰æ€§å’Œå”¯ä¸€æ€§ *</h3>
<!-- Example ID: 94802911-48fe-4242-defa-728ae893fa32 --->

<p>1.
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SomeClass</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">classm</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">staticm</span><span class="p">():</span>
        <span class="k">pass</span>
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">SomeClass</span><span class="o">.</span><span class="n">method</span> <span class="ow">is</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">method</span><span class="p">)</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">SomeClass</span><span class="o">.</span><span class="n">classm</span> <span class="ow">is</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">classm</span><span class="p">)</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">SomeClass</span><span class="o">.</span><span class="n">classm</span> <span class="o">==</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">classm</span><span class="p">)</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">SomeClass</span><span class="o">.</span><span class="n">staticm</span> <span class="ow">is</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">staticm</span><span class="p">)</span>
<span class="kc">True</span>
</code></pre></div>
è®¿é—® <code>classm</code> ä¸¤æ¬¡ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªç›¸ç­‰çš„å¯¹è±¡ï¼Œä½†ä¸æ˜¯<em>åŒä¸€ä¸ª</em>ï¼Ÿ è®©æˆ‘ä»¬çœ‹çœ‹ <code>SomeClass</code> çš„å®ä¾‹ä¼šå‘ç”Ÿä»€ä¹ˆï¼š</p>
<p>2.
<div class="highlight"><pre><span></span><code><span class="n">o1</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
<span class="n">o2</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">o1</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">o2</span><span class="o">.</span><span class="n">method</span><span class="p">)</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">o1</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="n">o1</span><span class="o">.</span><span class="n">method</span><span class="p">)</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">o1</span><span class="o">.</span><span class="n">method</span> <span class="ow">is</span> <span class="n">o1</span><span class="o">.</span><span class="n">method</span><span class="p">)</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">o1</span><span class="o">.</span><span class="n">classm</span> <span class="ow">is</span> <span class="n">o1</span><span class="o">.</span><span class="n">classm</span><span class="p">)</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">o1</span><span class="o">.</span><span class="n">classm</span> <span class="o">==</span> <span class="n">o1</span><span class="o">.</span><span class="n">classm</span> <span class="o">==</span> <span class="n">o2</span><span class="o">.</span><span class="n">classm</span> <span class="o">==</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">classm</span><span class="p">)</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">o1</span><span class="o">.</span><span class="n">staticm</span> <span class="ow">is</span> <span class="n">o1</span><span class="o">.</span><span class="n">staticm</span> <span class="ow">is</span> <span class="n">o2</span><span class="o">.</span><span class="n">staticm</span> <span class="ow">is</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">staticm</span><span class="p">)</span>
<span class="kc">True</span>
</code></pre></div></p>
<p>è®¿é—® <code>classm</code> or <code>method</code> ä¸¤æ¬¡, ä¸º <code>SomeClass</code> çš„åŒä¸€ä¸ªå®ä¾‹åˆ›å»ºäº†ç›¸ç­‰ä½†æ˜¯<em>ä¸åŒ</em>çš„å¯¹è±¡ã€‚</p>
<h4 id="_18">ğŸ’¡ è¯´æ˜</h4>
<ul>
<li>å‡½æ•°æ˜¯<a href="https://docs.python.org/3/howto/descriptor.html">æè¿°ç¬¦</a>ã€‚æ¯å½“å°†å‡½æ•°ä½œä¸ºå±æ€§è®¿é—®æ—¶ï¼Œå°±ä¼šè°ƒç”¨æè¿°ç¬¦ï¼Œåˆ›å»ºä¸€ä¸ªæ–¹æ³•å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°†å‡½æ•°ä¸æ‹¥æœ‰è¯¥å±æ€§çš„å¯¹è±¡â€œç»‘å®šâ€ã€‚å¦‚æœè¢«è°ƒç”¨ï¼Œè¯¥æ–¹æ³•è°ƒç”¨å‡½æ•°ï¼Œéšå¼ä¼ é€’ç»‘å®šå¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆè¿™å°±æ˜¯æˆ‘ä»¬å¦‚ä½•å°† self ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°è·å–ï¼Œå°½ç®¡æ²¡æœ‰æ˜¾å¼ä¼ é€’å®ƒï¼‰ã€‚</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">o1</span><span class="o">.</span><span class="n">method</span>
<span class="o">&lt;</span><span class="n">bound</span> <span class="n">method</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">method</span> <span class="n">of</span> <span class="o">&lt;</span><span class="n">__main__</span><span class="o">.</span><span class="n">SomeClass</span> <span class="nb">object</span> <span class="n">at</span> <span class="o">...&gt;&gt;</span>
</code></pre></div>
<ul>
<li>å¤šæ¬¡è®¿é—®è¯¥å±æ€§ï¼Œæ¯æ¬¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–¹æ³•å¯¹è±¡ï¼ å› æ­¤ï¼Œ<code>o1.method is o1.method</code> æ°¸è¿œä¸ä¼šæ˜¯çœŸçš„ã€‚ä½†æ˜¯ï¼Œå°†å‡½æ•°ä½œä¸ºç±»å±æ€§ï¼ˆè€Œä¸æ˜¯å®ä¾‹ï¼‰è®¿é—®å¹¶ä¸ä¼šåˆ›å»ºæ–¹æ³•å¯¹è±¡ï¼Œæ‰€ä»¥ <code>SomeClass.method is SomeClass.method</code> æ˜¯çœŸçš„ã€‚</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">method</span>
<span class="o">&lt;</span><span class="n">function</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">method</span> <span class="n">at</span> <span class="o">...&gt;</span>
</code></pre></div>
<ul>
<li><code>classmethod</code> å°†å‡½æ•°è½¬æ¢ä¸ºç±»æ–¹æ³•ã€‚ ç±»æ–¹æ³•æ˜¯æè¿°ç¬¦ï¼Œå½“è¢«è®¿é—®æ—¶ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªç»‘å®š<em>ç±»æœ¬èº«</em>çš„æ–¹æ³•å¯¹è±¡ï¼Œè€Œä¸æ˜¯å¯¹è±¡æœ¬èº«ã€‚</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">o1</span><span class="o">.</span><span class="n">classm</span>
<span class="o">&lt;</span><span class="n">bound</span> <span class="n">method</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">classm</span> <span class="n">of</span> <span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">__main__</span><span class="o">.</span><span class="n">SomeClass</span><span class="s1">&#39;&gt;&gt;</span>
</code></pre></div>
<ul>
<li>ä¸å‡½æ•°ä¸åŒï¼Œ<code>classmethod</code> åœ¨ä½œä¸ºç±»å±æ€§è®¿é—®æ—¶ä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªæ–¹æ³•ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒä»¬ç»‘å®šç±»ï¼Œè€Œä¸æ˜¯ç±»çš„ç±»å‹ï¼‰ã€‚ æ‰€ä»¥ <code>SomeClass.classm is SomeClass.classm</code> æ˜¯å‡çš„ã€‚</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">classm</span>
<span class="o">&lt;</span><span class="n">bound</span> <span class="n">method</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">classm</span> <span class="n">of</span> <span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">__main__</span><span class="o">.</span><span class="n">SomeClass</span><span class="s1">&#39;&gt;&gt;</span>
</code></pre></div>
<ul>
<li>å½“ä¸¤ä¸ªå‡½æ•°ç›¸ç­‰å¹¶ä¸”ç»‘å®šçš„å¯¹è±¡ç›¸åŒæ—¶ï¼Œæ–¹æ³•å¯¹è±¡æ¯”è¾ƒç›¸ç­‰ã€‚ æ‰€ä»¥<code>o1.method == o1.method</code> ä¸ºçœŸï¼Œå°½ç®¡å®ƒä»¬åœ¨å†…å­˜ä¸­æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ã€‚</li>
<li><code>staticmethod</code> å°†å‡½æ•°è½¬æ¢ä¸ºâ€œæ— æ“ä½œâ€æè¿°ç¬¦ï¼Œå®ƒæŒ‰åŸæ ·è¿”å›å‡½æ•°ã€‚æ²¡æœ‰æ–¹æ³•å¯¹è±¡è¢«åˆ›å»ºï¼Œæ‰€ä»¥ <code>is</code> çš„æ¯”è¾ƒè¿ç®—ä¸ºçœŸã€‚</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">o1</span><span class="o">.</span><span class="n">staticm</span>
<span class="o">&lt;</span><span class="n">function</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">staticm</span> <span class="n">at</span> <span class="o">...&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">staticm</span>
<span class="o">&lt;</span><span class="n">function</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">staticm</span> <span class="n">at</span> <span class="o">...&gt;</span>
</code></pre></div>
<ul>
<li>æ¯æ¬¡ Python è°ƒç”¨å®ä¾‹æ–¹æ³•æ—¶éƒ½å¿…é¡»åˆ›å»ºæ–°çš„â€œæ–¹æ³•â€å¯¹è±¡ï¼Œå¹¶ä¸”æ¯æ¬¡éƒ½å¿…é¡»ä¿®æ”¹å‚æ•°ä»¥æ’å…¥ <code>self</code> ä¸¥é‡å½±å“æ€§èƒ½ã€‚CPython 3.7 <a href="https://bugs.python.org/issue26110">è§£å†³äº†è¿™ä¸ªé—®é¢˜</a> ã€‚é€šè¿‡å¼•å…¥æ–°çš„æ“ä½œç æ¥å¤„ç†è°ƒç”¨æ–¹æ³•è€Œä¸åˆ›å»ºä¸´æ—¶æ–¹æ³•å¯¹è±¡ã€‚è¿™ä»…åœ¨å®é™…è°ƒç”¨è®¿é—®çš„å‡½æ•°æ—¶ä½¿ç”¨ï¼Œå› æ­¤è¿™é‡Œçš„ä»£ç ç‰‡æ®µä¸å—å½±å“ï¼Œä»ç„¶ä¼šç”Ÿæˆæ–¹æ³•:)</li>
</ul>
<hr />
<h3 id="all-true-ationtrueall">&gt; All-true-ation/è¿”å›Trueçš„allå‡½æ•° *</h3>
<!-- Example ID: dfe6d845-e452-48fe-a2da-0ed3869a8042 -->

<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">all</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">])</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">all</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">])</span>
<span class="kc">False</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">all</span><span class="p">([])</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">all</span><span class="p">([[]])</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">all</span><span class="p">([[[]]])</span>
<span class="kc">True</span>
</code></pre></div>
<p>ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§True-Falseçš„å˜åŒ–ï¼Ÿ</p>
<h4 id="_19">ğŸ’¡ è¯´æ˜</h4>
<ul>
<li>
<p><code>all</code> å‡½æ•°çš„å®ç°ç­‰ä»·äºï¼š</p>
</li>
<li>
<p><code>py
  def all(iterable):
      for element in iterable:
          if not element:
              return False
      return True</code></p>
</li>
<li>
<p><code>all([])</code> è¿”å› <code>True</code> å› ä¸ºå¯è¿­ä»£å¯¹è±¡ä¸ºç©ºã€‚ </p>
</li>
<li><code>all([[]])</code> è¿”å› <code>False</code> å› ä¸ºä¼ å…¥çš„æ•°ç»„æœ‰ä¸€ä¸ªå…ƒç´  <code>[]</code>ï¼Œ åœ¨Pythonä¸­ï¼Œç©ºåˆ—è¡¨ä¸ºå‡ã€‚</li>
<li><code>all([[[]]])</code> å’Œæ›´é«˜çš„é€’å½’å˜ä½“æ€»æ˜¯<code>True</code>ã€‚ è¿™æ˜¯å› ä¸ºä¼ é€’çš„æ•°ç»„çš„å•ä¸ªå…ƒç´ ï¼ˆ<code>[[...]]</code>ï¼‰ä¸å†æ˜¯ç©ºçš„ï¼Œè€Œæœ‰å€¼çš„åˆ—è¡¨ä¸ºçœŸã€‚</li>
</ul>
<hr />
<h3 id="the-surprising-comma">&gt; The surprising comma/æ„å¤–çš„é€—å·</h3>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,):</span>
<span class="o">...</span>     <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">5</span><span class="p">,):</span>
<span class="o">...</span>     <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">,):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">,):</span>
                     <span class="o">^</span>
<span class="ne">SyntaxError</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">syntax</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="k">def</span> <span class="nf">h</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,):</span>
                <span class="o">^</span>
<span class="ne">SyntaxError</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">syntax</span>
</code></pre></div></p>
<h4 id="_20">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>åœ¨Pythonå‡½æ•°çš„å½¢å¼å‚æ•°åˆ—è¡¨ä¸­, å°¾éšé€—å·å¹¶ä¸ä¸€å®šæ˜¯åˆæ³•çš„.</li>
<li>åœ¨Pythonä¸­, å‚æ•°åˆ—è¡¨éƒ¨åˆ†ç”¨å‰ç½®é€—å·å®šä¹‰, éƒ¨åˆ†ç”¨å°¾éšé€—å·å®šä¹‰. è¿™ç§å†²çªå¯¼è‡´é€—å·è¢«å¤¹åœ¨ä¸­é—´, æ²¡æœ‰è§„åˆ™å®šä¹‰å®ƒ.(è¯‘:è¿™ä¸€å¥çœ‹å¾—æˆ‘ä¹Ÿå¾ˆæ‡µé€¼,åªèƒ½å¼ºç¿»äº†.è¯¦ç»†è§£é‡Šçœ‹ä¸‹é¢çš„è®¨è®ºå¸–ä¼šä¸€ç›®äº†ç„¶.)</li>
<li><strong>æ³¨æ„:</strong> å°¾éšé€—å·çš„é—®é¢˜å·²ç»åœ¨Python 3.6ä¸­è¢«<a href="https://bugs.python.org/issue9232">ä¿®å¤</a>äº†. è€Œè¿™ç¯‡<a href="https://bugs.python.org/issue9232#msg248399">å¸–å­</a>ä¸­åˆ™ç®€è¦è®¨è®ºäº†Pythonä¸­å°¾éšé€—å·çš„ä¸åŒç”¨æ³•.</li>
</ul>
<hr />
<h3 id="strings-and-the-backslashes">&gt; Strings and the backslashes/å­—ç¬¦ä¸²ä¸åæ–œæ </h3>
<!-- Example ID: 6ae622c3-6d99-4041-9b33-507bd1a4407b --->

<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="s2">&quot;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">)</span>
\<span class="s2">&quot;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">)</span>
<span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">)</span>
              <span class="o">^</span>
<span class="ne">SyntaxError</span><span class="p">:</span> <span class="n">EOL</span> <span class="k">while</span> <span class="n">scanning</span> <span class="n">string</span> <span class="n">literal</span>

<span class="o">&gt;&gt;&gt;</span> <span class="sa">r</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&#39;&quot;</span>
<span class="kc">True</span>
</code></pre></div></p>
<h4 id="_21">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p>åœ¨ä¸€èˆ¬çš„pythonå­—ç¬¦ä¸²ä¸­ï¼Œåæ–œæ ç”¨äºè½¬ä¹‰å¯èƒ½å…·æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦ï¼ˆå¦‚å•å¼•å·ã€åŒå¼•å·å’Œåæ–œæ æœ¬èº«ï¼‰ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="s2">&quot;wt</span><span class="se">\&quot;</span><span class="s2">f&quot;</span>
<span class="s1">&#39;wt&quot;f&#39;</span>
</code></pre></div>
</li>
<li>
<p>åœ¨ä»¥ <code>r</code> å¼€å¤´çš„åŸå§‹å­—ç¬¦ä¸²ä¸­, åæ–œæ å¹¶æ²¡æœ‰ç‰¹æ®Šå«ä¹‰.
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="sa">r</span><span class="s1">&#39;wt\&quot;f&#39;</span> <span class="o">==</span> <span class="s1">&#39;wt</span><span class="se">\\</span><span class="s1">&quot;f&#39;</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;wt\&quot;f&#39;</span><span class="p">)</span>
<span class="s1">&#39;wt</span><span class="se">\\</span><span class="s1">&quot;f&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">n&quot;</span><span class="p">)</span>
<span class="s1">&#39;</span><span class="se">\\</span><span class="s1">n&#39;</span>
</code></pre></div></p>
</li>
<li>
<p>è¿™æ„å‘³ç€å½“è§£æå™¨åœ¨åŸå§‹å­—ç¬¦ä¸²ä¸­é‡åˆ°åæ–œæ æ—¶ï¼Œå®ƒæœŸæœ›åé¢æœ‰å¦ä¸€ä¸ªå­—ç¬¦ã€‚ åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼ˆ<code>print(r"\")</code>ï¼‰ï¼Œåæ–œæ è½¬ä¹‰äº†å°¾éšå¼•å·ï¼Œä½¿è§£æå™¨æ²¡æœ‰ç»ˆæ­¢å¼•å·ï¼ˆå› æ­¤äº§ç”Ÿäº†<code>SyntaxError</code>ï¼‰ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåæ–œæ åœ¨åŸå§‹å­—ç¬¦ä¸²æœ«å°¾ä¸èµ·ä½œç”¨çš„åŸå› ã€‚</p>
</li>
</ul>
<hr />
<h3 id="not-knot">&gt; not knot!/åˆ«çº ç»“!</h3>
<div class="highlight"><pre><span></span><code><span class="n">x</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">y</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="ow">not</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">==</span> <span class="ow">not</span> <span class="n">y</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;input&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="n">x</span> <span class="o">==</span> <span class="ow">not</span> <span class="n">y</span>
           <span class="o">^</span>
<span class="ne">SyntaxError</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">syntax</span>
</code></pre></div></p>
<h4 id="_22">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ä¼šå½±å“è¡¨è¾¾å¼çš„æ±‚å€¼é¡ºåº, è€Œåœ¨ Python ä¸­ <code>==</code> è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§è¦é«˜äº <code>not</code> è¿ç®—ç¬¦.</li>
<li>æ‰€ä»¥ <code>not x == y</code> ç›¸å½“äº <code>not (x == y)</code>, åŒæ—¶ç­‰ä»·äº <code>not (True == False)</code>, æœ€åçš„è¿ç®—ç»“æœå°±æ˜¯ <code>True</code>.</li>
<li>ä¹‹æ‰€ä»¥ <code>x == not y</code> ä¼šæŠ›ä¸€ä¸ª <code>SyntaxError</code> å¼‚å¸¸, æ˜¯å› ä¸ºå®ƒä¼šè¢«è®¤ä¸ºç­‰ä»·äº <code>(x == not) y</code>, è€Œä¸æ˜¯ä½ ä¸€å¼€å§‹æœŸæœ›çš„ <code>x == (not y)</code>.</li>
<li>è§£é‡Šå™¨æœŸæœ› <code>not</code> æ ‡è®°æ˜¯ <code>not in</code> æ“ä½œç¬¦çš„ä¸€éƒ¨åˆ† (å› ä¸º <code>==</code> å’Œ <code>not in</code> æ“ä½œç¬¦å…·æœ‰ç›¸åŒçš„ä¼˜å…ˆçº§), ä½†æ˜¯å®ƒåœ¨ <code>not</code> æ ‡è®°åé¢æ‰¾ä¸åˆ° <code>in</code> æ ‡è®°, æ‰€ä»¥ä¼šæŠ›å‡º <code>SyntaxError</code> å¼‚å¸¸.</li>
</ul>
<hr />
<h3 id="half-triple-quoted-strings">&gt; Half triple-quoted strings/ä¸‰ä¸ªå¼•å·</h3>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;wtfpython&#39;&#39;&#39;</span><span class="p">)</span>
<span class="n">wtfpython</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;wtfpython&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">wtfpython</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c1"># ä¸‹é¢çš„è¯­å¥ä¼šæŠ›å‡º `SyntaxError` å¼‚å¸¸</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c1"># print(&#39;&#39;&#39;wtfpython&#39;)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c1"># print(&quot;&quot;&quot;wtfpython&quot;)</span>
</code></pre></div></p>
<h4 id="_23">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>Python æä¾›éšå¼çš„<a href="https://docs.python.org/2/reference/lexical_analysis.html#string-literal-concatenation">å­—ç¬¦ä¸²è¿æ¥</a>, ä¾‹å¦‚,
  <div class="highlight"><pre><span></span><code>&gt;&gt;&gt; print(&quot;wtf&quot; &quot;python&quot;)
wtfpython
&gt;&gt;&gt; print(&quot;wtf&quot; &quot;&quot;) # or &quot;wtf&quot;&quot;&quot;
wtf
</code></pre></div></li>
<li><code>'''</code> å’Œ <code>"""</code> åœ¨ Pythonä¸­ä¹Ÿæ˜¯å­—ç¬¦ä¸²å®šç•Œç¬¦, Python è§£é‡Šå™¨åœ¨å…ˆé‡åˆ°ä¸‰ä¸ªå¼•å·çš„çš„æ—¶å€™ä¼šå°è¯•å†å¯»æ‰¾ä¸‰ä¸ªç»ˆæ­¢å¼•å·ä½œä¸ºå®šç•Œç¬¦, å¦‚æœä¸å­˜åœ¨åˆ™ä¼šå¯¼è‡´ <code>SyntaxError</code> å¼‚å¸¸.</li>
</ul>
<hr />
<h3 id="whats-wrong-with-booleans">&gt; What's wrong with booleans?/å¸ƒå°”ä½ å’‹äº†?</h3>
<p>1.
<div class="highlight"><pre><span></span><code><span class="c1"># ä¸€ä¸ªç®€å•çš„ä¾‹å­, ç»Ÿè®¡ä¸‹é¢å¯è¿­ä»£å¯¹è±¡ä¸­çš„å¸ƒå°”å‹å€¼çš„ä¸ªæ•°å’Œæ•´å‹å€¼çš„ä¸ªæ•°</span>
<span class="n">mixed_list</span> <span class="o">=</span> <span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s2">&quot;some_string&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="p">[],</span> <span class="kc">False</span><span class="p">]</span>
<span class="n">integers_found_so_far</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">booleans_found_so_far</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">mixed_list</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">integers_found_so_far</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="n">booleans_found_so_far</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">integers_found_so_far</span>
<span class="mi">4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">booleans_found_so_far</span>
<span class="mi">0</span>
</code></pre></div></p>
<p>2.
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s2">&quot;wtf&quot;</span> <span class="o">*</span> <span class="n">some_bool</span>
<span class="s1">&#39;wtf&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s2">&quot;wtf&quot;</span> <span class="o">*</span> <span class="n">some_bool</span>
<span class="s1">&#39;&#39;</span>
</code></pre></div></p>
<p>3.
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">tell_truth</span><span class="p">():</span>
    <span class="kc">True</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="kc">True</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I have lost faith in truth!&quot;</span><span class="p">)</span>
</code></pre></div></p>
<p><strong>Output (&lt; 3.x):</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">tell_truth</span><span class="p">()</span>
<span class="n">I</span> <span class="n">have</span> <span class="n">lost</span> <span class="n">faith</span> <span class="ow">in</span> <span class="n">truth</span><span class="err">!</span>
</code></pre></div>
<h4 id="_24">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p>å¸ƒå°”å€¼æ˜¯ <code>int</code> çš„å­ç±»
    <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">issubclass</span><span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">issubclass</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span>
<span class="kc">False</span>
</code></pre></div></p>
</li>
<li>
<p>å› æ­¤ï¼Œ<code>True</code> å’Œ <code>False</code> æ˜¯ <code>int</code> çš„å®ä¾‹
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="kc">True</span>
</code></pre></div></p>
</li>
<li>
<p><code>True</code> çš„æ•´æ•°å€¼æ˜¯ <code>1</code>, è€Œ <code>False</code> çš„æ•´æ•°å€¼æ˜¯ <code>0</code></p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">int</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">int</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="mi">0</span>
</code></pre></div>
<ul>
<li>
<p>å…³äºå…¶èƒŒåçš„åŸç†, è¯·çœ‹è¿™ä¸ª StackOverflow çš„<a href="https://stackoverflow.com/a/8169049/4354153">å›ç­”</a>.</p>
</li>
<li>
<p>æœ€åˆï¼ŒPython æ²¡æœ‰ <code>bool</code> ç±»å‹ï¼ˆäººä»¬ä½¿ç”¨ 0 è¡¨ç¤ºå‡ï¼Œä½¿ç”¨éé›¶å€¼ï¼Œå¦‚ 1 è¡¨ç¤ºçœŸï¼‰ã€‚<code>True</code>ã€<code>False</code> å’Œ <code>bool</code> ç±»å‹åœ¨ 2.x ç‰ˆæœ¬ä¸­è¢«æ·»åŠ ï¼Œä½†ä¸ºäº†å‘åå…¼å®¹ï¼Œ<code>True</code> å’Œ <code>False</code> ä¸èƒ½æˆä¸ºå¸¸é‡ã€‚å®ƒä»¬åªæ˜¯å†…ç½®å˜é‡ï¼Œå¯ä»¥é‡æ–°åˆ†é…å®ƒä»¬</p>
</li>
<li>
<p>Python 3 å‘åä¸å…¼å®¹ï¼Œé—®é¢˜ç»ˆäºå¾—åˆ°è§£å†³ï¼Œå› æ­¤æœ€åä¸€ä¸ªä»£ç æ®µä¸é€‚ç”¨äº Python 3.xï¼</p>
</li>
</ul>
<hr />
<h3 id="class-attributes-and-instance-attributes">&gt; Class attributes and instance attributes/ç±»å±æ€§å’Œå®ä¾‹å±æ€§</h3>
<p>1.
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">A</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">B</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">C</span><span class="o">.</span><span class="n">x</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">B</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">A</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">B</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">C</span><span class="o">.</span><span class="n">x</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">A</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">A</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">B</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">C</span><span class="o">.</span><span class="n">x</span>
<span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">A</span><span class="o">.</span><span class="n">x</span>
<span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">A</span><span class="o">.</span><span class="n">x</span>
<span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</code></pre></div></p>
<p>2.
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SomeClass</span><span class="p">:</span>
    <span class="n">some_var</span> <span class="o">=</span> <span class="mi">15</span>
    <span class="n">some_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">another_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">some_var</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">some_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">some_list</span> <span class="o">+</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">another_list</span> <span class="o">+=</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span>
</code></pre></div></p>
<p><strong>Output:</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_obj</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">(</span><span class="mi">420</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_obj</span><span class="o">.</span><span class="n">some_list</span>
<span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">420</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_obj</span><span class="o">.</span><span class="n">another_list</span>
<span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">420</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_obj</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_obj</span><span class="o">.</span><span class="n">some_list</span>
<span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">111</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_obj</span><span class="o">.</span><span class="n">another_list</span>
<span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">420</span><span class="p">,</span> <span class="mi">111</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_obj</span><span class="o">.</span><span class="n">another_list</span> <span class="ow">is</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">another_list</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_obj</span><span class="o">.</span><span class="n">another_list</span> <span class="ow">is</span> <span class="n">some_obj</span><span class="o">.</span><span class="n">another_list</span>
<span class="kc">True</span>
</code></pre></div>
<h4 id="_25">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>ç±»å˜é‡å’Œå®ä¾‹å˜é‡åœ¨å†…éƒ¨æ˜¯é€šè¿‡ç±»å¯¹è±¡çš„å­—å…¸æ¥å¤„ç†(è¯‘: å°±æ˜¯ <code>__dict__</code> å±æ€§). å¦‚æœåœ¨å½“å‰ç±»çš„å­—å…¸ä¸­æ‰¾ä¸åˆ°çš„è¯å°±å»å®ƒçš„çˆ¶ç±»ä¸­å¯»æ‰¾.</li>
<li><code>+=</code> è¿ç®—ç¬¦ä¼šåœ¨åŸåœ°ä¿®æ”¹å¯å˜å¯¹è±¡, è€Œä¸æ˜¯åˆ›å»ºæ–°å¯¹è±¡. å› æ­¤, åœ¨è¿™ç§æƒ…å†µä¸‹, ä¿®æ”¹ä¸€ä¸ªå®ä¾‹çš„å±æ€§ä¼šå½±å“å…¶ä»–å®ä¾‹å’Œç±»å±æ€§.</li>
</ul>
<hr />
<h3 id="yielding-none-none">&gt; yielding None/ç”Ÿæˆ None</h3>
<div class="highlight"><pre><span></span><code><span class="n">some_iterable</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">some_func</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;something&quot;</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">some_iterable</span><span class="p">]</span>
<span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[(</span><span class="k">yield</span> <span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">some_iterable</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">generator</span> <span class="nb">object</span> <span class="o">&lt;</span><span class="n">listcomp</span><span class="o">&gt;</span> <span class="n">at</span> <span class="mh">0x7f70b0a4ad58</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">([(</span><span class="k">yield</span> <span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">some_iterable</span><span class="p">])</span>
<span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">((</span><span class="k">yield</span> <span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">some_iterable</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">some_func</span><span class="p">((</span><span class="k">yield</span> <span class="n">x</span><span class="p">))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">some_iterable</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;something&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;something&#39;</span><span class="p">]</span>
</code></pre></div></p>
<h4 id="_26">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>æ¥æºå’Œè§£é‡Šå¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°: https://stackoverflow.com/questions/32139885/yield-in-list-comprehensions-and-generator-expressions</li>
<li>ç›¸å…³é”™è¯¯æŠ¥å‘Š: http://bugs.python.org/issue10544</li>
<li>è¿™ä¸ªbugåœ¨3.7ä»¥åçš„ç‰ˆæœ¬ä¸­ä¸è¢«æ¨èä½¿ç”¨, å¹¶åœ¨3.8ä¸­è¢«ä¿®å¤. å› æ­¤åœ¨3.8ä¸­å°è¯•åœ¨æ¨å¯¼å¼ä¸­ä½¿ç”¨ yield, åªä¼šå¾—åˆ°ä¸€ä¸ª SyntaxError. è¯¦ç»†å†…å®¹å¯ä»¥çœ‹<a href="https://docs.python.org/dev/whatsnew/3.7.html#deprecated-python-behavior">3.7æ›´æ–°å†…å®¹</a>, <a href="https://docs.python.org/dev/whatsnew/3.8.html#changes-in-python-behavior">3.8æ›´æ–°å†…å®¹</a>.</li>
</ul>
<hr />
<h3 id="yielding-from-returnreturn">&gt; Yielding from... return!/ç”Ÿæˆå™¨é‡Œçš„return *</h3>
<!-- Example ID: 5626d8ef-8802-49c2-adbc-7cda5c550816 --->
<p>1.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">some_func</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;wtf&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">yield from</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></div>
<p><strong>Output (&gt; 3.3):</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">some_func</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="p">[]</span>
</code></pre></div>
<p><code>"wtf"</code> å»å“ªå„¿äº†ï¼Ÿæ˜¯å› ä¸º<code>yield from</code>çš„ä¸€äº›ç‰¹æ®Šæ•ˆæœå—ï¼Ÿè®©æˆ‘ä»¬éªŒè¯ä¸€ä¸‹</p>
<p>2.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">some_func</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;wtf&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
          <span class="k">yield</span> <span class="n">i</span>
</code></pre></div>
<p><strong>Output:</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">some_func</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="p">[]</span>
</code></pre></div>
<p>åŒæ ·çš„ç»“æœï¼Œè¿™é‡Œä¹Ÿä¸èµ·ä½œç”¨ã€‚</p>
<h4 id="_27">ğŸ’¡ è¯´æ˜</h4>
<ul>
<li>ä» Python 3.3 å¼€å§‹ï¼Œå¯ä»¥åœ¨ç”Ÿæˆå™¨ä¸­ä½¿ç”¨å¸¦æœ‰å€¼çš„ <code>return</code> è¯­å¥ï¼ˆå‚è§ <a href="https://www.python.org/dev/peps/pep-0380/">PEP380</a>ï¼‰ã€‚ <a href="https://www.python.org/dev/peps/pep-0380/#enhancements-to-stopiteration">å®˜æ–¹æ–‡æ¡£</a> æè¿°ï¼Œ</li>
</ul>
<blockquote>
<p>"... ç”Ÿæˆå™¨ä¸­çš„ <code>return expr</code> ä¼šå¯¼è‡´åœ¨é€€å‡ºç”Ÿæˆå™¨æ—¶å¼•å‘ <code>StopIteration(expr)</code>ã€‚"</p>
</blockquote>
<ul>
<li>
<p>åœ¨ <code>some_func(3)</code> ä¾‹å­ä¸­ï¼Œ<code>return</code> è¯­å¥åœ¨å¼€å§‹å°±å¼•å‘äº†<code>StopIteration</code>ã€‚ <code>StopIteration</code> å¼‚å¸¸ä¼šåœ¨<code>list(...)</code> åŒ…è£…å™¨å’Œ<code>for</code> å¾ªç¯ä¸­è‡ªåŠ¨æ•è·ã€‚ å› æ­¤ï¼Œä»¥ä¸Šä¸¤ä¸ªç‰‡æ®µéƒ½äº§ç”Ÿçš„æ˜¯ä¸€ä¸ªç©ºåˆ—è¡¨ã€‚</p>
</li>
<li>
<p>è¦ä»ç”Ÿæˆå™¨ <code>some_func</code> ä¸­è·å– <code>["wtf"]</code>ï¼Œæˆ‘ä»¬éœ€è¦æ•è· <code>StopIteration</code> å¼‚å¸¸ï¼Œ</p>
<div class="highlight"><pre><span></span><code><span class="k">try</span><span class="p">:</span>
    <span class="nb">next</span><span class="p">(</span><span class="n">some_func</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="k">except</span> <span class="ne">StopIteration</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">some_string</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">value</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_string</span>
<span class="p">[</span><span class="s2">&quot;wtf&quot;</span><span class="p">]</span>
</code></pre></div>
</li>
</ul>
<hr />
<h3 id="nan-reflexivitynan">&gt; Nan-reflexivity/Nançš„è‡ªåæ€§</h3>
<!-- Example ID: 59bee91a-36e0-47a4-8c7d-aa89bf1d3976 --->

<p>1.
<div class="highlight"><pre><span></span><code><span class="n">a</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;nan&#39;</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;-iNf&#39;</span><span class="p">)</span>  <span class="c1"># è¿™äº›å­—ç¬¦ä¸²ä¸åŒºåˆ†å¤§å°å†™</span>
<span class="n">d</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;nan&#39;</span><span class="p">)</span>
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="n">inf</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span>
<span class="n">nan</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span>
<span class="o">-</span><span class="n">inf</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;some_other_string&#39;</span><span class="p">)</span>
<span class="ne">ValueError</span><span class="p">:</span> <span class="n">could</span> <span class="ow">not</span> <span class="n">convert</span> <span class="n">string</span> <span class="n">to</span> <span class="nb">float</span><span class="p">:</span> <span class="n">some_other_string</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">==</span> <span class="o">-</span><span class="n">c</span> <span class="c1">#inf==inf</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kc">None</span> <span class="o">==</span> <span class="kc">None</span> <span class="c1"># None==None</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">==</span> <span class="n">d</span> <span class="c1">#ä½†æ˜¯ nan!=nan</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">50</span><span class="o">/</span><span class="n">a</span>
<span class="mf">0.0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">/</span><span class="n">a</span>
<span class="n">nan</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">23</span> <span class="o">+</span> <span class="n">b</span>
<span class="n">nan</span>
</code></pre></div></p>
<p>2.</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;nan&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="n">x</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="ow">is</span> <span class="n">y</span> <span class="c1"># åŒä¸€æ€§(identity)å…·å¤‡</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="o">==</span> <span class="n">y</span> <span class="c1"># yä¸å…·å¤‡ç›¸ç­‰æ€§(equality)</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="c1"># ä½†åŒ…å«yçš„åˆ—è¡¨éªŒè¯ç›¸ç­‰æ€§(equality)æˆåŠŸäº†</span>
<span class="kc">True</span>
</code></pre></div>
<h4 id="_28">ğŸ’¡ è¯´æ˜:</h4>
<p><code>'inf'</code> å’Œ <code>'nan'</code> æ˜¯ç‰¹æ®Šçš„å­—ç¬¦ä¸²(ä¸åŒºåˆ†å¤§å°å†™), å½“æ˜¾ç¤ºè½¬æ¢æˆ <code>float</code> å‹æ—¶, å®ƒä»¬åˆ†åˆ«ç”¨äºè¡¨ç¤ºæ•°å­¦æ„ä¹‰ä¸Šçš„ "æ— ç©·å¤§" å’Œ "éæ•°å­—".
- ç”±äºæ ¹æ® IEEE æ ‡å‡† <code>NaN != NaN</code>ï¼Œéµå®ˆæ­¤è§„åˆ™æ‰“ç ´äº† Python ä¸­é›†åˆå…ƒç´ çš„è‡ªåæ€§å‡è®¾ï¼Œå³å¦‚æœ <code>x</code> æ˜¯ <code>list</code> ç­‰é›†åˆçš„ä¸€éƒ¨åˆ†ï¼Œåˆ™æ¯”è¾ƒç­‰è¿ç®—çš„å®ç°åŸºäºå‡è®¾<code>x == x</code>ã€‚ç”±äºè¿™ä¸ªå‡è®¾ï¼Œåœ¨æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ æ—¶é¦–å…ˆæ¯”è¾ƒèº«ä»½<code>identity</code>ï¼ˆå› ä¸ºå®ƒæ›´å¿«ï¼‰ï¼Œå¹¶ä¸”ä»…åœ¨èº«ä»½ä¸åŒ¹é…æ—¶æ‰æ¯”è¾ƒå€¼ã€‚ä»¥ä¸‹ç‰‡æ®µå°†æ›´æ¸…æ¥šåœ°è¯´æ˜ï¼Œ</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;nan&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">==</span> <span class="n">x</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span>
<span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;nan&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="o">==</span> <span class="n">y</span><span class="p">,</span> <span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="n">y</span><span class="p">]</span>
<span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="n">y</span><span class="p">]</span>
<span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</code></pre></div>
<p>ç”±äº <code>x</code> å’Œ <code>y</code> çš„èº«ä»½<code>identity</code>ä¸åŒï¼Œæ‰€ä»¥è€ƒè™‘çš„å€¼ä¹Ÿä¸åŒï¼› å› æ­¤è¿™æ¬¡æ¯”è¾ƒè¿”å›â€œFalseâ€ã€‚</p>
<ul>
<li>æ„Ÿå…´è¶£å¯ä»¥é˜…è¯» <a href="https://bertrandmeyer.com/2010/02/06/reflexivity-and-other-pillars-of-civilization/">Reflexivity, and other pillars of civilization</a></li>
</ul>
<hr />
<h3 id="mutating-the-immutable">&gt; Mutating the immutable!/å¼ºäººæ‰€éš¾</h3>
<div class="highlight"><pre><span></span><code><span class="n">some_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;tuple&quot;</span><span class="p">,</span> <span class="s2">&quot;with&quot;</span><span class="p">,</span> <span class="s2">&quot;values&quot;</span><span class="p">)</span>
<span class="n">another_tuple</span> <span class="o">=</span> <span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_tuple</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;change this&quot;</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="s1">&#39;tuple&#39;</span> <span class="nb">object</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">support</span> <span class="n">item</span> <span class="n">assignment</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_tuple</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span> <span class="c1"># è¿™é‡Œä¸å‡ºç°é”™è¯¯</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_tuple</span>
<span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1000</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_tuple</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">99</span><span class="p">,</span> <span class="mi">999</span><span class="p">]</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="s1">&#39;tuple&#39;</span> <span class="nb">object</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">support</span> <span class="n">item</span> <span class="n">assignment</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_tuple</span>
<span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">999</span><span class="p">])</span>
</code></pre></div></p>
<p>æˆ‘è¿˜ä»¥ä¸ºå…ƒç»„æ˜¯ä¸å¯å˜çš„å‘¢...</p>
<h4 id="_29">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p>å¼•ç”¨ https://docs.python.org/2/reference/datamodel.html</p>
<blockquote>
<p>ä¸å¯å˜åºåˆ—
    ä¸å¯å˜åºåˆ—çš„å¯¹è±¡ä¸€æ—¦åˆ›å»ºå°±ä¸èƒ½å†æ”¹å˜. (å¦‚æœå¯¹è±¡åŒ…å«å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ï¼Œåˆ™è¿™äº›å…¶ä»–å¯¹è±¡å¯èƒ½æ˜¯å¯å˜çš„å¹¶ä¸”å¯èƒ½ä¼šè¢«ä¿®æ”¹; ä½†æ˜¯ï¼Œç”±ä¸å¯å˜å¯¹è±¡ç›´æ¥å¼•ç”¨çš„å¯¹è±¡é›†åˆä¸èƒ½æ›´æ”¹.)</p>
</blockquote>
</li>
<li>
<p><code>+=</code> æ“ä½œç¬¦åœ¨åŸåœ°ä¿®æ”¹äº†åˆ—è¡¨. å…ƒç´ èµ‹å€¼æ“ä½œå¹¶ä¸å·¥ä½œ, ä½†æ˜¯å½“å¼‚å¸¸æŠ›å‡ºæ—¶, å…ƒç´ å·²ç»åœ¨åŸåœ°è¢«ä¿®æ”¹äº†.</p>
</li>
</ul>
<p>(è¯‘: å¯¹äºä¸å¯å˜å¯¹è±¡, è¿™é‡ŒæŒ‡tuple, <code>+=</code> å¹¶ä¸æ˜¯åŸå­æ“ä½œ, è€Œæ˜¯ <code>extend</code> å’Œ <code>=</code> ä¸¤ä¸ªåŠ¨ä½œ, è¿™é‡Œ <code>=</code> æ“ä½œè™½ç„¶ä¼šæŠ›å‡ºå¼‚å¸¸, ä½† <code>extend</code> æ“ä½œå·²ç»ä¿®æ”¹æˆåŠŸäº†. è¯¦ç»†è§£é‡Šå¯ä»¥çœ‹<a href="https://segmentfault.com/a/1190000010767068">è¿™é‡Œ</a>)</p>
<hr />
<h3 id="the-disappearing-variable-from-outer-scope">&gt; The disappearing variable from outer scope/æ¶ˆå¤±çš„å¤–éƒ¨å˜é‡</h3>
<div class="highlight"><pre><span></span><code><span class="n">e</span> <span class="o">=</span> <span class="mi">7</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">pass</span>
</code></pre></div>
<p><strong>Output (Python 2.x):</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="c1"># prints nothing</span>
</code></pre></div></p>
<p><strong>Output (Python 3.x):</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="ne">NameError</span><span class="p">:</span> <span class="n">name</span> <span class="s1">&#39;e&#39;</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">defined</span>
</code></pre></div></p>
<h4 id="_30">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>å‡ºå¤„: https://docs.python.org/3/reference/compound_stmts.html#except</li>
</ul>
<p>å½“ä½¿ç”¨ <code>as</code> ä¸ºç›®æ ‡åˆ†é…å¼‚å¸¸çš„æ—¶å€™, å°†åœ¨exceptå­å¥çš„æœ«å°¾æ¸…é™¤è¯¥å¼‚å¸¸.</p>
<p>è¿™å°±å¥½åƒ</p>
<div class="highlight"><pre><span></span><code><span class="k">except</span> <span class="n">E</span> <span class="k">as</span> <span class="n">N</span><span class="p">:</span>
    <span class="n">foo</span>
</code></pre></div>
<p>ä¼šè¢«ç¿»è¯‘æˆ</p>
<div class="highlight"><pre><span></span><code><span class="k">except</span> <span class="n">E</span> <span class="k">as</span> <span class="n">N</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">foo</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">del</span> <span class="n">N</span>
</code></pre></div>
<p>è¿™æ„å‘³ç€å¼‚å¸¸å¿…é¡»åœ¨è¢«èµ‹å€¼ç»™å…¶ä»–å˜é‡æ‰èƒ½åœ¨ <code>except</code> å­å¥ä¹‹åå¼•ç”¨å®ƒ. è€Œå¼‚å¸¸ä¹‹æ‰€ä»¥ä¼šè¢«æ¸…é™¤, åˆ™æ˜¯ç”±äºä¸Šé¢é™„åŠ çš„å›æº¯ä¿¡æ¯(trackback)ä¼šå’Œæ ˆå¸§(stack frame)å½¢æˆå¾ªç¯å¼•ç”¨, ä½¿å¾—è¯¥æ ˆå¸§ä¸­çš„æ‰€æœ‰æœ¬åœ°å˜é‡åœ¨ä¸‹ä¸€æ¬¡åƒåœ¾å›æ”¶å‘ç”Ÿä¹‹å‰éƒ½å¤„äºæ´»åŠ¨çŠ¶æ€.(è¯‘: ä¹Ÿå°±æ˜¯è¯´ä¸ä¼šè¢«å›æ”¶)</p>
<ul>
<li>
<p>å­å¥åœ¨ Python ä¸­å¹¶æ²¡æœ‰ç‹¬ç«‹çš„ä½œç”¨åŸŸ. ç¤ºä¾‹ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½å¤„äºåŒä¸€ä½œç”¨åŸŸå†…, æ‰€ä»¥å˜é‡ <code>e</code> ä¼šç”±äºæ‰§è¡Œäº† <code>except</code> å­å¥è€Œè¢«åˆ é™¤. è€Œå¯¹äºæœ‰ç‹¬ç«‹çš„å†…éƒ¨ä½œç”¨åŸŸçš„å‡½æ•°æ¥è¯´æƒ…å†µå°±ä¸ä¸€æ ·äº†. ä¸‹é¢çš„ä¾‹å­è¯´æ˜äº†è¿™ä¸€ç‚¹:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">del</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</code></pre></div>
<p><strong>Output:</strong>
 <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="ne">UnboundLocalError</span><span class="p">:</span> <span class="n">local</span> <span class="n">variable</span> <span class="s1">&#39;x&#39;</span> <span class="n">referenced</span> <span class="n">before</span> <span class="n">assignment</span>
<span class="o">&gt;&gt;&gt;</span><span class="n">f</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="ne">UnboundLocalError</span><span class="p">:</span> <span class="n">local</span> <span class="n">variable</span> <span class="s1">&#39;x&#39;</span> <span class="n">referenced</span> <span class="n">before</span> <span class="n">assignment</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span>
<span class="mi">5</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span>
<span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</code></pre></div></p>
</li>
<li>
<p>åœ¨ Python 2.x ä¸­, <code>Exception()</code> å®ä¾‹è¢«èµ‹å€¼ç»™äº†å˜é‡ <code>e</code>, æ‰€ä»¥å½“ä½ å°è¯•æ‰“å°ç»“æœçš„æ—¶å€™, å®ƒçš„è¾“å‡ºä¸ºç©º.ï¼ˆè¯‘: æ­£å¸¸çš„Exceptionå®ä¾‹æ‰“å°å‡ºæ¥å°±æ˜¯ç©ºï¼‰</p>
<p><strong>Output (Python 2.x):</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">e</span>
<span class="ne">Exception</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span> <span class="n">e</span>
<span class="c1"># æ²¡æœ‰æ‰“å°ä»»ä½•å†…å®¹!</span>
</code></pre></div></p>
</li>
</ul>
<hr />
<h3 id="the-mysterious-key-type-conversion">&gt; The mysterious key type conversion/ç¥ç§˜çš„é”®å‹è½¬æ¢ *</h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SomeClass</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">some_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;s&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">}</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">some_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">str</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">(</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="mi">40</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span> <span class="c1"># é¢„æœŸ: ä¸¤ä¸ªä¸åŒçš„é”®å€¼å¯¹</span>
<span class="p">{</span><span class="s1">&#39;s&#39;</span><span class="p">:</span> <span class="mi">40</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">some_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">str</span>
</code></pre></div></p>
<h4 id="_31">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>ç”±äº <code>SomeClass</code> ä¼šä» <code>str</code> è‡ªåŠ¨ç»§æ‰¿ <code>__hash__</code> æ–¹æ³•, æ‰€ä»¥ <code>s</code> å¯¹è±¡å’Œ <code>"s"</code> å­—ç¬¦ä¸²çš„å“ˆå¸Œå€¼æ˜¯ç›¸åŒçš„.</li>
<li>è€Œ <code>SomeClass("s") == "s"</code> ä¸º <code>True</code> æ˜¯å› ä¸º <code>SomeClass</code> ä¹Ÿç»§æ‰¿äº† <code>str</code> ç±» <code>__eq__</code> æ–¹æ³•.</li>
<li>ç”±äºä¸¤è€…çš„å“ˆå¸Œå€¼ç›¸åŒä¸”ç›¸ç­‰, æ‰€ä»¥å®ƒä»¬åœ¨å­—å…¸ä¸­è¡¨ç¤ºç›¸åŒçš„é”®.</li>
<li>å¦‚æœæƒ³è¦å®ç°æœŸæœ›çš„åŠŸèƒ½, æˆ‘ä»¬å¯ä»¥é‡å®šä¹‰ <code>SomeClass</code> çš„ <code>__eq__</code> æ–¹æ³•.
  <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SomeClass</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
      <span class="k">return</span> <span class="p">(</span>
          <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="ow">is</span> <span class="n">SomeClass</span>
          <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">is</span> <span class="n">SomeClass</span>
          <span class="ow">and</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
      <span class="p">)</span>

  <span class="c1"># å½“æˆ‘ä»¬è‡ªå®šä¹‰ __eq__ æ–¹æ³•æ—¶, Python ä¸ä¼šå†è‡ªåŠ¨ç»§æ‰¿ __hash__ æ–¹æ³•</span>
  <span class="c1"># æ‰€ä»¥æˆ‘ä»¬ä¹Ÿéœ€è¦å®šä¹‰å®ƒ</span>
  <span class="fm">__hash__</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="fm">__hash__</span>

<span class="n">some_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;s&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">}</span>
</code></pre></div></li>
</ul>
<p><strong>Output:</strong>
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">(</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="mi">40</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span>
<span class="p">{</span><span class="s1">&#39;s&#39;</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">some_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">type</span><span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">type</span><span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="p">(</span><span class="n">__main__</span><span class="o">.</span><span class="n">SomeClass</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
</code></pre></div></p>
<hr />
<h3 id="lets-see-if-you-can-guess-this">&gt; Let's see if you can guess this?/çœ‹çœ‹ä½ èƒ½å¦çŒœåˆ°è¿™ä¸€ç‚¹?</h3>
<div class="highlight"><pre><span></span><code><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span> <span class="mi">5</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="p">{</span><span class="mi">5</span><span class="p">:</span> <span class="p">({</span><span class="o">...</span><span class="p">},</span> <span class="mi">5</span><span class="p">)}</span>
</code></pre></div></p>
<h4 id="_32">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>æ ¹æ® <a href="https://docs.python.org/2/reference/simple_stmts.html#assignment-statements">Python è¯­è¨€å‚è€ƒ</a>, èµ‹å€¼è¯­å¥çš„å½¢å¼å¦‚ä¸‹
  <div class="highlight"><pre><span></span><code>(target_list &quot;=&quot;)+ (expression_list | yield_expression)
</code></pre></div></li>
</ul>
<blockquote>
<p>èµ‹å€¼è¯­å¥è®¡ç®—è¡¨è¾¾å¼åˆ—è¡¨(expression list)(ç‰¢è®° è¿™å¯ä»¥æ˜¯å•ä¸ªè¡¨è¾¾å¼æˆ–ä»¥é€—å·åˆ†éš”çš„åˆ—è¡¨, åè€…è¿”å›å…ƒç»„)å¹¶å°†å•ä¸ªç»“æœå¯¹è±¡ä»å·¦åˆ°å³åˆ†é…ç»™ç›®æ ‡åˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹.</p>
</blockquote>
<ul>
<li>
<p><code>(target_list "=")+</code> ä¸­çš„ <code>+</code> æ„å‘³ç€å¯ä»¥æœ‰<strong>ä¸€ä¸ªæˆ–å¤šä¸ª</strong>ç›®æ ‡åˆ—è¡¨. åœ¨è¿™ä¸ªä¾‹å­ä¸­, ç›®æ ‡åˆ—è¡¨æ˜¯ <code>a, b</code> å’Œ <code>a[b]</code> (æ³¨æ„è¡¨è¾¾å¼åˆ—è¡¨åªèƒ½æœ‰ä¸€ä¸ª, åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯ <code>{}, 5</code>).</p>
</li>
<li>
<p>è¡¨è¾¾å¼åˆ—è¡¨è®¡ç®—ç»“æŸå, å°†å…¶å€¼è‡ªåŠ¨è§£åŒ…å<strong>ä»å·¦åˆ°å³</strong>åˆ†é…ç»™ç›®æ ‡åˆ—è¡¨(target list). å› æ­¤, åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­, é¦–å…ˆå°† <code>{}, 5</code> å…ƒç»„å¹¶èµ‹å€¼ç»™ <code>a, b</code>, ç„¶åæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ° <code>a = {}</code> ä¸” <code>b = 5</code>.</p>
</li>
<li>
<p><code>a</code> è¢«èµ‹å€¼çš„ <code>{}</code> æ˜¯å¯å˜å¯¹è±¡.</p>
</li>
<li>
<p>ç¬¬äºŒä¸ªç›®æ ‡åˆ—è¡¨æ˜¯ <code>a[b]</code> (ä½ å¯èƒ½è§‰å¾—è¿™é‡Œä¼šæŠ¥é”™, å› ä¸ºåœ¨ä¹‹å‰çš„è¯­å¥ä¸­ <code>a</code> å’Œ <code>b</code> éƒ½è¿˜æ²¡æœ‰è¢«å®šä¹‰. ä½†æ˜¯åˆ«å¿˜äº†, æˆ‘ä»¬åˆšåˆšå°† <code>a</code> èµ‹å€¼ <code>{}</code> ä¸”å°† <code>b</code> èµ‹å€¼ä¸º <code>5</code>).</p>
</li>
<li>
<p>ç°åœ¨, æˆ‘ä»¬å°†é€šè¿‡å°†å­—å…¸ä¸­é”® <code>5</code> çš„å€¼è®¾ç½®ä¸ºå…ƒç»„ <code>({}, 5)</code> æ¥åˆ›å»ºå¾ªç¯å¼•ç”¨ (è¾“å‡ºä¸­çš„ <code>{...}</code> æŒ‡ä¸ <code>a</code> å¼•ç”¨äº†ç›¸åŒçš„å¯¹è±¡). ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´ç®€å•çš„å¾ªç¯å¼•ç”¨çš„ä¾‹å­
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_list</span> <span class="o">=</span> <span class="n">some_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_list</span>
<span class="p">[[</span><span class="o">...</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[[</span><span class="o">...</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_list</span> <span class="ow">is</span> <span class="n">some_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">some_list</span>
<span class="kc">True</span>
</code></pre></div>
  æˆ‘ä»¬çš„ä¾‹å­å°±æ˜¯è¿™ç§æƒ…å†µ (<code>a[b][0]</code> ä¸ <code>a</code> æ˜¯ç›¸åŒçš„å¯¹è±¡)</p>
</li>
<li>
<p>æ€»ç»“ä¸€ä¸‹, ä½ ä¹Ÿå¯ä»¥æŠŠä¾‹å­æ‹†æˆ
  <div class="highlight"><pre><span></span><code><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="p">{},</span> <span class="mi">5</span>
<span class="n">a</span><span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
</code></pre></div>
  å¹¶ä¸”å¯ä»¥é€šè¿‡ <code>a[b][0]</code> ä¸ <code>a</code> æ˜¯ç›¸åŒçš„å¯¹è±¡æ¥è¯æ˜æ˜¯å¾ªç¯å¼•ç”¨
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">[</span><span class="n">b</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="n">a</span>
<span class="kc">True</span>
</code></pre></div></p>
</li>
</ul>
<hr />
<h3 id="exceeds-the-limit-for-integer-string-conversion">&gt; Exceeds the limit for integer string conversion/æ•´å‹è½¬å­—ç¬¦ä¸²è¶Šç•Œ</h3>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="c1"># Python 3.10.6</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2&quot;</span> <span class="o">*</span> <span class="mi">5432</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="c1"># Python 3.10.8</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">int</span><span class="p">(</span><span class="s2">&quot;2&quot;</span> <span class="o">*</span> <span class="mi">5432</span><span class="p">)</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="c1"># Python 3.10.6</span>
<span class="mf">222222222222222222222222222222222222222222222222222222222222222.</span><span class="o">..</span>

<span class="o">&gt;&gt;&gt;</span> <span class="c1"># Python 3.10.8</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
   <span class="o">...</span>
<span class="ne">ValueError</span><span class="p">:</span> <span class="n">Exceeds</span> <span class="n">the</span> <span class="n">limit</span> <span class="p">(</span><span class="mi">4300</span><span class="p">)</span> <span class="k">for</span> <span class="n">integer</span> <span class="n">string</span> <span class="n">conversion</span><span class="p">:</span>
   <span class="n">value</span> <span class="n">has</span> <span class="mi">5432</span> <span class="n">digits</span><span class="p">;</span> <span class="n">use</span> <span class="n">sys</span><span class="o">.</span><span class="n">set_int_max_str_digits</span><span class="p">()</span>
   <span class="n">to</span> <span class="n">increase</span> <span class="n">the</span> <span class="n">limit</span><span class="o">.</span>
</code></pre></div></p>
<h4 id="_33">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>å¯¹<code>int()</code>çš„è°ƒç”¨åœ¨Python 3.10.6ä¸­è¿è¡Œè‰¯å¥½ï¼Œä½†åœ¨Python 3.10.8ä¸­å¼•å‘ValueErrorã€‚è¯·æ³¨æ„ï¼ŒPythonä»ç„¶å¯ä»¥å¤„ç†å¤§æ•´æ•°ã€‚åªæœ‰åœ¨æ•´å‹å’Œå­—ç¬¦ä¸²ä¹‹é—´è½¬æ¢æ—¶æ‰ä¼šå‡ºç°æ­¤é”™è¯¯ã€‚</li>
<li>å¹¸è¿çš„æ˜¯ï¼Œå½“æ‚¨å¸Œæœ›æ“ä½œè¶…è¿‡å…è®¸çš„ä½æ•°é™åˆ¶æ—¶ï¼Œå¯ä»¥å¢åŠ è¯¥é™åˆ¶çš„ä¸Šé™ã€‚ä¸ºæ­¤ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä¹‹ä¸€ï¼š<ul>
<li>ä½¿ç”¨ -X int_max_str_digits çš„å‘½ä»¤è¡Œå‚æ•°ï¼ˆä¾‹å¦‚ï¼Œ python3 -X int_max_str_digits=640ï¼‰</li>
<li>ä½¿ç”¨æ¥è‡ªsysæ¨¡å—çš„set_int_max_str_digits()å‡½æ•°</li>
<li>è®¾å®š PYTHONINTMAXSTRDIGITS ç¯å¢ƒå˜é‡</li>
</ul>
</li>
</ul>
<p>æ›´å¤šæ›´æ”¹è®¾ç½®ä¸Šé™çš„æ“ä½œç»†èŠ‚æŸ¥çœ‹<a href="https://docs.python.org/3/library/stdtypes.html#int-max-str-digits">æ–‡æ¡£</a>ã€‚</p>
<hr />
<h2 id="section-slippery-slopes">Section: Slippery Slopes/æ»‘å¡è°¬è¯¯</h2>
<h3 id="modifying-a-dictionary-while-iterating-over-it">&gt; Modifying a dictionary while iterating over it/è¿­ä»£å­—å…¸æ—¶çš„ä¿®æ”¹</h3>
<div class="highlight"><pre><span></span><code><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
    <span class="k">del</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</code></pre></div>
<p><strong>Output (Python 2.7- Python 3.5):</strong></p>
<div class="highlight"><pre><span></span><code>0
1
2
3
4
5
6
7
</code></pre></div>
<p>æ˜¯çš„, å®ƒè¿è¡Œäº†<strong>å…«æ¬¡</strong>ç„¶åæ‰åœä¸‹æ¥.</p>
<h4 id="_34">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>Pythonä¸æ”¯æŒå¯¹å­—å…¸è¿›è¡Œè¿­ä»£çš„åŒæ—¶ä¿®æ”¹å®ƒ.</li>
<li>å®ƒä¹‹æ‰€ä»¥è¿è¡Œ8æ¬¡, æ˜¯å› ä¸ºå­—å…¸ä¼šè‡ªåŠ¨æ‰©å®¹ä»¥å®¹çº³æ›´å¤šé”®å€¼(æˆ‘ä»¬æœ‰8æ¬¡åˆ é™¤è®°å½•, å› æ­¤éœ€è¦æ‰©å®¹). è¿™å®é™…ä¸Šæ˜¯ä¸€ä¸ªå®ç°ç»†èŠ‚. (è¯‘: åº”è¯¥æ˜¯å› ä¸ºå­—å…¸çš„åˆå§‹æœ€å°å€¼æ˜¯8, æ‰©å®¹ä¼šå¯¼è‡´æ•£åˆ—è¡¨åœ°å€å‘ç”Ÿå˜åŒ–è€Œä¸­æ–­å¾ªç¯.)</li>
<li>åœ¨ä¸åŒçš„Pythonå®ç°ä¸­åˆ é™¤é”®çš„å¤„ç†æ–¹å¼ä»¥åŠè°ƒæ•´å¤§å°çš„æ—¶é—´å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒ.(è¯‘: å°±æ˜¯è¯´ä»€ä¹ˆæ—¶å€™æ‰©å®¹åœ¨ä¸åŒç‰ˆæœ¬ä¸­å¯èƒ½æ˜¯ä¸åŒçš„, åœ¨3.6åŠ3.7çš„ç‰ˆæœ¬ä¸­åˆ°<a href="https://github.com/python/cpython/blob/v3.6.1/Objects/dictobject.c#L103-L110">5</a>å°±ä¼šè‡ªåŠ¨æ‰©å®¹äº†. ä»¥åä¹Ÿæœ‰å¯èƒ½å†æ¬¡å‘ç”Ÿå˜åŒ–. è¿™æ˜¯ä¸ºäº†é¿å…æ•£åˆ—å†²çª. é¡ºå¸¦ä¸€æ, åé¢ä¸¤æ¬¡æ‰©å®¹ä¼šæ‰©å±•ä¸º32å’Œ256. å³<code>8-&gt;32-&gt;256</code>.)</li>
<li>æ›´å¤šçš„ä¿¡æ¯, ä½ å¯ä»¥å‚è€ƒè¿™ä¸ªStackOverflowçš„<a href="https://stackoverflow.com/questions/44763802/bug-in-python-dict">å›ç­”</a>, å®ƒè¯¦ç»†çš„è§£é‡Šä¸€ä¸ªç±»ä¼¼çš„ä¾‹å­.</li>
</ul>
<hr />
<h3 id="stubborn-del-operator-del">&gt; Stubborn <code>del</code> operator/åšå¼ºçš„ <code>del</code> *</h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">SomeClass</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Deleted!&quot;</span><span class="p">)</span>
</code></pre></div>
<p><strong>Output:</strong>
1.
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="o">=</span> <span class="n">x</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="n">x</span> <span class="c1"># è¿™é‡Œåº”è¯¥ä¼šè¾“å‡º &quot;Deleted!&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="n">y</span>
<span class="n">Deleted</span><span class="err">!</span>
</code></pre></div></p>
<p>å”·, ç»ˆäºåˆ é™¤äº†. ä½ å¯èƒ½å·²ç»çŒœåˆ°äº†åœ¨æˆ‘ä»¬ç¬¬ä¸€æ¬¡å°è¯•åˆ é™¤ <code>x</code> æ—¶æ˜¯ä»€ä¹ˆè®© <code>__del__</code> å…äºè¢«è°ƒç”¨çš„. é‚£è®©æˆ‘ä»¬ç»™è¿™ä¸ªä¾‹å­å¢åŠ ç‚¹éš¾åº¦.</p>
<p>2.
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="o">=</span> <span class="n">x</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="n">x</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="c1"># æ£€æŸ¥ä¸€ä¸‹yæ˜¯å¦å­˜åœ¨</span>
<span class="o">&lt;</span><span class="n">__main__</span><span class="o">.</span><span class="n">SomeClass</span> <span class="n">instance</span> <span class="n">at</span> <span class="mh">0x7f98a1a67fc8</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="n">y</span> <span class="c1"># åƒä¹‹å‰ä¸€æ ·, è¿™é‡Œåº”è¯¥ä¼šè¾“å‡º &quot;Deleted!&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">globals</span><span class="p">()</span> <span class="c1"># å¥½å§, å¹¶æ²¡æœ‰. è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹æ‰€æœ‰çš„å…¨å±€å˜é‡</span>
<span class="n">Deleted</span><span class="err">!</span>
<span class="p">{</span><span class="s1">&#39;__builtins__&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">module</span> <span class="s1">&#39;__builtin__&#39;</span> <span class="p">(</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;SomeClass&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">__main__</span><span class="o">.</span><span class="n">SomeClass</span> <span class="n">at</span> <span class="mh">0x7f98a1a5f668</span><span class="o">&gt;</span><span class="p">,</span> <span class="s1">&#39;__package__&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;__name__&#39;</span><span class="p">:</span> <span class="s1">&#39;__main__&#39;</span><span class="p">,</span> <span class="s1">&#39;__doc__&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
</code></pre></div></p>
<p>å¥½äº†ï¼Œç°åœ¨å®ƒè¢«åˆ é™¤äº† :confused:</p>
<h4 id="_35">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li><code>del x</code> å¹¶ä¸ä¼šç«‹åˆ»è°ƒç”¨ <code>x.__del__()</code>.</li>
<li>æ¯å½“é‡åˆ° <code>del x</code>, Python ä¼šå°† <code>x</code> çš„å¼•ç”¨æ•°å‡1, å½“ <code>x</code> çš„å¼•ç”¨æ•°å‡åˆ°0æ—¶å°±ä¼šè°ƒç”¨ <code>x.__del__()</code>.</li>
<li>åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­, <code>y.__del__()</code> ä¹‹æ‰€ä»¥æœªè¢«è°ƒç”¨, æ˜¯å› ä¸ºå‰ä¸€æ¡è¯­å¥ (<code>&gt;&gt;&gt; y</code>) å¯¹åŒä¸€å¯¹è±¡åˆ›å»ºäº†å¦ä¸€ä¸ªå¼•ç”¨, ä»è€Œé˜²æ­¢åœ¨æ‰§è¡Œ <code>del y</code> åå¯¹è±¡çš„å¼•ç”¨æ•°å˜ä¸º0.</li>
<li>è°ƒç”¨ <code>globals</code> å¯¼è‡´å¼•ç”¨è¢«é”€æ¯, å› æ­¤æˆ‘ä»¬å¯ä»¥çœ‹åˆ° "Deleted!" ç»ˆäºè¢«è¾“å‡ºäº†.</li>
<li>(è¯‘: è¿™å…¶å®æ˜¯ Python äº¤äº’è§£é‡Šå™¨çš„ç‰¹æ€§, å®ƒä¼šè‡ªåŠ¨è®© <code>_</code> ä¿å­˜ä¸Šä¸€ä¸ªè¡¨è¾¾å¼è¾“å‡ºçš„å€¼, è¯¦ç»†å¯ä»¥çœ‹<a href="https://www.cnblogs.com/leisurelylicht/p/diao-pi-de-kong-zhi-tai.html">è¿™é‡Œ</a>.)</li>
</ul>
<hr />
<h3 id="the-out-of-scope-variable">&gt; The out of scope variable/å¤–éƒ¨ä½œç”¨åŸŸå˜é‡</h3>
<!-- Example ID: 75c03015-7be9-4289-9e22-4f5fdda056f7 --->

<p>1.
<div class="highlight"><pre><span></span><code><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">def</span> <span class="nf">some_func</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">a</span>

<span class="k">def</span> <span class="nf">another_func</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">a</span>
</code></pre></div></p>
<p>2.
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">some_closure_func</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">def</span> <span class="nf">some_inner_func</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">a</span>
    <span class="k">return</span> <span class="n">some_inner_func</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">another_closure_func</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">def</span> <span class="nf">another_inner_func</span><span class="p">():</span>
        <span class="n">a</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">a</span>
    <span class="k">return</span> <span class="n">another_inner_func</span><span class="p">()</span>
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_func</span><span class="p">()</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_func</span><span class="p">()</span>
<span class="ne">UnboundLocalError</span><span class="p">:</span> <span class="n">local</span> <span class="n">variable</span> <span class="s1">&#39;a&#39;</span> <span class="n">referenced</span> <span class="n">before</span> <span class="n">assignment</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">some_closure_func</span><span class="p">()</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_closure_func</span><span class="p">()</span>
<span class="ne">UnboundLocalError</span><span class="p">:</span> <span class="n">local</span> <span class="n">variable</span> <span class="s1">&#39;a&#39;</span> <span class="n">referenced</span> <span class="n">before</span> <span class="n">assignment</span>
</code></pre></div></p>
<h4 id="_36">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>å½“ä½ åœ¨ä½œç”¨åŸŸä¸­å¯¹å˜é‡è¿›è¡Œèµ‹å€¼æ—¶, å˜é‡ä¼šå˜æˆè¯¥ä½œç”¨åŸŸå†…çš„å±€éƒ¨å˜é‡. å› æ­¤ <code>a</code> ä¼šå˜æˆ <code>another_func</code> å‡½æ•°ä½œç”¨åŸŸä¸­çš„å±€éƒ¨å˜é‡, ä½†å®ƒåœ¨å‡½æ•°ä½œç”¨åŸŸä¸­å¹¶æ²¡æœ‰è¢«åˆå§‹åŒ–, æ‰€ä»¥ä¼šå¼•å‘é”™è¯¯.</li>
<li>æƒ³è¦åœ¨ <code>another_func</code> ä¸­ä¿®æ”¹å¤–éƒ¨ä½œç”¨åŸŸå˜é‡ <code>a</code> çš„è¯, å¯ä»¥ä½¿ç”¨ <code>global</code> å…³é”®å­—.
  <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">another_func</span><span class="p">()</span>
    <span class="k">global</span> <span class="n">a</span>
    <span class="n">a</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">a</span>
</code></pre></div></li>
</ul>
<p><strong>Output:</strong>
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">another_func</span><span class="p">()</span>
<span class="mi">2</span>
</code></pre></div></p>
<ul>
<li>åœ¨ <code>another_closure_func</code> å‡½æ•°ä¸­ï¼Œ<code>a</code> ä¼šå˜æˆ <code>another_inner_func</code> å‡½æ•°ä½œç”¨åŸŸä¸­çš„å±€éƒ¨å˜é‡, ä½†å®ƒåœ¨åŒä¸€ä½œç”¨åŸŸä¸­å¹¶æ²¡æœ‰è¢«åˆå§‹åŒ–, æ‰€ä»¥ä¼šå¼•å‘é”™è¯¯ã€‚</li>
<li>æƒ³è¦åœ¨ <code>another_inner_func</code> ä¸­ä¿®æ”¹å¤–éƒ¨ä½œç”¨åŸŸå˜é‡ <code>a</code> çš„è¯, å¯ä»¥ä½¿ç”¨ <code>nonlocal</code> å…³é”®å­—ã€‚nonlocal è¡¨è¾¾å¼ç”¨äºï¼ˆé™¤å…¨å±€ä½œç”¨åŸŸå¤–ï¼‰æœ€è¿‘ä¸€çº§çš„å¤–éƒ¨ä½œç”¨åŸŸã€‚</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">another_func</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">def</span> <span class="nf">another_inner_func</span><span class="p">():</span>
        <span class="k">nonlocal</span> <span class="n">a</span>
        <span class="n">a</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">a</span>
    <span class="k">return</span> <span class="n">another_inner_func</span><span class="p">()</span>
</code></pre></div>
<p><strong>Output:</strong>
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">another_func</span><span class="p">()</span>
<span class="mi">2</span>
</code></pre></div></p>
<ul>
<li><code>global</code> and <code>nonlocal</code> å…³é”®å­—å‘Šè¯‰ <code>Python</code> è§£é‡Šå™¨ï¼Œä¸è¦å£°æ˜æ–°å˜é‡ï¼Œè€Œæ˜¯åœ¨ç›¸åº”çš„å¤–éƒ¨ä½œç”¨åŸŸä¸­æŸ¥æ‰¾å˜é‡ã€‚</li>
<li>å¯ä»¥é˜…è¯»<a href="https://sebastianraschka.com/Articles/2014_python_scope_and_namespaces.html">è¿™ä¸ª</a>ç®€çŸ­å´å¾ˆæ£’çš„æŒ‡å—, äº†è§£æ›´å¤šå…³äº Python ä¸­å‘½åç©ºé—´å’Œä½œç”¨åŸŸçš„å·¥ä½œåŸç†ã€‚</li>
</ul>
<hr />
<h3 id="deleting-a-list-item-while-iterating">&gt; Deleting a list item while iterating/è¿­ä»£åˆ—è¡¨æ—¶åˆ é™¤å…ƒç´ </h3>
<div class="highlight"><pre><span></span><code><span class="n">list_1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">list_2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">list_3</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">list_4</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>

<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">list_1</span><span class="p">):</span>
    <span class="k">del</span> <span class="n">item</span>

<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">list_2</span><span class="p">):</span>
    <span class="n">list_2</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">list_3</span><span class="p">[:]):</span>
    <span class="n">list_3</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">list_4</span><span class="p">):</span>
    <span class="n">list_4</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">list_1</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">list_2</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">list_3</span>
<span class="p">[]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">list_4</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</code></pre></div></p>
<p>ä½ èƒ½çŒœåˆ°ä¸ºä»€ä¹ˆè¾“å‡ºæ˜¯ <code>[2, 4]</code> å—?</p>
<h4 id="_37">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p>åœ¨è¿­ä»£æ—¶ä¿®æ”¹å¯¹è±¡æ˜¯ä¸€ä¸ªå¾ˆæ„šè ¢çš„ä¸»æ„. æ­£ç¡®çš„åšæ³•æ˜¯è¿­ä»£å¯¹è±¡çš„å‰¯æœ¬, <code>list_3[:]</code> å°±æ˜¯è¿™ä¹ˆåšçš„.</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">id</span><span class="p">(</span><span class="n">some_list</span><span class="p">)</span>
<span class="mi">139798789457608</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">id</span><span class="p">(</span><span class="n">some_list</span><span class="p">[:])</span> <span class="c1"># æ³¨æ„pythonä¸ºåˆ‡ç‰‡åˆ—è¡¨åˆ›å»ºäº†æ–°å¯¹è±¡.</span>
<span class="mi">139798779601192</span>
</code></pre></div>
</li>
</ul>
<p><strong><code>del</code>, <code>remove</code> å’Œ <code>pop</code> çš„ä¸åŒ:</strong>
* <code>del var_name</code> åªæ˜¯ä»æœ¬åœ°æˆ–å…¨å±€å‘½åç©ºé—´ä¸­åˆ é™¤äº† <code>var_name</code> (è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ <code>list_1</code> æ²¡æœ‰å—åˆ°å½±å“).
* <code>remove</code> ä¼šåˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„æŒ‡å®šå€¼, è€Œä¸æ˜¯ç‰¹å®šçš„ç´¢å¼•, å¦‚æœæ‰¾ä¸åˆ°å€¼åˆ™æŠ›å‡º <code>ValueError</code> å¼‚å¸¸.
* <code>pop</code> åˆ™ä¼šåˆ é™¤æŒ‡å®šç´¢å¼•å¤„çš„å…ƒç´ å¹¶è¿”å›å®ƒ, å¦‚æœæŒ‡å®šäº†æ— æ•ˆçš„ç´¢å¼•åˆ™æŠ›å‡º <code>IndexError</code> å¼‚å¸¸.</p>
<p><strong>ä¸ºä»€ä¹ˆè¾“å‡ºæ˜¯ <code>[2, 4]</code>?</strong>
- åˆ—è¡¨è¿­ä»£æ˜¯æŒ‰ç´¢å¼•è¿›è¡Œçš„, æ‰€ä»¥å½“æˆ‘ä»¬ä» <code>list_2</code> æˆ– <code>list_4</code> ä¸­åˆ é™¤ <code>1</code> æ—¶, åˆ—è¡¨çš„å†…å®¹å°±å˜æˆäº† <code>[2, 3, 4]</code>. å‰©ä½™å…ƒç´ ä¼šä¾æ¬¡ä½ç§», ä¹Ÿå°±æ˜¯è¯´, <code>2</code> çš„ç´¢å¼•ä¼šå˜ä¸º 0, <code>3</code> ä¼šå˜ä¸º 1. ç”±äºä¸‹ä¸€æ¬¡è¿­ä»£å°†è·å–ç´¢å¼•ä¸º 1 çš„å…ƒç´  (å³ <code>3</code>), å› æ­¤ <code>2</code> å°†è¢«å½»åº•çš„è·³è¿‡. ç±»ä¼¼çš„æƒ…å†µä¼šäº¤æ›¿å‘ç”Ÿåœ¨åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ ä¸Š.</p>
<ul>
<li>å‚è€ƒè¿™ä¸ªStackOverflowçš„<a href="https://stackoverflow.com/questions/45946228/what-happens-when-you-try-to-delete-a-list-element-while-iterating-over-it">å›ç­”</a>æ¥è§£é‡Šè¿™ä¸ªä¾‹å­</li>
<li>å…³äºPythonä¸­å­—å…¸çš„ç±»ä¼¼ä¾‹å­, å¯ä»¥å‚è€ƒè¿™ä¸ªStackoverflowçš„<a href="https://stackoverflow.com/questions/45877614/how-to-change-all-the-dictionary-keys-in-a-for-loop-with-d-items">å›ç­”</a>.</li>
</ul>
<hr />
<h3 id="lossy-zip-of-iteratorszip">&gt; Lossy zip of iterators/ä¸¢ä¸‰è½å››çš„zip *</h3>
<!-- Example ID: c28ed154-e59f-4070-8eb6-8967a4acac6d --->

<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">numbers</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">first_three</span><span class="p">,</span> <span class="n">remaining</span> <span class="o">=</span> <span class="n">numbers</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">numbers</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">first_three</span><span class="p">,</span> <span class="n">remaining</span>
<span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">numbers_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">numbers_iter</span><span class="p">,</span> <span class="n">first_three</span><span class="p">))</span> 
<span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<span class="c1"># so far so good, let&#39;s zip the remaining</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">numbers_iter</span><span class="p">,</span> <span class="n">remaining</span><span class="p">))</span>
<span class="p">[(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>
</code></pre></div>
<p><code>numbers</code> åˆ—è¡¨ä¸­çš„å…ƒç´  <code>3</code> å“ªé‡Œå»äº†ï¼Ÿ</p>
<h4 id="_38">ğŸ’¡ è¯´æ˜</h4>
<ul>
<li>
<p>æ ¹æ®Python <a href="https://docs.python.org/3.3/library/functions.html#zip">æ–‡æ¡£</a>ï¼Œ <code>zip</code> å‡½æ•°çš„å¤§æ¦‚å®ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">zip</span><span class="p">(</span><span class="o">*</span><span class="n">iterables</span><span class="p">):</span>
    <span class="n">sentinel</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>
    <span class="n">iterators</span> <span class="o">=</span> <span class="p">[</span><span class="nb">iter</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">iterables</span><span class="p">]</span>
    <span class="k">while</span> <span class="n">iterators</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">iterators</span><span class="p">:</span>
            <span class="n">elem</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="n">sentinel</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">elem</span> <span class="ow">is</span> <span class="n">sentinel</span><span class="p">:</span> <span class="k">return</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
        <span class="k">yield</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div>
</li>
<li>
<p>è¯¥å‡½æ•°æ¥å—ä»»æ„æ•°é‡çš„å¯è¿­ä»£å¯¹è±¡ï¼Œé€šè¿‡è°ƒç”¨ <code>next</code> å‡½æ•°å°†å®ƒä»¬çš„æ¯ä¸ªé¡¹ç›®æ·»åŠ åˆ° <code>result</code> åˆ—è¡¨ä¸­ï¼Œå¹¶åœ¨ä»»ä¸€å¯è¿­ä»£å¯¹è±¡è€—å°½æ—¶åœæ­¢ã€‚</p>
</li>
<li>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ä»»ä¸€å¯è¿­ä»£å¯¹è±¡ç”¨å°½æ—¶ï¼Œ<code>result</code> åˆ—è¡¨ä¸­çš„ç°æœ‰å…ƒç´ å°†è¢«ä¸¢å¼ƒã€‚è¿™å°±æ˜¯ <code>numbers_iter</code> ä¸­çš„ <code>3</code> æ‰€å‘ç”Ÿçš„æƒ…å†µã€‚</li>
<li>
<p>ä½¿ç”¨ zip æ‰§è¡Œä¸Šè¿°æ“ä½œçš„æ­£ç¡®æ–¹æ³•æ˜¯:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">numbers_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">first_three</span><span class="p">,</span> <span class="n">numbers_iter</span><span class="p">))</span>
<span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">remaining</span><span class="p">,</span> <span class="n">numbers_iter</span><span class="p">))</span>
<span class="p">[(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">)]</span>
</code></pre></div>
<p><code>zip</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°åº”å½“æ˜¯æœ‰æœ€å°‘å…ƒç´ çš„é‚£ä¸ªã€‚</p>
</li>
</ul>
<hr />
<h3 id="loop-variables-leaking-out">&gt; Loop variables leaking out!/å¾ªç¯å˜é‡æ³„æ¼!</h3>
<p>1.
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;: for x inside loop&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;: x in global&#39;</span><span class="p">)</span>
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="mi">6</span> <span class="p">:</span> <span class="k">for</span> <span class="n">x</span> <span class="n">inside</span> <span class="n">loop</span>
<span class="mi">6</span> <span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="k">global</span>
</code></pre></div></p>
<p>ä½†æ˜¯ <code>x</code> ä»æœªåœ¨å¾ªç¯å¤–è¢«å®šä¹‰...</p>
<p>2.
<div class="highlight"><pre><span></span><code><span class="c1"># è¿™æ¬¡æˆ‘ä»¬å…ˆåˆå§‹åŒ–x</span>
<span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;: for x inside loop&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;: x in global&#39;</span><span class="p">)</span>
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="mi">6</span> <span class="p">:</span> <span class="k">for</span> <span class="n">x</span> <span class="n">inside</span> <span class="n">loop</span>
<span class="mi">6</span> <span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="k">global</span>
</code></pre></div></p>
<p>3.
<div class="highlight"><pre><span></span><code>x = 1
print([x for x in range(5)])
print(x, &#39;: x in global&#39;)
</code></pre></div></p>
<p><strong>Output (on Python 2.x):</strong>
<div class="highlight"><pre><span></span><code>[0, 1, 2, 3, 4]
(4, &#39;: x in global&#39;)
</code></pre></div></p>
<p><strong>Output (on Python 3.x):</strong>
<div class="highlight"><pre><span></span><code>[0, 1, 2, 3, 4]
1 : x in global
</code></pre></div></p>
<h4 id="_39">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p>åœ¨ Python ä¸­, for å¾ªç¯ä½¿ç”¨æ‰€åœ¨ä½œç”¨åŸŸå¹¶åœ¨ç»“æŸåä¿ç•™å®šä¹‰çš„å¾ªç¯å˜é‡. å¦‚æœæˆ‘ä»¬æ›¾åœ¨å…¨å±€å‘½åç©ºé—´ä¸­å®šä¹‰è¿‡å¾ªç¯å˜é‡. åœ¨è¿™ç§æƒ…å†µä¸‹, å®ƒä¼šé‡æ–°ç»‘å®šç°æœ‰å˜é‡.</p>
</li>
<li>
<p>Python 2.x å’Œ Python 3.x è§£é‡Šå™¨åœ¨åˆ—è¡¨æ¨å¯¼å¼ç¤ºä¾‹ä¸­çš„è¾“å‡ºå·®å¼‚, åœ¨æ–‡æ¡£ <a href="https://docs.python.org/3/whatsnew/3.0.html">Whatâ€™s New In Python 3.0</a> ä¸­å¯ä»¥æ‰¾åˆ°ç›¸å…³çš„è§£é‡Š:</p>
<blockquote>
<p>"åˆ—è¡¨æ¨å¯¼ä¸å†æ”¯æŒå¥æ³•å½¢å¼ <code>[... for var in item1, item2, ...]</code>. å–è€Œä»£ä¹‹çš„æ˜¯ <code>[... for var in (item1, item2, ...)]</code>. å¦å¤–, æ³¨æ„åˆ—è¡¨æ¨å¯¼å…·æœ‰ä¸åŒçš„è¯­ä¹‰: å®ƒä»¬æ›´æ¥è¿‘äº <code>list()</code> æ„é€ å‡½æ•°ä¸­ç”Ÿæˆå™¨è¡¨è¾¾å¼çš„è¯­æ³•ç³–(è¯‘: è¿™ä¸€å¥æˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ˜ç™½), ç‰¹åˆ«æ˜¯å¾ªç¯æ§åˆ¶å˜é‡ä¸å†æ³„æ¼åˆ°å‘¨å›´çš„ä½œç”¨åŸŸä¸­."</p>
</blockquote>
</li>
</ul>
<hr />
<h3 id="beware-of-default-mutable-arguments">&gt; Beware of default mutable arguments!/å½“å¿ƒé»˜è®¤çš„å¯å˜å‚æ•°!</h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">some_func</span><span class="p">(</span><span class="n">default_arg</span><span class="o">=</span><span class="p">[]):</span>
    <span class="n">default_arg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;some_string&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">default_arg</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_func</span><span class="p">()</span>
<span class="p">[</span><span class="s1">&#39;some_string&#39;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_func</span><span class="p">()</span>
<span class="p">[</span><span class="s1">&#39;some_string&#39;</span><span class="p">,</span> <span class="s1">&#39;some_string&#39;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_func</span><span class="p">([])</span>
<span class="p">[</span><span class="s1">&#39;some_string&#39;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_func</span><span class="p">()</span>
<span class="p">[</span><span class="s1">&#39;some_string&#39;</span><span class="p">,</span> <span class="s1">&#39;some_string&#39;</span><span class="p">,</span> <span class="s1">&#39;some_string&#39;</span><span class="p">]</span>
</code></pre></div></p>
<h4 id="_40">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p>Pythonä¸­å‡½æ•°çš„é»˜è®¤å¯å˜å‚æ•°å¹¶ä¸æ˜¯æ¯æ¬¡è°ƒç”¨è¯¥å‡½æ•°æ—¶éƒ½ä¼šè¢«åˆå§‹åŒ–. ç›¸å, å®ƒä»¬ä¼šä½¿ç”¨æœ€è¿‘åˆ†é…çš„å€¼ä½œä¸ºé»˜è®¤å€¼. å½“æˆ‘ä»¬æ˜ç¡®çš„å°† <code>[]</code> ä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code>some_func</code> çš„æ—¶å€™, å°±ä¸ä¼šä½¿ç”¨ <code>default_arg</code> çš„é»˜è®¤å€¼, æ‰€ä»¥å‡½æ•°ä¼šè¿”å›æˆ‘ä»¬æ‰€æœŸæœ›çš„ç»“æœ.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">some_func</span><span class="p">(</span><span class="n">default_arg</span><span class="o">=</span><span class="p">[]):</span>
    <span class="n">default_arg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;some_string&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">default_arg</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_func</span><span class="o">.</span><span class="vm">__defaults__</span> <span class="c1"># è¿™é‡Œä¼šæ˜¾ç¤ºå‡½æ•°çš„é»˜è®¤å‚æ•°çš„å€¼</span>
<span class="p">([],)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_func</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_func</span><span class="o">.</span><span class="vm">__defaults__</span>
<span class="p">([</span><span class="s1">&#39;some_string&#39;</span><span class="p">],)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_func</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_func</span><span class="o">.</span><span class="vm">__defaults__</span>
<span class="p">([</span><span class="s1">&#39;some_string&#39;</span><span class="p">,</span> <span class="s1">&#39;some_string&#39;</span><span class="p">],)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_func</span><span class="p">([])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_func</span><span class="o">.</span><span class="vm">__defaults__</span>
<span class="p">([</span><span class="s1">&#39;some_string&#39;</span><span class="p">,</span> <span class="s1">&#39;some_string&#39;</span><span class="p">],)</span>
</code></pre></div></p>
</li>
<li>
<p>é¿å…å¯å˜å‚æ•°å¯¼è‡´çš„é”™è¯¯çš„å¸¸è§åšæ³•æ˜¯å°† <code>None</code> æŒ‡å®šä¸ºå‚æ•°çš„é»˜è®¤å€¼, ç„¶åæ£€æŸ¥æ˜¯å¦æœ‰å€¼ä¼ ç»™å¯¹åº”çš„å‚æ•°. ä¾‹:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">some_func</span><span class="p">(</span><span class="n">default_arg</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">default_arg</span><span class="p">:</span>
        <span class="n">default_arg</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">default_arg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;some_string&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">default_arg</span>
</code></pre></div>
</li>
</ul>
<hr />
<h3 id="catching-the-exceptions">&gt; Catching the Exceptions/æ•è·å¼‚å¸¸</h3>
<div class="highlight"><pre><span></span><code><span class="n">some_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">try</span><span class="p">:</span>
    <span class="c1"># è¿™é‡Œä¼šæŠ›å‡ºå¼‚å¸¸ ``IndexError``</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">some_list</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
<span class="k">except</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Caught!&quot;</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c1"># è¿™é‡Œä¼šæŠ›å‡ºå¼‚å¸¸ ``ValueError``</span>
    <span class="n">some_list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Caught again!&quot;</span><span class="p">)</span>
</code></pre></div>
<p><strong>Output (Python 2.x):</strong>
<div class="highlight"><pre><span></span><code><span class="n">Caught</span><span class="err">!</span>

<span class="ne">ValueError</span><span class="p">:</span> <span class="nb">list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span>
</code></pre></div></p>
<p><strong>Output (Python 3.x):</strong>
<div class="highlight"><pre><span></span><code>  <span class="n">File</span> <span class="s2">&quot;&lt;input&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">3</span>
    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">:</span>
                     <span class="o">^</span>
<span class="ne">SyntaxError</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">syntax</span>
</code></pre></div></p>
<h4 id="_41">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p>å¦‚æœä½ æƒ³è¦åŒæ—¶æ•è·å¤šä¸ªä¸åŒç±»å‹çš„å¼‚å¸¸æ—¶, ä½ éœ€è¦å°†å®ƒä»¬ç”¨æ‹¬å·åŒ…æˆä¸€ä¸ªå…ƒç»„ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’. ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰åç§°, å¦‚æœä½ æä¾›, å®ƒå°†ä¸è¢«æ•è·çš„å¼‚å¸¸å®ä¾‹ç»‘å®š. ä¾‹,
  <div class="highlight"><pre><span></span><code><span class="n">some_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">try</span><span class="p">:</span>
   <span class="c1"># è¿™é‡Œä¼šæŠ›å‡ºå¼‚å¸¸ ``ValueError``</span>
   <span class="n">some_list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="k">except</span> <span class="p">(</span><span class="ne">IndexError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">),</span> <span class="n">e</span><span class="p">:</span>
   <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Caught again!&quot;</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
  <strong>Output (Python 2.x):</strong>
  <div class="highlight"><pre><span></span><code>Caught again!
list.remove(x): x not in list
</code></pre></div>
  <strong>Output (Python 3.x):</strong>
  <div class="highlight"><pre><span></span><code>  <span class="n">File</span> <span class="s2">&quot;&lt;input&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">4</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">IndexError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">),</span> <span class="n">e</span><span class="p">:</span>
                                     <span class="o">^</span>
<span class="ne">IndentationError</span><span class="p">:</span> <span class="n">unindent</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">match</span> <span class="nb">any</span> <span class="n">outer</span> <span class="n">indentation</span> <span class="n">level</span>
</code></pre></div></p>
</li>
<li>
<p>åœ¨ Python 3 ä¸­, ç”¨é€—å·åŒºåˆ†å¼‚å¸¸ä¸å¯é€‰åç§°æ˜¯æ— æ•ˆçš„; æ­£ç¡®çš„åšæ³•æ˜¯ä½¿ç”¨ <code>as</code> å…³é”®å­—. ä¾‹,
  <div class="highlight"><pre><span></span><code><span class="n">some_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">some_list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

<span class="k">except</span> <span class="p">(</span><span class="ne">IndexError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Caught again!&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
  <strong>Output:</strong>
  <div class="highlight"><pre><span></span><code>Caught again!
list.remove(x): x not in list
</code></pre></div></p>
</li>
</ul>
<hr />
<h3 id="same-operands-different-story">&gt; Same operands, different story!/åŒäººä¸åŒå‘½!</h3>
<p>1.
<div class="highlight"><pre><span></span><code><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</code></pre></div></p>
<p>2.
<div class="highlight"><pre><span></span><code><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
<span class="n">a</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</code></pre></div></p>
<h4 id="_42">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>
<p><code>a += b</code> å¹¶ä¸æ€»æ˜¯ä¸ <code>a = a + b</code> è¡¨ç°ç›¸åŒ. ç±»å®ç° <em><code>op=</code></em> è¿ç®—ç¬¦çš„æ–¹å¼ <em>ä¹Ÿè®¸</em> æ˜¯ä¸åŒçš„, åˆ—è¡¨å°±æ˜¯è¿™æ ·åšçš„.</p>
</li>
<li>
<p>è¡¨è¾¾å¼ <code>a = a + [5,6,7,8]</code> ä¼šç”Ÿæˆä¸€ä¸ªæ–°åˆ—è¡¨, å¹¶è®© <code>a</code> å¼•ç”¨è¿™ä¸ªæ–°åˆ—è¡¨, åŒæ—¶ä¿æŒ <code>b</code> ä¸å˜.</p>
</li>
<li>
<p>è¡¨è¾¾å¼ <code>a += [5,6,7,8]</code> å®é™…ä¸Šæ˜¯ä½¿ç”¨çš„æ˜¯ "extend" å‡½æ•°, æ‰€ä»¥ <code>a</code> å’Œ <code>b</code> ä»ç„¶æŒ‡å‘å·²è¢«ä¿®æ”¹çš„åŒä¸€åˆ—è¡¨.</p>
</li>
</ul>
<hr />
<h3 id="name-resolution-ignoring-class-scope">&gt; Name resolution ignoring class scope/å¿½ç•¥ç±»ä½œç”¨åŸŸçš„åç§°è§£æ</h3>
<p>1.
<div class="highlight"><pre><span></span><code><span class="n">x</span> <span class="o">=</span> <span class="mi">5</span>
<span class="k">class</span> <span class="nc">SomeClass</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">17</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="n">SomeClass</span><span class="o">.</span><span class="n">y</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="mi">5</span>
</code></pre></div></p>
<p>2.
<div class="highlight"><pre><span></span><code><span class="n">x</span> <span class="o">=</span> <span class="mi">5</span>
<span class="k">class</span> <span class="nc">SomeClass</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">17</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
</code></pre></div></p>
<p><strong>Output (Python 2.x):</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="mi">17</span>
</code></pre></div></p>
<p><strong>Output (Python 3.x):</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">SomeClass</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="mi">5</span>
</code></pre></div></p>
<h4 id="_43">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>ç±»å®šä¹‰ä¸­åµŒå¥—çš„ä½œç”¨åŸŸä¼šå¿½ç•¥ç±»å†…çš„åç§°ç»‘å®š.</li>
<li>ç”Ÿæˆå™¨è¡¨è¾¾å¼æœ‰å®ƒè‡ªå·±çš„ä½œç”¨åŸŸ.</li>
<li>ä» Python 3.X å¼€å§‹, åˆ—è¡¨æ¨å¯¼å¼ä¹Ÿæœ‰è‡ªå·±çš„ä½œç”¨åŸŸ.</li>
</ul>
<hr />
<h3 id="rounding-like-a-banker">&gt; Rounding like a banker/åƒé“¶è¡Œå®¶ä¸€æ ·èˆå…¥ *</h3>
<p>è®©æˆ‘ä»¬å®ç°ä¸€ä¸ªç®€å•çš„å‡½æ•°æ¥è·å–åˆ—è¡¨çš„ä¸­é—´å…ƒç´ ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_middle</span><span class="p">(</span><span class="n">some_list</span><span class="p">):</span>
    <span class="n">mid_index</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">some_list</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">some_list</span><span class="p">[</span><span class="n">mid_index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
</code></pre></div>
<p><strong>Python 3.x:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">get_middle</span><span class="p">([</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># looks good</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">get_middle</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>  <span class="c1"># looks good</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">get_middle</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>  <span class="c1"># huh?</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span>  <span class="c1"># good</span>
<span class="mf">2.5</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">round</span><span class="p">(</span><span class="nb">len</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># why?</span>
<span class="mi">2</span>
</code></pre></div></p>
<p>ä¼¼ä¹ Python å°† 2.5 èˆå…¥åˆ° 2ã€‚</p>
<h4 id="_44">ğŸ’¡ è¯´æ˜</h4>
<ul>
<li>
<ul>
<li>è¿™ä¸æ˜¯æµ®ç‚¹ç²¾åº¦é”™è¯¯ï¼Œå®é™…ä¸Šï¼Œè¿™ç§è¡Œä¸ºæ˜¯æ•…æ„çš„ã€‚ä» Python 3.0 å¼€å§‹ï¼Œ<code>round()</code> ä½¿ç”¨<a href="https://en.wikipedia.org/wiki/Rounding#Round_half_to_even">é“¶è¡Œè¿›ä½æ³•</a>ï¼Œå…¶ä¸­ 0.5 å°æ•°å››èˆäº”å…¥åˆ°æœ€æ¥è¿‘çš„ <strong>å¶æ•°</strong> ï¼š</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">round</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">round</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">round</span><span class="p">(</span><span class="mf">2.5</span><span class="p">)</span>
<span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">numpy</span>  <span class="c1"># numpyçš„ç»“æœä¹Ÿæ˜¯ä¸€æ ·</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="mf">0.0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="mf">2.0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">numpy</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mf">2.5</span><span class="p">)</span>
<span class="mf">2.0</span>
</code></pre></div>
<ul>
<li>è¿™æ˜¯ <a href="https://en.wikipedia.org/wiki/IEEE_754#Rounding_rules">IEEE 754</a> ä¸­æè¿°çš„å…³äº0.5åˆ†ä½èˆå…¥çš„æ¨èæ–¹æ³•ã€‚ç„¶è€Œï¼Œå¦ä¸€ç§æ–¹æ³•ï¼ˆä»é›¶å–æ•´ï¼‰å¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯åœ¨å­¦æ ¡æ•™æˆçš„ï¼Œæ‰€ä»¥é“¶è¡Œè¿›ä½æ³•å¯èƒ½å¹¶ä¸ä¸ºäººæ‰€çŸ¥ã€‚æ­¤å¤–ï¼Œä¸€äº›æœ€æµè¡Œçš„ç¼–ç¨‹è¯­è¨€ï¼ˆä¾‹å¦‚ï¼šJavaScriptã€Javaã€C/C++ã€Rubyã€Rustï¼‰ä¹Ÿä¸ä½¿ç”¨é“¶è¡Œè¿›ä½æ³•ã€‚å› æ­¤ï¼Œè¿™å¯¹ Python æ¥è¯´è¿˜æ˜¯æ¯”è¾ƒç‰¹æ®Šçš„ï¼Œåœ¨å››èˆäº”å…¥æ—¶å¯èƒ½ä¼šå¯¼è‡´æ··æ·†ã€‚</li>
<li>äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ–‡æ¡£ <a href="https://docs.python.org/3/library/functions.html#round">round()</a> æˆ– <a href="https://stackoverflow.com/questions/10825926/python -3-x-rounding-behavior">this stackoverflow thread</a> </li>
<li>è¯·æ³¨æ„ï¼Œ<code>get_middle([1])</code> åªè¿”å›1ï¼Œå› ä¸ºå®ƒçš„ç´¢å¼•æ˜¯ <code>round(0.5) - 1 = 0 - 1 = -1</code>ï¼Œè¿”å›åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚</li>
</ul>
<hr />
<h3 id="needles-in-a-haystack">&gt; Needles in a Haystack/å¤§æµ·æé’ˆ</h3>
<!-- Example ID: 52a199b1-989a-4b28-8910-dff562cebba9 --->

<p>è¿„ä»Šä¸ºæ­¢ï¼Œæ¯ä¸€ä½Pythonå¼€å‘è€…éƒ½ä¼šé‡åˆ°ç±»ä¼¼ä»¥ä¸‹çš„æƒ…å†µã€‚</p>
<p>1.
<div class="highlight"><pre><span></span><code><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="kc">True</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code>&gt;&gt;&gt; x, y  # æœŸæœ›çš„ç»“æœæ˜¯ (0, 1)
((0, 1), None)
</code></pre></div></p>
<p>2.
<div class="highlight"><pre><span></span><code><span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">t</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">t</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="n">t</span> <span class="o">=</span> <span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</code></pre></div></p>
<p><strong>Output:</strong></p>
<div class="highlight"><pre><span></span><code><span class="n">one</span>
<span class="n">two</span>
<span class="n">o</span>
<span class="n">n</span>
<span class="n">e</span>
<span class="nb">tuple</span><span class="p">()</span>
</code></pre></div>
<p>3.</p>
<div class="highlight"><pre><span></span><code>ten_words_list = [
    &quot;some&quot;,
    &quot;very&quot;,
    &quot;big&quot;,
    &quot;list&quot;,
    &quot;that&quot;
    &quot;consists&quot;,
    &quot;of&quot;,
    &quot;exactly&quot;,
    &quot;ten&quot;,
    &quot;words&quot;
]
</code></pre></div>
<p><strong>Output</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">ten_words_list</span><span class="p">)</span>
<span class="mi">9</span>
</code></pre></div>
<p>4. ä¸å¤Ÿå¥å£®çš„æ–­è¨€æœºåˆ¶</p>
<div class="highlight"><pre><span></span><code><span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;python&quot;</span>
<span class="n">b</span> <span class="o">=</span> <span class="s2">&quot;javascript&quot;</span>
</code></pre></div>
<p><strong>Output:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># å¸¦æœ‰å¤±è´¥è­¦å‘Šä¿¡æ¯çš„assertè¡¨è¾¾å¼</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">assert</span><span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">,</span> <span class="s2">&quot;Both languages are different&quot;</span><span class="p">)</span>
<span class="c1"># æœªå¼•å‘ AssertionError </span>
</code></pre></div>
<p>5.</p>
<div class="highlight"><pre><span></span><code><span class="n">some_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">some_dict</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;key_1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s2">&quot;key_2&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s2">&quot;key_3&quot;</span><span class="p">:</span> <span class="mi">3</span>
<span class="p">}</span>

<span class="n">some_list</span> <span class="o">=</span> <span class="n">some_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> 
<span class="n">some_dict</span> <span class="o">=</span> <span class="n">some_dict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;key_4&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
</code></pre></div>
<p><strong>Output:</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">some_list</span><span class="p">)</span>
<span class="kc">None</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">some_dict</span><span class="p">)</span>
<span class="kc">None</span>
</code></pre></div>
<p>6.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">some_recursive_func</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="n">some_recursive_func</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span>

<span class="k">def</span> <span class="nf">similar_recursive_func</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span>
    <span class="n">a</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="n">similar_recursive_func</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span>
</code></pre></div>
<p><strong>Output:</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_recursive_func</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">similar_recursive_func</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="mi">4</span>
</code></pre></div>
<h4 id="_45">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>å¯¹äº 1, æ­£ç¡®çš„è¯­å¥æ˜¯ <code>x, y = (0, 1) if True else (None, None)</code>.</li>
<li>å¯¹äº 2, æ­£ç¡®çš„è¯­å¥æ˜¯ <code>t = ('one',)</code> æˆ–è€… <code>t = 'one',</code> (ç¼ºå°‘é€—å·) å¦åˆ™è§£é‡Šå™¨ä¼šè®¤ä¸º <code>t</code> æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸², å¹¶é€ä¸ªå­—ç¬¦å¯¹å…¶è¿›è¡Œè¿­ä»£.</li>
<li><code>()</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ ‡è®°ï¼Œè¡¨ç¤ºç©ºå…ƒç»„.</li>
<li>å¯¹äº 3ï¼Œæ­£å¦‚æ‚¨å¯èƒ½å·²ç»å¼„æ¸…æ¥šçš„é‚£æ ·ï¼Œåˆ—è¡¨ä¸­çš„ç¬¬5ä¸ªå…ƒç´ ï¼ˆ"that"ï¼‰åé¢ç¼ºå°‘ä¸€ä¸ªé€—å·ã€‚å› æ­¤ï¼Œé€šè¿‡éšå¼å­—ç¬¦ä¸²å­—é¢è¿æ¥ï¼Œ</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">ten_words_list</span>
<span class="p">[</span><span class="s1">&#39;some&#39;</span><span class="p">,</span> <span class="s1">&#39;very&#39;</span><span class="p">,</span> <span class="s1">&#39;big&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="s1">&#39;thatconsists&#39;</span><span class="p">,</span> <span class="s1">&#39;of&#39;</span><span class="p">,</span> <span class="s1">&#39;exactly&#39;</span><span class="p">,</span> <span class="s1">&#39;ten&#39;</span><span class="p">,</span> <span class="s1">&#39;words&#39;</span><span class="p">]</span>
</code></pre></div>
<ul>
<li>åœ¨ç¬¬4ä¸ªä»£ç æ®µä¸­æ²¡æœ‰å¼•å‘"AssertionError"ï¼Œå› ä¸ºæˆ‘ä»¬ä¸æ˜¯æ–­è¨€å•ä¸ªè¡¨è¾¾å¼ <code>a == b</code>ï¼Œè€Œæ˜¯æ–­è¨€æ•´ä¸ªå…ƒç»„ã€‚ä»¥ä¸‹ä»£ç æ®µå°†è¯´æ˜é—®é¢˜ï¼Œ</li>
</ul>
<p><div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;python&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="s2">&quot;javascript&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">assert</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
    <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">AssertionError</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">assert</span> <span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">,</span> <span class="s2">&quot;Values are not equal&quot;</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">stdin</span><span class="o">&gt;</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span> <span class="ne">SyntaxWarning</span><span class="p">:</span> <span class="n">assertion</span> <span class="ow">is</span> <span class="n">always</span> <span class="n">true</span><span class="p">,</span> <span class="n">perhaps</span> <span class="n">remove</span> <span class="n">parentheses</span><span class="err">?</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">assert</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">,</span> <span class="s2">&quot;Values are not equal&quot;</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
    <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">AssertionError</span><span class="p">:</span> <span class="n">Values</span> <span class="n">are</span> <span class="ow">not</span> <span class="n">equal</span>
</code></pre></div>
* è‡³äºç¬¬äº”ä¸ªç‰‡æ®µï¼Œå¤§å¤šæ•°ä¿®æ”¹åºåˆ—/æ˜ å°„å¯¹è±¡é¡¹çš„æ–¹æ³•ï¼Œå¦‚<code>list.append</code>ã€<code>dict.update</code>ã€<code>list.sort</code>ç­‰ï¼Œéƒ½åœ¨åŸåœ°ä¿®æ”¹å¯¹è±¡å¹¶è¿”å›<code>None</code>ã€‚è¿™èƒŒåçš„åŸºæœ¬åŸç†æ˜¯é€šè¿‡åŸåœ°æ“ä½œï¼Œé¿å…å¤åˆ¶å¯¹è±¡æ¥æé«˜æ€§èƒ½(å‚è€ƒ<a href="https://docs.python.org/3/faq/design.html#why-doesn-t-list-sort-return-the-sorted-list">è¿™é‡Œ</a>)ã€‚
* æœ€åä¸€ä¸ªåº”è¯¥ç›¸å½“æ˜æ˜¾ï¼Œå¯å˜å¯¹è±¡ï¼ˆå¦‚<code>list</code>ï¼‰å¯ä»¥åœ¨å‡½æ•°ä¸­æ›´æ”¹ï¼Œä¸å¯å˜å¯¹è±¡ï¼ˆ<code>a -= 1</code>ï¼‰çš„é‡æ–°èµ‹å€¼åˆ™ä¸å±äºå€¼çš„æ”¹å˜ã€‚
* äº†è§£è¿™äº›ç»†èŠ‚å¯ä»¥åœ¨ç¨‹åºé•¿æœŸè¿è¡Œä¸­ï¼Œä¸ºæ‚¨èŠ‚çœæ•°å°æ—¶çš„è°ƒè¯•å·¥ä½œã€‚</p>
<hr />
<h3 id="splitsies">&gt; Splitsies/åˆ†å‰²å‡½æ•° *</h3>
<!-- Example ID: ec3168ba-a81a-4482-afb0-691f1cc8d65a --->

<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;a&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>

<span class="c1"># is same as</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;a&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>

<span class="c1"># but</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
<span class="mi">0</span>

<span class="c1"># isn&#39;t the same as</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">))</span>
<span class="mi">1</span>
</code></pre></div>
<h4 id="_46">ğŸ’¡ è¯´æ˜</h4>
<ul>
<li>èµ·åˆäººä»¬å¯èƒ½ä¼šè®¤ä¸º split çš„é»˜è®¤åˆ†éš”ç¬¦æ˜¯å•ä¸ªç©ºæ ¼ <code>' '</code>ï¼Œä½†æ ¹æ® <a href="https://docs.python.org/3/library/stdtypes.html#str.split">æ–‡æ¡£</a>ï¼š
    &gt;  å¦‚æœ sep æœªæŒ‡å®šæˆ–ä¸º <code>None</code>ï¼Œåˆ™åº”ç”¨ä¸åŒçš„æ‹†åˆ†ç®—æ³•ï¼šè¿ç»­çš„ç©ºæ ¼è¢«è§†ä¸ºå•ä¸ªåˆ†éš”ç¬¦ï¼Œå¦‚æœå­—ç¬¦ä¸²æœ‰å‰å¯¼æˆ–å°¾éšç©ºæ ¼ï¼Œåˆ™ç»“æœå°†åœ¨å¼€å¤´æˆ–ç»“å°¾ä¸åŒ…å«ç©ºå­—ç¬¦ä¸²ã€‚å› æ­¤ï¼Œä½¿ç”¨ <code>None</code> åˆ†éš”ç¬¦æ‹†åˆ†ç©ºå­—ç¬¦ä¸²æˆ–ä»…åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²å°†è¿”å› <code>[]</code>ã€‚
    &gt; å¦‚æœç»™å®š sepï¼Œè¿ç»­çš„åˆ†éš”ç¬¦ä¸ä¼šç»„åˆåœ¨ä¸€èµ·ï¼Œå¹¶è¢«è§†ä¸ºåˆ†éš”ç©ºå­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ï¼Œ<code>'1,,2'.split(',')</code> è¿”å› <code>['1', '', '2 ']</code>ï¼‰ã€‚ä½¿ç”¨æŒ‡å®šçš„åˆ†éš”ç¬¦æ‹†åˆ†ç©ºå­—ç¬¦ä¸²ä¼šè¿”å› <code>['']</code>ã€‚</li>
<li>Noticing how the leading and trailing whitespaces are handled in the following snippet will make things clear,</li>
<li>
<p>æ³¨æ„ä»¥ä¸‹ä»£ç æ®µä¸­å¦‚ä½•å¤„ç†å‰å¯¼å’Œå°¾éšç©ºæ ¼ï¼Œä¿ƒè¿›æ›´æ·±å…¥çš„ç†è§£ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39; a &#39;</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39; a &#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]</span>
</code></pre></div>
</li>
</ul>
<hr />
<h3 id="wild-imports">&gt; Wild imports/é€šé…ç¬¦å¯¼å…¥æ–¹å¼ *</h3>
<!-- Example ID: 83deb561-bd55-4461-bb5e-77dd7f411e1c --->
<!-- read-only -->

<div class="highlight"><pre><span></span><code><span class="c1"># File: module.py</span>

<span class="k">def</span> <span class="nf">some_weird_name_func_</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;works!&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_another_weird_name_func</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;works!&quot;</span><span class="p">)</span>
</code></pre></div>
<p><strong>Output</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">module</span> <span class="kn">import</span> <span class="o">*</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_weird_name_func_</span><span class="p">()</span>
<span class="s2">&quot;works!&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">_another_weird_name_func</span><span class="p">()</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">NameError</span><span class="p">:</span> <span class="n">name</span> <span class="s1">&#39;_another_weird_name_func&#39;</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">defined</span>
</code></pre></div>
<h4 id="_47">ğŸ’¡ è¯´æ˜</h4>
<ul>
<li>é€šå¸¸å»ºè®®ä¸è¦ä½¿ç”¨é€šé…ç¬¦å¯¼å…¥ã€‚ç¬¬ä¸€ä¸ªæ˜æ˜¾çš„åŸå› æ˜¯ï¼Œåœ¨é€šé…ç¬¦å¯¼å…¥ä¸­ï¼Œå¸¦æœ‰å‰å¯¼ä¸‹åˆ’çº¿çš„åç§°ä¸ä¼šè¢«å¯¼å…¥ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´è¿è¡Œæ—¶å‡ºé”™ã€‚</li>
<li>
<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨ <code>from ... import a, b, c</code> è¯­æ³•ï¼Œä¸Šé¢çš„ <code>NameError</code> å°±ä¸ä¼šå‘ç”Ÿã€‚</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">module</span> <span class="kn">import</span> <span class="n">some_weird_name_func_</span><span class="p">,</span> <span class="n">_another_weird_name_func</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">_another_weird_name_func</span><span class="p">()</span>
<span class="n">works</span><span class="err">!</span>
</code></pre></div>
</li>
<li>
<p>å¦‚æœä½ çœŸçš„æƒ³ä½¿ç”¨é€šé…ç¬¦å¯¼å…¥ï¼Œé‚£ä¹ˆä½ å¿…é¡»åœ¨ä½ çš„æ¨¡å—ä¸­å®šä¹‰åˆ—è¡¨<code>__all__</code>ï¼Œå®ƒåŒ…å«ä¸€ç³»åˆ—å…¬å…±å¯¹è±¡ï¼Œå½“æˆ‘ä»¬è¿›è¡Œé€šé…ç¬¦å¯¼å…¥æ—¶ï¼Œåˆ—è¡¨ä¸­çš„è¿™äº›å¯¹è±¡å°†è¢«å¯¼å…¥ã€‚</p>
<p><div class="highlight"><pre><span></span><code><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;_another_weird_name_func&#39;</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">some_weird_name_func_</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;works!&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_another_weird_name_func</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;works!&quot;</span><span class="p">)</span>
</code></pre></div>
<strong>Output</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">_another_weird_name_func</span><span class="p">()</span>
<span class="s2">&quot;works!&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_weird_name_func_</span><span class="p">()</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">NameError</span><span class="p">:</span> <span class="n">name</span> <span class="s1">&#39;some_weird_name_func_&#39;</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">defined</span>
</code></pre></div>
</li>
</ul>
<hr />
<h3 id="all-sorted">&gt; All sorted?/éƒ½æ’åºäº†å—ï¼Ÿ *</h3>
<!-- Example ID: e5ff1eaf-8823-4738-b4ce-b73f7c9d5511 -->

<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="n">x</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="kc">True</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="kc">False</span>
</code></pre></div>
<h4 id="_48">ğŸ’¡ è¯´æ˜</h4>
<ul>
<li>
<p><code>sorted</code> æ–¹æ³•ä¸€å®šè¿”å›åˆ—è¡¨ç±»å‹, æ¯”è¾ƒåˆ—è¡¨ä¸å…ƒç»„åœ¨Pythonä¸­ä¸€å®šè¿”å› <code>False</code>. </p>
</li>
<li>
<p>```py</p>
<blockquote>
<blockquote>
<blockquote>
<p>[] == tuple()
  False
x = 7, 8, 9
type(x), type(sorted(x))
  (tuple, list)
  ```</p>
</blockquote>
</blockquote>
</blockquote>
</li>
<li>
<p>ä¸ <code>sorted</code> ä¸åŒï¼Œ<code>reversed</code> æ–¹æ³•è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºæ’åºéœ€è¦å°±åœ°ä¿®æ”¹è¿­ä»£å™¨æˆ–ä½¿ç”¨é¢å¤–çš„å®¹å™¨ï¼ˆåˆ—è¡¨ï¼‰ï¼Œè€Œåå‘å¯ä»¥ç®€å•åœ°é€šè¿‡ä»æœ€åä¸€ä¸ªç´¢å¼•è¿­ä»£åˆ°ç¬¬ä¸€ä¸ªç´¢å¼•æ¥å·¥ä½œã€‚</p>
</li>
<li>
<p>æ‰€ä»¥åœ¨æ¯”è¾ƒ <code>sorted(y) == sorted(y)</code> æ—¶ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨ <code>sorted()</code> ä¼šæ¶ˆè€—è¿­ä»£å™¨ <code>y</code>ï¼Œä¸‹ä¸€æ¬¡è°ƒç”¨åªä¼šè¿”å›ä¸€ä¸ªç©ºåˆ—è¡¨ã€‚</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="p">([</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span> <span class="p">[])</span>
</code></pre></div>
<hr />
<h3 id="midnight-time-doesnt-exist">&gt; Midnight time doesn't exist?/ä¸å­˜åœ¨çš„åˆå¤œ?</h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">midnight</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">midnight_time</span> <span class="o">=</span> <span class="n">midnight</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="n">noon</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">noon_time</span> <span class="o">=</span> <span class="n">noon</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

<span class="k">if</span> <span class="n">midnight_time</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Time at midnight is&quot;</span><span class="p">,</span> <span class="n">midnight_time</span><span class="p">)</span>

<span class="k">if</span> <span class="n">noon_time</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Time at noon is&quot;</span><span class="p">,</span> <span class="n">noon_time</span><span class="p">)</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">(</span><span class="s1">&#39;Time at noon is&#39;</span>,<span class="w"> </span>datetime.time<span class="o">(</span><span class="m">12</span>,<span class="w"> </span><span class="m">0</span><span class="o">))</span>
</code></pre></div></p>
<p>midnight_time å¹¶æ²¡æœ‰è¢«è¾“å‡º.</p>
<h4 id="_49">ğŸ’¡ è¯´æ˜:</h4>
<p>åœ¨Python 3.5ä¹‹å‰, å¦‚æœ <code>datetime.time</code> å¯¹è±¡å­˜å‚¨çš„UTCçš„åˆå¤œæ—¶é—´(è¯‘: å°±æ˜¯ <code>00:00</code>), é‚£ä¹ˆå®ƒçš„å¸ƒå°”å€¼ä¼šè¢«è®¤ä¸ºæ˜¯ <code>False</code>. å½“ä½¿ç”¨ <code>if obj:</code> è¯­å¥æ¥æ£€æŸ¥ <code>obj</code> æ˜¯å¦ä¸º <code>null</code> æˆ–è€…æŸäº›â€œç©ºâ€å€¼çš„æ—¶å€™, å¾ˆå®¹æ˜“å‡ºé”™.</p>
<hr />
<h2 id="section-the-hidden-treasures">Section: The Hidden treasures!/éšè—çš„å®è—!</h2>
<p>æœ¬èŠ‚åŒ…å«äº†ä¸€äº›åƒæˆ‘è¿™æ ·çš„å¤§å¤šæ•°åˆå­¦è€…éƒ½ä¸çŸ¥é“çš„å…³äºPythonçš„é²œä¸ºäººçŸ¥çš„æœ‰è¶£çš„äº‹æƒ…ï¼ˆå¥½å§ï¼Œç°åœ¨ä¸æ˜¯äº†ï¼‰ã€‚</p>
<h3 id="okay-python-can-you-make-me-flypython">&gt; Okay Python, Can you make me fly?/Python, å¯å¦å¸¦æˆ‘é£? *</h3>
<p>å¥½, å»å§.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">antigravity</span>
</code></pre></div>
<p><strong>Output:</strong>
å˜˜.. è¿™æ˜¯ä¸ªè¶…çº§ç§˜å¯†.</p>
<h4 id="_50">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li><code>antigravity</code> æ¨¡å—æ˜¯ Python å¼€å‘äººå‘˜å‘å¸ƒçš„å°‘æ•°å¤æ´»èŠ‚å½©è›‹ä¹‹ä¸€.</li>
<li><code>import antigravity</code> ä¼šæ‰“å¼€ä¸€ä¸ª Python çš„<a href="http://xkcd.com/353/">ç»å…¸ XKCD æ¼«ç”»</a>é¡µé¢.</li>
<li>ä¸æ­¢å¦‚æ­¤. è¿™ä¸ª<strong>å¤æ´»èŠ‚å½©è›‹é‡Œè¿˜æœ‰ä¸€ä¸ªå¤æ´»èŠ‚å½©è›‹</strong>. å¦‚æœä½ çœ‹ä¸€ä¸‹<a href="https://github.com/python/cpython/blob/master/Lib/antigravity.py#L7-L17">ä»£ç </a>, å°±ä¼šå‘ç°è¿˜æœ‰ä¸€ä¸ªå‡½æ•°å®ç°äº† <a href="https://xkcd.com/426/">XKCD's geohashing ç®—æ³•</a>.</li>
</ul>
<hr />
<h3 id="goto-but-whygoto">&gt; <code>goto</code>, but why?/<code>goto</code>, ä½†ä¸ºä»€ä¹ˆ? *</h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">goto</span> <span class="kn">import</span> <span class="n">goto</span><span class="p">,</span> <span class="n">label</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I&#39;m trapped, please rescue!&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">goto</span> <span class="o">.</span><span class="n">breakout</span> <span class="c1"># ä»å¤šé‡å¾ªç¯ä¸­è·³å‡º</span>
<span class="n">label</span> <span class="o">.</span><span class="n">breakout</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Freedom!&quot;</span><span class="p">)</span>
</code></pre></div>
<p><strong>Output (Python 2.3):</strong>
<div class="highlight"><pre><span></span><code><span class="n">I</span><span class="s1">&#39;m trapped, please rescue!</span>
<span class="n">I</span><span class="s1">&#39;m trapped, please rescue!</span>
<span class="n">Freedom</span><span class="err">!</span>
</code></pre></div></p>
<h4 id="_51">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>2004å¹´4æœˆ1æ—¥, Python <a href="https://mail.python.org/pipermail/python-announce-list/2004-April/002982.html">å®£å¸ƒ</a> åŠ å…¥ä¸€ä¸ªå¯ç”¨çš„ <code>goto</code> ä½œä¸ºæ„šäººèŠ‚ç¤¼ç‰©.</li>
<li>å½“å‰ç‰ˆæœ¬çš„ Python å¹¶æ²¡æœ‰è¿™ä¸ªæ¨¡å—.</li>
<li>å°±ç®—å¯ä»¥ç”¨, ä¹Ÿè¯·ä¸è¦ä½¿ç”¨å®ƒ. è¿™é‡Œæ˜¯ä¸ºä»€ä¹ˆPythonä¸­æ²¡æœ‰ <code>goto</code> çš„<a href="https://docs.python.org/3/faq/design.html#why-is-there-no-goto">åŸå› </a>.</li>
</ul>
<hr />
<h3 id="brace-yourself">&gt; Brace yourself!/åšå¥½æ€æƒ³å‡†å¤‡ *</h3>
<p>å¦‚æœä½ ä¸å–œæ¬¢åœ¨Pythonä¸­ä½¿ç”¨ç©ºæ ¼æ¥è¡¨ç¤ºä½œç”¨åŸŸ, ä½ å¯ä»¥å¯¼å…¥ C é£æ ¼çš„ {},</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">braces</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code>  <span class="n">File</span> <span class="s2">&quot;some_file.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">braces</span>
<span class="ne">SyntaxError</span><span class="p">:</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">chance</span>
</code></pre></div></p>
<p>æƒ³ç”¨å¤§æ‹¬å· <code>braces</code>? æ²¡é—¨! è§‰å¾—ä¸çˆ½, è¯·å»ç”¨javaã€‚é‚£ä¹ˆï¼Œå¦ä¸€ä¸ªä»¤äººæƒŠè®¶çš„äº‹æƒ…ï¼Œæ‰¾ä¸€æ‰¾åœ¨ <code>__future__</code> æ¨¡å—ä¸­ï¼Œå“ªé‡Œå¼•å‘äº† <code>SyntaxError</code> <a href="https://github.com/python/cpython/blob/master/Lib/__future__.py">code</a>?</p>
<h4 id="_52">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>é€šå¸¸ <code>__future__</code> ä¼šæä¾› Python æœªæ¥ç‰ˆæœ¬çš„åŠŸèƒ½. ç„¶è€Œï¼Œè¿™é‡Œçš„ â€œæœªæ¥â€ æ˜¯ä¸€ä¸ªè®½åˆº.</li>
<li>è¿™æ˜¯ä¸€ä¸ªè¡¨è¾¾ç¤¾åŒºå¯¹æ­¤ç±»é—®é¢˜æ€åº¦çš„å¤æ´»èŠ‚å½©è›‹.</li>
<li>ä»£ç å®é™…ä¸Šåœ¨[<code>future.c</code> æ–‡ä»¶]ä¸­ (https://github.com/python/cpython/blob/025eb98dc0c1dc27404df6c544fc2944e0fa9f3a/Python/future.c#L49).</li>
<li>å½“ CPython ç¼–è¯‘å™¨é‡åˆ° <a href="https://docs.python.org/3.3/reference/simple_stmts.html#future-statements">futureè¡¨è¾¾å¼</a> æ—¶ï¼Œå®ƒé¦–å…ˆåœ¨ <code>future.c</code> ä¸­è¿è¡Œç›¸åº”çš„ä»£ç ï¼Œç„¶åå†å¯¹å…¶è¿›è¡Œå¤„ç†ä½œä¸ºæ­£å¸¸çš„<code>import</code>è¡¨è¾¾å¼ã€‚</li>
</ul>
<hr />
<h3 id="lets-meet-friendly-language-uncle-for-life">&gt; Let's meet Friendly Language Uncle For Life/è®©ç”Ÿæ´»æ›´å‹å¥½ *</h3>
<!-- Example ID: 6427fae6-e959-462d-85da-ce4c94ce41be --->

<p><strong>Output (Python 3.x)</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">barry_as_FLUFL</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s2">&quot;Ruby&quot;</span> <span class="o">!=</span> <span class="s2">&quot;Python&quot;</span> <span class="c1"># è¿™é‡Œæ²¡ä»€ä¹ˆç–‘é—®</span>
  <span class="n">File</span> <span class="s2">&quot;some_file.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="s2">&quot;Ruby&quot;</span> <span class="o">!=</span> <span class="s2">&quot;Python&quot;</span>
              <span class="o">^</span>
<span class="ne">SyntaxError</span><span class="p">:</span> <span class="n">invalid</span> <span class="n">syntax</span>

<span class="o">&gt;&gt;&gt;</span> <span class="s2">&quot;Ruby&quot;</span> <span class="o">&lt;&gt;</span> <span class="s2">&quot;Python&quot;</span>
<span class="kc">True</span>
</code></pre></div></p>
<p>è¿™å°±å¯¹äº†.</p>
<h4 id="_53">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>ç›¸å…³çš„ <a href="https://www.python.org/dev/peps/pep-0401/">PEP-401</a> å‘å¸ƒäº 2009å¹´4æœˆ1æ—¥ (æ‰€ä»¥ä½ ç°åœ¨çŸ¥é“è¿™æ„å‘³ç€ä»€ä¹ˆäº†å§).</li>
<li>å¼•ç”¨ PEP-401<blockquote>
<p>æ„è¯†åˆ° Python 3.0 é‡Œçš„ != è¿ç®—ç¬¦æ˜¯ä¸€ä¸ªä¼šå¼•èµ·æ‰‹æŒ‡ç–¼ç—›çš„ææ€–é”™è¯¯, FLUFL å°† &lt;&gt; è¿ç®—ç¬¦æ¢å¤ä¸ºå”¯ä¸€å†™æ³•.</p>
</blockquote>
</li>
<li>Uncle Barry åœ¨ PEP ä¸­è¿˜åˆ†äº«äº†å…¶ä»–ä¸œè¥¿; ä½ å¯ä»¥åœ¨<a href="https://www.python.org/dev/peps/pep-0401/">è¿™é‡Œ</a>è·å¾—ä»–ä»¬.</li>
<li>(è¯‘: è™½ç„¶æ–‡æ¡£ä¸­æ²¡å†™ï¼Œä½†åº”è¯¥æ˜¯åªèƒ½åœ¨äº¤äº’è§£é‡Šå™¨ä¸­ä½¿ç”¨.)</li>
<li>
<p>å®ƒåœ¨äº¤äº’å¼ç¯å¢ƒä¸­æ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯å½“æ‚¨é€šè¿‡ python æ–‡ä»¶è¿è¡Œæ—¶å®ƒä¼šå¼•å‘ <code>SyntaxError</code>ï¼ˆè¯·å‚é˜…æ­¤ <a href="https://github.com/satwikkansal/wtfpython/issues/94">é—®é¢˜</a>ï¼‰ã€‚æ‚¨å¯ä»¥å°†è¡¨è¾¾å¼ä½œä¸º<code>eval</code> æˆ– <code>compile</code> å‚æ•°ä¸­ä½¿ç”¨ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">barry_as_FLUFL</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;&quot;Ruby&quot; &lt;&gt; &quot;Python&quot;&#39;</span><span class="p">))</span>
</code></pre></div>
</li>
</ul>
<hr />
<h3 id="even-python-understands-that-love-is-complicatedpython">&gt; Even Python understands that love is complicated/è¿Pythonä¹ŸçŸ¥é“çˆ±æ˜¯éš¾è¨€çš„ *</h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">this</span>
</code></pre></div>
<p>ç­‰ç­‰, <strong>this</strong> æ˜¯ä»€ä¹ˆ? <code>this</code> æ˜¯çˆ± :heart:</p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code>The Zen of Python, by Tim Peters

Beautiful is better than ugly.
ä¼˜ç¾èƒœäºä¸‘é™‹ï¼ˆPython ä»¥ç¼–å†™ä¼˜ç¾çš„ä»£ç ä¸ºç›®æ ‡ï¼‰
Explicit is better than implicit.
æ˜äº†èƒœäºæ™¦æ¶©ï¼ˆä¼˜ç¾çš„ä»£ç åº”å½“æ˜¯æ˜äº†çš„ï¼Œå‘½åè§„èŒƒï¼Œé£æ ¼ç›¸ä¼¼ï¼‰
Simple is better than complex.
ç®€æ´èƒœäºå¤æ‚ï¼ˆä¼˜ç¾çš„ä»£ç åº”å½“æ˜¯ç®€æ´çš„ï¼Œä¸è¦æœ‰å¤æ‚çš„å†…éƒ¨å®ç°ï¼‰
Complex is better than complicated.
å¤æ‚èƒœäºå‡Œä¹±ï¼ˆå¦‚æœå¤æ‚ä¸å¯é¿å…ï¼Œé‚£ä»£ç é—´ä¹Ÿä¸èƒ½æœ‰éš¾æ‡‚çš„å…³ç³»ï¼Œè¦ä¿æŒæ¥å£ç®€æ´ï¼‰
Flat is better than nested.
æ‰å¹³èƒœäºåµŒå¥—ï¼ˆä¼˜ç¾çš„ä»£ç åº”å½“æ˜¯æ‰å¹³çš„ï¼Œä¸èƒ½æœ‰å¤ªå¤šçš„åµŒå¥—ï¼‰
Sparse is better than dense.
é—´éš”èƒœäºç´§å‡‘ï¼ˆä¼˜ç¾çš„ä»£ç æœ‰é€‚å½“çš„é—´éš”ï¼Œä¸è¦å¥¢æœ›ä¸€è¡Œä»£ç è§£å†³é—®é¢˜ï¼‰
Readability counts.
å¯è¯»æ€§å¾ˆé‡è¦ï¼ˆä¼˜ç¾çš„ä»£ç ä¸€å®šæ˜¯å¯è¯»çš„ï¼‰
Special cases aren&#39;t special enough to break the rules.
æ²¡æœ‰ç‰¹ä¾‹ç‰¹æ®Šåˆ°éœ€è¦è¿èƒŒè¿™äº›è§„åˆ™ï¼ˆè¿™äº›è§„åˆ™è‡³é«˜æ— ä¸Šï¼‰
Although practicality beats purity.
å°½ç®¡æˆ‘ä»¬æ›´å€¾å‘äºå®ç”¨æ€§
Errors should never pass silently.
ä¸è¦å®‰é™çš„åŒ…å®¹æ‰€æœ‰é”™è¯¯
Unless explicitly silenced.
é™¤éä½ ç¡®å®šéœ€è¦è¿™æ ·åšï¼ˆç²¾å‡†åœ°æ•è·å¼‚å¸¸ï¼Œä¸å†™ except:pass é£æ ¼çš„ä»£ç ï¼‰
In the face of ambiguity, refuse the temptation to guess.
æ‹’ç»è¯±æƒ‘ä½ å»çŒœæµ‹çš„æš§æ˜§äº‹ç‰©
There should be one-- and preferably only one --obvious way to do it.
è€Œæ˜¯å°½é‡æ‰¾ä¸€ç§ï¼Œæœ€å¥½æ˜¯å”¯ä¸€ä¸€ç§æ˜æ˜¾çš„è§£å†³æ–¹æ¡ˆï¼ˆå¦‚æœä¸ç¡®å®šï¼Œå°±ç”¨ç©·ä¸¾æ³•ï¼‰
Although that way may not be obvious at first unless you&#39;re Dutch.
è™½ç„¶è¿™å¹¶ä¸å®¹æ˜“ï¼Œå› ä¸ºä½ ä¸æ˜¯ Python ä¹‹çˆ¶ï¼ˆè¿™é‡Œçš„ Dutch æ˜¯æŒ‡ Guido ï¼‰
Now is better than never.
ç°åœ¨è¡ŒåŠ¨å¥½è¿‡æ°¸è¿œä¸è¡ŒåŠ¨
Although never is often better than *right* now.
å°½ç®¡ä¸è¡ŒåŠ¨è¦å¥½è¿‡é²è½è¡ŒåŠ¨
If the implementation is hard to explain, it&#39;s a bad idea.
å¦‚æœä½ æ— æ³•å‘äººæè¿°ä½ çš„æ–¹æ¡ˆï¼Œé‚£è‚¯å®šä¸æ˜¯ä¸€ä¸ªå¥½æ–¹æ¡ˆï¼›
If the implementation is easy to explain, it may be a good idea.
å¦‚æœä½ èƒ½è½»æ¾å‘äººæè¿°ä½ çš„æ–¹æ¡ˆï¼Œé‚£ä¹Ÿè®¸ä¼šæ˜¯ä¸€ä¸ªå¥½æ–¹æ¡ˆï¼ˆæ–¹æ¡ˆæµ‹è¯„æ ‡å‡†ï¼‰
Namespaces are one honking great idea -- let&#39;s do more of those!
å‘½åç©ºé—´æ˜¯ä¸€ç§ç»å¦™çš„ç†å¿µï¼Œæˆ‘ä»¬åº”å½“å¤šåŠ åˆ©ç”¨ï¼ˆå€¡å¯¼ä¸å·å¬ï¼‰
</code></pre></div></p>
<p>è¿™æ˜¯ Python ä¹‹ç¦…!</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">love</span> <span class="o">=</span> <span class="n">this</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">this</span> <span class="ow">is</span> <span class="n">love</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">love</span> <span class="ow">is</span> <span class="kc">True</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">love</span> <span class="ow">is</span> <span class="kc">False</span>
<span class="kc">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">love</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">True</span> <span class="ow">or</span> <span class="kc">False</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">love</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">True</span> <span class="ow">or</span> <span class="kc">False</span><span class="p">;</span> <span class="n">love</span> <span class="ow">is</span> <span class="n">love</span>  <span class="c1"># çˆ±æ˜¯éš¾è¨€çš„</span>
<span class="kc">True</span>
</code></pre></div>
<h4 id="_54">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li><code>this</code> æ¨¡å—æ˜¯å…³äº Python ä¹‹ç¦…çš„å¤æ´»èŠ‚å½©è›‹ (<a href="https://www.python.org/dev/peps/pep-0020">PEP 20</a>).</li>
<li>å¦‚æœä½ è®¤ä¸ºè¿™å·²ç»å¤Ÿæœ‰è¶£çš„äº†, å¯ä»¥çœ‹çœ‹ <a href="https://hg.python.org/cpython/file/c3896275c0f6/Lib/this.py">this.py</a> çš„å®ç°. æœ‰è¶£çš„æ˜¯, Python ä¹‹ç¦…çš„å®ç°ä»£ç è¿åäº†ä»–è‡ªå·± (è¿™å¯èƒ½æ˜¯å”¯ä¸€ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µçš„åœ°æ–¹).
*
è‡³äº <code>love is not True or False; love is love</code>, æ„å¤–å´åˆä¸è¨€è€Œå–».</li>
</ul>
<hr />
<h3 id="yes-it-exists">&gt; Yes, it exists!/æ˜¯çš„, å®ƒå­˜åœ¨!</h3>
<p><strong>å¾ªç¯çš„ <code>else</code>.</strong> ä¸€ä¸ªå…¸å‹çš„ä¾‹å­:</p>
<div class="highlight"><pre><span></span><code>  <span class="k">def</span> <span class="nf">does_exists_num</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">to_find</span><span class="p">):</span>
      <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
          <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="n">to_find</span><span class="p">:</span>
              <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exists!&quot;</span><span class="p">)</span>
              <span class="k">break</span>
      <span class="k">else</span><span class="p">:</span>
          <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Does not exist&quot;</span><span class="p">)</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">does_exists_num</span><span class="p">(</span><span class="n">some_list</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">Exists</span><span class="err">!</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">does_exists_num</span><span class="p">(</span><span class="n">some_list</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">Does</span> <span class="ow">not</span> <span class="n">exist</span>
</code></pre></div></p>
<p><strong>å¼‚å¸¸çš„ <code>else</code> .</strong> ä¾‹,</p>
<div class="highlight"><pre><span></span><code><span class="k">try</span><span class="p">:</span>
    <span class="k">pass</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exception occurred!!!&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Try block executed successfully...&quot;</span><span class="p">)</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="n">Try</span> <span class="n">block</span> <span class="n">executed</span> <span class="n">successfully</span><span class="o">...</span>
</code></pre></div></p>
<h4 id="_55">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>å¾ªç¯åçš„ <code>else</code> å­å¥åªä¼šåœ¨å¾ªç¯æ²¡æœ‰è§¦å‘ <code>break</code> è¯­å¥, æ­£å¸¸ç»“æŸçš„æƒ…å†µä¸‹æ‰ä¼šæ‰§è¡Œ.</li>
<li>try ä¹‹åçš„ <code>else</code> å­å¥ä¹Ÿè¢«ç§°ä¸º "å®Œæˆå­å¥", å› ä¸ºåœ¨ <code>try</code> è¯­å¥ä¸­åˆ°è¾¾ <code>else</code> å­å¥æ„å‘³ç€tryå—å®é™…ä¸Šå·²æˆåŠŸå®Œæˆ.</li>
</ul>
<hr />
<h3 id="ellipsis">&gt; Ellipsis/çœç•¥ *</h3>
<!-- Example ID: 969b7100-ab3d-4a7d-ad7d-a6be16181b2b --->

<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">some_func</span><span class="p">():</span>
    <span class="bp">Ellipsis</span>
</code></pre></div>
<p><strong>Output</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_func</span><span class="p">()</span>
<span class="c1"># æ²¡æœ‰è¾“å‡ºï¼Œä¹Ÿæ²¡æœ‰æŠ¥é”™</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">SomeRandomString</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">NameError</span><span class="p">:</span> <span class="n">name</span> <span class="s1">&#39;SomeRandomString&#39;</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">defined</span>

<span class="o">&gt;&gt;&gt;</span> <span class="bp">Ellipsis</span>
<span class="bp">Ellipsis</span>
</code></pre></div></p>
<h4 id="_56">ğŸ’¡ è¯´æ˜</h4>
<ul>
<li>
<p>åœ¨ Python ä¸­ï¼Œ<code>Ellipsis</code> æ˜¯ä¸€ä¸ªå…¨å±€å¯ç”¨çš„å†…ç½®å¯¹è±¡ï¼Œç›¸å½“äº<code>...</code>ã€‚</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="o">...</span>
<span class="bp">Ellipsis</span>
</code></pre></div>
</li>
<li>
<p>çœç•¥å·å¯ç”¨äºå¤šç§ç”¨é€”ï¼Œ</p>
<ul>
<li>ä½œä¸ºå°šæœªç¼–å†™çš„ä»£ç çš„å ä½ç¬¦ï¼ˆå°±åƒ<code>pass</code>è¯­å¥ï¼‰</li>
<li>åœ¨åˆ‡ç‰‡è¯­æ³•ä¸­è¡¨ç¤ºå®Œæ•´åˆ‡ç‰‡çš„å…¶ä½™ç»´åº¦</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">three_dimensional_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">array</span><span class="p">([</span>
    <span class="p">[</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="p">],</span>

    <span class="p">[</span>
        <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
    <span class="p">]</span>
<span class="p">])</span>
</code></pre></div>
<p>æ‰€ä»¥æˆ‘ä»¬çš„ <code>three_dimensional_array</code> æ˜¯ä¸€ä¸ªæ•°ç»„çš„æ•°ç»„çš„æ•°ç»„ã€‚å‡è®¾æˆ‘ä»¬è¦æ‰“å°æ‰€æœ‰æœ€å†…å±‚æ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼ˆç´¢å¼• <code>1</code>ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Ellipsis ç»•è¿‡æ‰€æœ‰å‰é¢çš„ç»´åº¦</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">three_dimensional_array</span><span class="p">[:,:,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">three_dimensional_array</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="c1"># ä½¿ç”¨Ellipsis.</span>
<span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]])</span>
</code></pre></div>
<p>æ³¨æ„ï¼šè¿™é€‚ç”¨äºä»»æ„æ•°é‡çš„ç»´åº¦ã€‚æ‚¨ç”šè‡³å¯ä»¥åœ¨ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªç»´åº¦ä¸­é€‰æ‹©åˆ‡ç‰‡å¹¶ä»¥è¿™ç§æ–¹å¼å¿½ç•¥ä¸­é—´çš„åˆ‡ç‰‡(<code>n_dimensional_array[firs_dim_slice, ..., last_dim_slice]</code>)</p>
<ul>
<li>
<p>åœ¨ <a href="https://docs.python.org/3/library/typing.html">ç±»å‹æç¤º</a>ä¸­ä»…è¡¨ç¤ºç±»å‹çš„ä¸€éƒ¨åˆ†ï¼ˆå¦‚ <code>(Callable[..., int]</code> æˆ– <code>Tuple[ str, ...]</code>))</p>
</li>
<li>
<p>æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨çœç•¥å·ä½œä¸ºé»˜è®¤å‡½æ•°å‚æ•°ï¼ˆåœ¨æ‚¨æƒ³è¦åŒºåˆ†â€œæ— å‚æ•°â€å’Œâ€œä¼ é€’Noneå€¼â€åœºæ™¯çš„æƒ…å†µä¸‹ï¼‰ã€‚</p>
</li>
</ul>
</li>
</ul>
<hr />
<h3 id="inpinity">&gt; Inpinity/æ— é™ *</h3>
<p>è‹±æ–‡æ‹¼å†™æ˜¯æœ‰æ„çš„, è¯·ä¸è¦ä¸ºæ­¤æäº¤è¡¥ä¸.
(è¯‘: è¿™é‡Œæ˜¯ä¸ºäº†çªå‡º Python ä¸­æ— é™çš„å®šä¹‰ä¸<a href="https://en.wikipedia.org/wiki/Pi">Pi</a>æœ‰å…³, æ‰€ä»¥å°†ä¸¤ä¸ªå•è¯æ‹¼æ¥äº†.)</p>
<p><strong>Output (Python 3.x):</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">infinity</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;infinity&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">hash</span><span class="p">(</span><span class="n">infinity</span><span class="p">)</span>
<span class="mi">314159</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">hash</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;-inf&#39;</span><span class="p">))</span>
<span class="o">-</span><span class="mi">314159</span>
</code></pre></div></p>
<h4 id="_57">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>infinity çš„å“ˆå¸Œå€¼æ˜¯ 10âµ x Ï€.</li>
<li>æœ‰æ„æ€çš„æ˜¯, <code>float('-inf')</code> çš„å“ˆå¸Œå€¼åœ¨ Python 3 ä¸­æ˜¯ "-10âµ x Ï€"  , è€Œåœ¨ Python 2 ä¸­æ˜¯ "-10âµ x e".</li>
</ul>
<hr />
<h3 id="lets-mangle">&gt; Let's mangle/ä¿®é¥°æ—¶é—´! *</h3>
<!-- Example ID: 37146d2d-9e67-43a9-8729-3c17934b910c --->

<p>1.
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Yo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__honey</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bro</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">Yo</span><span class="p">()</span><span class="o">.</span><span class="n">bro</span>
<span class="kc">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Yo</span><span class="p">()</span><span class="o">.</span><span class="n">__honey</span>
<span class="ne">AttributeError</span><span class="p">:</span> <span class="s1">&#39;Yo&#39;</span> <span class="nb">object</span> <span class="n">has</span> <span class="n">no</span> <span class="n">attribute</span> <span class="s1">&#39;__honey&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Yo</span><span class="p">()</span><span class="o">.</span><span class="n">_Yo__honey</span>
<span class="kc">True</span>
</code></pre></div></p>
<p>2.
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Yo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># è¿™æ¬¡è¯•è¯•å¯¹ç§°å½¢å¼</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__honey__</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bro</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">Yo</span><span class="p">()</span><span class="o">.</span><span class="n">bro</span>
<span class="kc">True</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">Yo</span><span class="p">()</span><span class="o">.</span><span class="n">_Yo__honey__</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">AttributeError</span><span class="p">:</span> <span class="s1">&#39;Yo&#39;</span> <span class="nb">object</span> <span class="n">has</span> <span class="n">no</span> <span class="n">attribute</span> <span class="s1">&#39;_Yo__honey__&#39;</span>
</code></pre></div></p>
<p>ä¸ºä»€ä¹ˆ <code>Yo()._Yo__honey</code> èƒ½è¿è¡Œ? åªæœ‰å°åº¦äººç†è§£.(è¯‘: è¿™ä¸ªæ¢—å¯èƒ½æ˜¯æŒ‡å°åº¦éŸ³ä¹äºº<a href="https://en.wikipedia.org/wiki/Yo_Yo_Honey_Singh">Yo Yo Honey Singh</a>)</p>
<p>3.</p>
<div class="highlight"><pre><span></span><code><span class="n">_A__variable</span> <span class="o">=</span> <span class="s2">&quot;Some value&quot;</span>

<span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">some_func</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">__variable</span> <span class="c1"># æ²¡åœ¨ä»»ä½•åœ°æ–¹åˆå§‹åŒ–</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">A</span><span class="p">()</span><span class="o">.</span><span class="n">__variable</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">AttributeError</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span> <span class="nb">object</span> <span class="n">has</span> <span class="n">no</span> <span class="n">attribute</span> <span class="s1">&#39;__variable&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">A</span><span class="p">()</span><span class="o">.</span><span class="n">some_func</span><span class="p">()</span>
<span class="s1">&#39;Some value&#39;</span>
</code></pre></div></p>
<h4 id="_58">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Name_mangling">å‘½åä¿®é¥°</a> ç”¨äºé¿å…ä¸åŒå‘½åç©ºé—´ä¹‹é—´åç§°å†²çª.</li>
<li>åœ¨ Python ä¸­, è§£é‡Šå™¨ä¼šé€šè¿‡ç»™ç±»ä¸­ä»¥ <code>__</code> (åŒä¸‹åˆ’çº¿)å¼€å¤´ä¸”ç»“å°¾æœ€å¤šåªæœ‰ä¸€ä¸ªä¸‹åˆ’çº¿çš„ç±»æˆå‘˜åç§°åŠ ä¸Š<code>_NameOfTheClass</code> æ¥ä¿®é¥°(mangles)åç§°.</li>
<li>æ‰€ä»¥, è¦è®¿é—® <code>__honey</code> å¯¹è±¡,æˆ‘ä»¬éœ€è¦åŠ ä¸Š <code>_Yo</code> ä»¥é˜²æ­¢ä¸å…¶ä»–ç±»ä¸­å®šä¹‰çš„ç›¸åŒåç§°çš„å±æ€§å‘ç”Ÿå†²çª.</li>
<li>ä½†æ˜¯ä¸ºä»€ä¹ˆå®ƒåœ¨ç¬¬äºŒä¸ªç‰‡æ®µä¸­ä¸èµ·ä½œç”¨ï¼Ÿ å› ä¸ºå‘½åä¿®é¥°æ’é™¤äº†ä»¥åŒä¸‹åˆ’çº¿ç»“å°¾çš„åç§°ã€‚</li>
<li>ç¬¬ä¸‰ä¸ªç‰‡æ®µä¹Ÿæ˜¯å‘½åä¿®é¥°çš„ç»“æœã€‚ <code>return __variable</code> è¯­å¥ä¸­çš„ <code>__variable</code> åç§°è¢«ä¿®æ”¹ä¸º <code>_A__variable</code>ï¼Œè¿™ä¹Ÿæ°å¥½æ˜¯æˆ‘ä»¬åœ¨å¤–éƒ¨ä½œç”¨åŸŸä¸­å£°æ˜çš„å˜é‡çš„åç§°ã€‚</li>
<li>æ­¤å¤–ï¼Œå¦‚æœä¿®é¥°åçš„å˜é‡åè¶…è¿‡255ä¸ªå­—ç¬¦ï¼Œåˆ™ä¼šè¿›è¡Œæˆªæ–­ã€‚</li>
</ul>
<hr />
<h2 id="section-appearances-are-deceptive">Section: Appearances are deceptive!/å¤–è¡¨æ˜¯é ä¸ä½çš„!</h2>
<h3 id="skipping-lines">&gt; Skipping lines?/è·³è¿‡ä¸€è¡Œ?</h3>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">11</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">valuĞµ</span> <span class="o">=</span> <span class="mi">32</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">value</span>
<span class="mi">11</span>
</code></pre></div></p>
<p>ä»€ä¹ˆé¬¼?</p>
<p><strong>æ³¨æ„:</strong> å¦‚æœä½ æƒ³è¦é‡ç°çš„è¯æœ€ç®€å•çš„æ–¹æ³•æ˜¯ç›´æ¥å¤åˆ¶ä¸Šé¢çš„ä»£ç ç‰‡æ®µåˆ°ä½ çš„æ–‡ä»¶æˆ–å‘½ä»¤è¡Œé‡Œ.</p>
<h4 id="_59">ğŸ’¡ è¯´æ˜:</h4>
<p>ä¸€äº›éè¥¿æ–¹å­—ç¬¦è™½ç„¶çœ‹èµ·æ¥å’Œè‹±è¯­å­—æ¯ç›¸åŒ, ä½†ä¼šè¢«è§£é‡Šå™¨è¯†åˆ«ä¸ºä¸åŒçš„å­—æ¯.</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;Ğµ&#39;</span><span class="p">)</span> <span class="c1"># è¥¿é‡Œå°”è¯­çš„ &#39;e&#39; (Ye)</span>
<span class="mi">1077</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">ord</span><span class="p">(</span><span class="s1">&#39;e&#39;</span><span class="p">)</span> <span class="c1"># æ‹‰ä¸è¯­çš„ &#39;e&#39;, ç”¨äºè‹±æ–‡å¹¶ä½¿ç”¨æ ‡å‡†é”®ç›˜è¾“å…¥</span>
<span class="mi">101</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;Ğµ&#39;</span> <span class="o">==</span> <span class="s1">&#39;e&#39;</span>
<span class="kc">False</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">42</span> <span class="c1"># æ‹‰ä¸è¯­ e</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">valuĞµ</span> <span class="o">=</span> <span class="mi">23</span> <span class="c1"># è¥¿é‡Œå°”è¯­ &#39;e&#39;, Python 2.x çš„è§£é‡Šå™¨åœ¨è¿™ä¼šæŠ›å‡º `SyntaxError` å¼‚å¸¸</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">value</span>
<span class="mi">42</span>
</code></pre></div>
<p>å†…ç½®çš„ <code>ord()</code> å‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªå­—ç¬¦çš„ Unicode <a href="https://en.wikipedia.org/wiki/Code_point">ä»£ç ç‚¹</a>, è¿™é‡Œè¥¿é‡Œå°”è¯­ 'e' å’Œæ‹‰ä¸è¯­ 'e' çš„ä»£ç ç‚¹ä¸åŒè¯å®äº†ä¸Šè¿°ä¾‹å­.</p>
<hr />
<h3 id="teleportation">&gt; Teleportation/ç©ºé—´ç§»åŠ¨ *</h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">energy_send</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="c1"># åˆå§‹åŒ–ä¸€ä¸ª numpy æ•°ç»„</span>
    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)])</span>

<span class="k">def</span> <span class="nf">energy_receive</span><span class="p">():</span>
    <span class="c1"># è¿”å›ä¸€ä¸ªç©ºçš„ numpy æ•°ç»„</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">energy_send</span><span class="p">(</span><span class="mf">123.456</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">energy_receive</span><span class="p">()</span>
<span class="mf">123.456</span>
</code></pre></div></p>
<p>è°æ¥ç»™æˆ‘å‘ä¸ªè¯ºè´å°”å¥–?</p>
<h4 id="_60">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>æ³¨æ„åœ¨ <code>energy_send</code> å‡½æ•°ä¸­åˆ›å»ºçš„ numpy æ•°ç»„å¹¶æ²¡æœ‰è¿”å›, å› æ­¤å†…å­˜ç©ºé—´è¢«é‡Šæ”¾å¹¶å¯ä»¥è¢«é‡æ–°åˆ†é….</li>
<li><code>numpy.empty()</code> ç›´æ¥è¿”å›ä¸‹ä¸€æ®µç©ºé—²å†…å­˜ï¼Œè€Œä¸é‡æ–°åˆå§‹åŒ–. è€Œè¿™ä¸ªå†…å­˜ç‚¹æ°å¥½å°±æ˜¯åˆšåˆšé‡Šæ”¾çš„é‚£ä¸ª(é€šå¸¸æƒ…å†µä¸‹, å¹¶ä¸ç»å¯¹).</li>
</ul>
<hr />
<h3 id="well-something-is-fishy">&gt; Well, something is fishy.../å—¯ï¼Œæœ‰äº›å¯ç–‘...</h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    ä¸€ä¸ªé€šè¿‡åŠ æ³•è®¡ç®—å¹³æ–¹çš„ç®€å•å‡½æ•°.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sum_so_far</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">counter</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="n">sum_so_far</span> <span class="o">=</span> <span class="n">sum_so_far</span> <span class="o">+</span> <span class="n">x</span>
  <span class="k">return</span> <span class="n">sum_so_far</span>
</code></pre></div>
<p><strong>Output (Python 2.x):</strong></p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">square</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="mi">10</span>
</code></pre></div>
<p>éš¾é“ä¸åº”è¯¥æ˜¯100å—?</p>
<p><strong>æ³¨æ„:</strong> å¦‚æœä½ æ— æ³•é‡ç°, å¯ä»¥å°è¯•è¿è¡Œè¿™ä¸ªæ–‡ä»¶<a href="/mixed_tabs_and_spaces.py">mixed_tabs_and_spaces.py</a>.</p>
<h4 id="_61">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li><strong>ä¸è¦æ··ç”¨åˆ¶è¡¨ç¬¦(tab)å’Œç©ºæ ¼(space)!</strong> åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­, return çš„å‰é¢æ˜¯"1ä¸ªåˆ¶è¡¨ç¬¦", è€Œå…¶ä»–éƒ¨åˆ†çš„ä»£ç å‰é¢æ˜¯ "4ä¸ªç©ºæ ¼".</li>
<li>Pythonæ˜¯è¿™ä¹ˆå¤„ç†åˆ¶è¡¨ç¬¦çš„:<blockquote>
<p>é¦–å…ˆ, åˆ¶è¡¨ç¬¦ä¼šä»å·¦åˆ°å³ä¾æ¬¡è¢«æ›¿æ¢æˆ8ä¸ªç©ºæ ¼, ç›´åˆ°è¢«æ›¿æ¢åçš„å­—ç¬¦æ€»æ•°æ˜¯å…«çš„å€æ•° &lt;...&gt;</p>
</blockquote>
</li>
<li>å› æ­¤, <code>square</code> å‡½æ•°æœ€åä¸€è¡Œçš„åˆ¶è¡¨ç¬¦ä¼šè¢«æ›¿æ¢æˆ8ä¸ªç©ºæ ¼, å¯¼è‡´returnè¯­å¥è¿›å…¥å¾ªç¯è¯­å¥é‡Œé¢.</li>
<li>
<p>Python 3 å¾ˆå‹å¥½, åœ¨è¿™ç§æƒ…å†µä¸‹ä¼šè‡ªåŠ¨æŠ›å‡ºé”™è¯¯.</p>
<p><strong>Output (Python 3.x):</strong>
<div class="highlight"><pre><span></span><code><span class="ne">TabError</span><span class="p">:</span> <span class="n">inconsistent</span> <span class="n">use</span> <span class="n">of</span> <span class="n">tabs</span> <span class="ow">and</span> <span class="n">spaces</span> <span class="ow">in</span> <span class="n">indentation</span>
</code></pre></div></p>
</li>
</ul>
<hr />
<h2 id="section-miscellaneous">Section: Miscellaneous/æ‚é¡¹</h2>
<h3 id="is-faster">&gt; <code>+=</code> is faster/æ›´å¿«çš„ <code>+=</code></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># ç”¨ &quot;+&quot; è¿æ¥ä¸‰ä¸ªå­—ç¬¦ä¸²:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s2">&quot;s1 = s1 + s2 + s3&quot;</span><span class="p">,</span> <span class="n">setup</span><span class="o">=</span><span class="s2">&quot;s1 = &#39; &#39; * 100000; s2 = &#39; &#39; * 100000; s3 = &#39; &#39; * 100000&quot;</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="mf">0.25748300552368164</span>
<span class="c1"># ç”¨ &quot;+=&quot; è¿æ¥ä¸‰ä¸ªå­—ç¬¦ä¸²:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s2">&quot;s1 += s2 + s3&quot;</span><span class="p">,</span> <span class="n">setup</span><span class="o">=</span><span class="s2">&quot;s1 = &#39; &#39; * 100000; s2 = &#39; &#39; * 100000; s3 = &#39; &#39; * 100000&quot;</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="mf">0.012188911437988281</span>
</code></pre></div>
<h4 id="_62">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>è¿æ¥ä¸¤ä¸ªä»¥ä¸Šçš„å­—ç¬¦ä¸²æ—¶ <code>+=</code> æ¯” <code>+</code> æ›´å¿«, å› ä¸ºåœ¨è®¡ç®—è¿‡ç¨‹ä¸­ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸² (ä¾‹å¦‚, <code>s1 += s2 + s3</code> ä¸­çš„ <code>s1</code>) ä¸ä¼šè¢«é”€æ¯.(è¯‘: å°±æ˜¯ <code>+=</code> æ‰§è¡Œçš„æ˜¯è¿½åŠ æ“ä½œï¼Œå°‘äº†ä¸€ä¸ªé”€æ¯æ–°å»ºçš„åŠ¨ä½œ.)</li>
</ul>
<hr />
<h3 id="lets-make-a-giant-string">&gt; Let's make a giant string!/æ¥åšä¸ªå·¨å¤§çš„å­—ç¬¦ä¸²å§ï¼</h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_string_with_plus</span><span class="p">(</span><span class="n">iters</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iters</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s2">&quot;xyz&quot;</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="o">*</span><span class="n">iters</span>

<span class="k">def</span> <span class="nf">add_bytes_with_plus</span><span class="p">(</span><span class="n">iters</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iters</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="sa">b</span><span class="s2">&quot;xyz&quot;</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="o">*</span><span class="n">iters</span>

<span class="k">def</span> <span class="nf">add_string_with_format</span><span class="p">(</span><span class="n">iters</span><span class="p">):</span>
    <span class="n">fs</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">*</span><span class="n">iters</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="p">([</span><span class="s2">&quot;xyz&quot;</span><span class="p">]</span><span class="o">*</span><span class="n">iters</span><span class="p">))</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="o">*</span><span class="n">iters</span>

<span class="k">def</span> <span class="nf">add_string_with_join</span><span class="p">(</span><span class="n">iters</span><span class="p">):</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iters</span><span class="p">):</span>
        <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;xyz&quot;</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="o">*</span><span class="n">iters</span>

<span class="k">def</span> <span class="nf">convert_list_to_string</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">iters</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="o">*</span><span class="n">iters</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">timeit</span><span class="p">(</span><span class="n">add_string_with_plus</span><span class="p">(</span><span class="mi">10000</span><span class="p">))</span>
<span class="mi">1000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">972</span> <span class="n">Âµs</span> <span class="n">per</span> <span class="n">loop</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">timeit</span><span class="p">(</span><span class="n">add_bytes_with_plus</span><span class="p">(</span><span class="mi">10000</span><span class="p">))</span>
<span class="mi">1000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">815</span> <span class="n">Âµs</span> <span class="n">per</span> <span class="n">loop</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">timeit</span><span class="p">(</span><span class="n">add_string_with_format</span><span class="p">(</span><span class="mi">10000</span><span class="p">))</span>
<span class="mi">1000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">508</span> <span class="n">Âµs</span> <span class="n">per</span> <span class="n">loop</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">timeit</span><span class="p">(</span><span class="n">add_string_with_join</span><span class="p">(</span><span class="mi">10000</span><span class="p">))</span>
<span class="mi">1000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">878</span> <span class="n">Âµs</span> <span class="n">per</span> <span class="n">loop</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;xyz&quot;</span><span class="p">]</span><span class="o">*</span><span class="mi">10000</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">timeit</span><span class="p">(</span><span class="n">convert_list_to_string</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="mi">10000</span><span class="p">))</span>
<span class="mi">10000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">80</span> <span class="n">Âµs</span> <span class="n">per</span> <span class="n">loop</span>
</code></pre></div></p>
<p>è®©æˆ‘ä»¬å°†è¿­ä»£æ¬¡æ•°å¢åŠ 10å€.</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">timeit</span><span class="p">(</span><span class="n">add_string_with_plus</span><span class="p">(</span><span class="mi">100000</span><span class="p">))</span> <span class="c1"># æ‰§è¡Œæ—¶é—´çº¿æ€§å¢åŠ </span>
<span class="mi">100</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mf">9.75</span> <span class="n">ms</span> <span class="n">per</span> <span class="n">loop</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">timeit</span><span class="p">(</span><span class="n">add_bytes_with_plus</span><span class="p">(</span><span class="mi">100000</span><span class="p">))</span> <span class="c1"># äºŒæ¬¡å¢åŠ </span>
<span class="mi">1000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">974</span> <span class="n">ms</span> <span class="n">per</span> <span class="n">loop</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">timeit</span><span class="p">(</span><span class="n">add_string_with_format</span><span class="p">(</span><span class="mi">100000</span><span class="p">))</span> <span class="c1"># çº¿æ€§å¢åŠ </span>
<span class="mi">100</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mf">5.25</span> <span class="n">ms</span> <span class="n">per</span> <span class="n">loop</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">timeit</span><span class="p">(</span><span class="n">add_string_with_join</span><span class="p">(</span><span class="mi">100000</span><span class="p">))</span> <span class="c1"># çº¿æ€§å¢åŠ </span>
<span class="mi">100</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mf">9.85</span> <span class="n">ms</span> <span class="n">per</span> <span class="n">loop</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;xyz&quot;</span><span class="p">]</span><span class="o">*</span><span class="mi">100000</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">timeit</span><span class="p">(</span><span class="n">convert_list_to_string</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="mi">100000</span><span class="p">))</span> <span class="c1"># çº¿æ€§å¢åŠ </span>
<span class="mi">1000</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">723</span> <span class="n">Âµs</span> <span class="n">per</span> <span class="n">loop</span>
</code></pre></div>
<h4 id="_63">ğŸ’¡ è¯´æ˜:</h4>
<ul>
<li>ä½ å¯ä»¥åœ¨è¿™è·å¾—æ›´å¤š <a href="https://docs.python.org/3/library/timeit.html">timeit</a> çš„ç›¸å…³ä¿¡æ¯. å®ƒé€šå¸¸ç”¨äºè¡¡é‡ä»£ç ç‰‡æ®µçš„æ‰§è¡Œæ—¶é—´.</li>
<li>ä¸è¦ç”¨ <code>+</code> å»ç”Ÿæˆè¿‡é•¿çš„å­—ç¬¦ä¸², åœ¨ Python ä¸­, <code>str</code> æ˜¯ä¸å¯å˜çš„, æ‰€ä»¥åœ¨æ¯æ¬¡è¿æ¥ä¸­ä½ éƒ½è¦æŠŠå·¦å³ä¸¤ä¸ªå­—ç¬¦ä¸²å¤åˆ¶åˆ°æ–°çš„å­—ç¬¦ä¸²ä¸­. å¦‚æœä½ è¿æ¥å››ä¸ªé•¿åº¦ä¸º10çš„å­—ç¬¦ä¸², ä½ éœ€è¦æ‹·è´ (10+10) + ((10+10)+10) + (((10+10)+10)+10) = 90 ä¸ªå­—ç¬¦è€Œä¸æ˜¯ 40 ä¸ªå­—ç¬¦. éšç€å­—ç¬¦ä¸²çš„æ•°é‡å’Œå¤§å°çš„å¢åŠ , æƒ…å†µä¼šå˜å¾—è¶Šå‘çš„ç³Ÿç³• (å°±åƒ<code>add_bytes_with_plus</code> å‡½æ•°çš„æ‰§è¡Œæ—¶é—´ä¸€æ ·)</li>
<li>å› æ­¤, æ›´å»ºè®®ä½¿ç”¨ <code>.format.</code> æˆ– <code>%</code> è¯­æ³• (ä½†æ˜¯, å¯¹äºçŸ­å­—ç¬¦ä¸², å®ƒä»¬æ¯” <code>+</code> ç¨æ…¢ä¸€ç‚¹).</li>
<li>åˆæˆ–è€…, å¦‚æœä½ æ‰€éœ€çš„å†…å®¹å·²ç»ä»¥å¯è¿­ä»£å¯¹è±¡çš„å½¢å¼æä¾›äº†, ä½¿ç”¨ <code>''.join(å¯è¿­ä»£å¯¹è±¡)</code> è¦å¿«å¤šäº†.</li>
<li><code>add_string_with_plus</code> çš„æ‰§è¡Œæ—¶é—´æ²¡æœ‰åƒ <code>add_bytes_with_plus</code> ä¸€æ ·å‡ºç°äºŒæ¬¡å¢åŠ æ˜¯å› ä¸ºè§£é‡Šå™¨ä¼šå¦‚åŒä¸Šä¸€ä¸ªä¾‹å­æ‰€è®¨è®ºçš„ä¸€æ ·ä¼˜åŒ– <code>+=</code>. ç”¨ <code>s = s + "x" + "y" + "z"</code> æ›¿ä»£ <code>s += "xyz"</code> çš„è¯, æ‰§è¡Œæ—¶é—´å°±ä¼šäºŒæ¬¡å¢åŠ äº†.
  <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_string_with_plus</span><span class="p">(</span><span class="n">iters</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iters</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="s2">&quot;x&quot;</span> <span class="o">+</span> <span class="s2">&quot;y&quot;</span> <span class="o">+</span> <span class="s2">&quot;z&quot;</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="o">*</span><span class="n">iters</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">timeit</span><span class="p">(</span><span class="n">add_string_with_plus</span><span class="p">(</span><span class="mi">10000</span><span class="p">))</span>
<span class="mi">100</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mf">9.87</span> <span class="n">ms</span> <span class="n">per</span> <span class="n">loop</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">timeit</span><span class="p">(</span><span class="n">add_string_with_plus</span><span class="p">(</span><span class="mi">100000</span><span class="p">))</span> <span class="c1"># æ‰§è¡Œæ—¶é—´äºŒæ¬¡å¢åŠ </span>
<span class="mi">1</span> <span class="n">loops</span><span class="p">,</span> <span class="n">best</span> <span class="n">of</span> <span class="mi">3</span><span class="p">:</span> <span class="mf">1.09</span> <span class="n">s</span> <span class="n">per</span> <span class="n">loop</span>
</code></pre></div></li>
</ul>
<hr />
<h3 id="slowing-down-dict-lookups">&gt; Slowing down <code>dict</code> lookups/è®©å­—å…¸çš„æŸ¥æ‰¾æ…¢ä¸‹æ¥ *</h3>
<!-- Example ID: c9c26ce6-df0c-47f7-af0b-966b9386d4c3 --->

<div class="highlight"><pre><span></span><code><span class="n">some_dict</span> <span class="o">=</span> <span class="p">{</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">):</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1_000_000</span><span class="p">)}</span>
<span class="n">another_dict</span> <span class="o">=</span> <span class="p">{</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">):</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1_000_000</span><span class="p">)}</span>
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">some_dict</span><span class="p">[</span><span class="s1">&#39;5&#39;</span><span class="p">]</span>
<span class="mf">28.6</span> <span class="n">ns</span> <span class="err">Â±</span> <span class="mf">0.115</span> <span class="n">ns</span> <span class="n">per</span> <span class="n">loop</span> <span class="p">(</span><span class="n">mean</span> <span class="err">Â±</span> <span class="n">std</span><span class="o">.</span> <span class="n">dev</span><span class="o">.</span> <span class="n">of</span> <span class="mi">7</span> <span class="n">runs</span><span class="p">,</span> <span class="mi">10000000</span> <span class="n">loops</span> <span class="n">each</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_dict</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">some_dict</span><span class="p">[</span><span class="s1">&#39;5&#39;</span><span class="p">]</span>
<span class="mf">37.2</span> <span class="n">ns</span> <span class="err">Â±</span> <span class="mf">0.265</span> <span class="n">ns</span> <span class="n">per</span> <span class="n">loop</span> <span class="p">(</span><span class="n">mean</span> <span class="err">Â±</span> <span class="n">std</span><span class="o">.</span> <span class="n">dev</span><span class="o">.</span> <span class="n">of</span> <span class="mi">7</span> <span class="n">runs</span><span class="p">,</span> <span class="mi">10000000</span> <span class="n">loops</span> <span class="n">each</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">another_dict</span><span class="p">[</span><span class="s1">&#39;5&#39;</span><span class="p">]</span>
<span class="mf">28.5</span> <span class="n">ns</span> <span class="err">Â±</span> <span class="mf">0.142</span> <span class="n">ns</span> <span class="n">per</span> <span class="n">loop</span> <span class="p">(</span><span class="n">mean</span> <span class="err">Â±</span> <span class="n">std</span><span class="o">.</span> <span class="n">dev</span><span class="o">.</span> <span class="n">of</span> <span class="mi">7</span> <span class="n">runs</span><span class="p">,</span> <span class="mi">10000000</span> <span class="n">loops</span> <span class="n">each</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another_dict</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># Trying to access a key that doesn&#39;t exist</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">KeyError</span><span class="p">:</span> <span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="o">%</span><span class="n">timeit</span> <span class="n">another_dict</span><span class="p">[</span><span class="s1">&#39;5&#39;</span><span class="p">]</span>
<span class="mf">38.5</span> <span class="n">ns</span> <span class="err">Â±</span> <span class="mf">0.0913</span> <span class="n">ns</span> <span class="n">per</span> <span class="n">loop</span> <span class="p">(</span><span class="n">mean</span> <span class="err">Â±</span> <span class="n">std</span><span class="o">.</span> <span class="n">dev</span><span class="o">.</span> <span class="n">of</span> <span class="mi">7</span> <span class="n">runs</span><span class="p">,</span> <span class="mi">10000000</span> <span class="n">loops</span> <span class="n">each</span><span class="p">)</span>
</code></pre></div></p>
<p>ä¸ºä»€ä¹ˆç›¸åŒçš„æŸ¥æ‰¾ä¼šå˜å¾—è¶Šæ¥è¶Šæ…¢ï¼Ÿ</p>
<h4 id="_64">ğŸ’¡ è¯´æ˜</h4>
<ul>
<li>CPython æœ‰ä¸€ä¸ªé€šç”¨çš„å­—å…¸æŸ¥æ‰¾å‡½æ•°ï¼Œå¯ä»¥å¤„ç†æ‰€æœ‰ç±»å‹çš„é”®ï¼ˆ<code>str</code>ã€<code>int</code>ã€ä»»ä½•å¯¹è±¡...ï¼‰ï¼Œä»¥åŠä¸€ä¸ªä¸“é—¨ç”¨äºå¤„ç†ä»…ç”± <code>str</code> é”®ç»„æˆçš„å­—å…¸çš„å¸¸è§æƒ…å†µã€‚</li>
<li>ä¸“ç”¨å‡½æ•°ï¼ˆåœ¨ CPython çš„ <a href="https://github.com/python/cpython/blob/522691c46e2ae51faaad5bbbce7d959dd61770df/Objects/dictobject.c#L841">æº</a> ä¸­åä¸º <code>lookdict_unicode</code>ï¼‰çŸ¥é“æ‰€æœ‰ç°æœ‰çš„é”®ï¼ˆåŒ…æ‹¬æŸ¥æ‰¾çš„ key) æ˜¯å­—ç¬¦ä¸²ï¼Œå¹¶ä½¿ç”¨æ›´å¿«å’Œæ›´ç®€å•çš„å­—ç¬¦ä¸²æ¯”è¾ƒæ¥æ¯”è¾ƒé”®ï¼Œè€Œä¸æ˜¯è°ƒç”¨ <code>__eq__</code> æ–¹æ³•ã€‚</li>
<li>ç¬¬ä¸€æ¬¡ä½¿ç”¨é <code>str</code> é”®è®¿é—® <code>dict</code> å®ä¾‹æ—¶ï¼Œä¼šå¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œä»¥ä¾¿å°†æ¥çš„æŸ¥æ‰¾ä½¿ç”¨é€šç”¨å‡½æ•°ã€‚</li>
<li>è¿™ä¸ªè¿‡ç¨‹å¯¹äºç‰¹å®šçš„ <code>dict</code> å®ä¾‹æ˜¯ä¸å¯é€†çš„ï¼Œå¹¶ä¸”é”®ç”šè‡³ä¸å¿…å­˜åœ¨äºå­—å…¸ä¸­ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¯¹ä¸å­˜åœ¨çš„é”®è¿›è¡ŒæŸ¥æ‰¾å…·æœ‰ç›¸åŒå‰¯ä½œç”¨çš„åŸå› ã€‚</li>
</ul>
<hr />
<h3 id="bloating-instance-dictsdict">&gt; Bloating instance <code>dict</code>s/å˜è‡ƒè‚¿çš„<code>dict</code>å®ä¾‹ä»¬ *</h3>
<!-- Example ID: fe706ab4-1615-c0ba-a078-76c98cbe3f48 --->

<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="k">class</span> <span class="nc">SomeClass</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">some_attr1</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">some_attr2</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">some_attr3</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">some_attr4</span> <span class="o">=</span> <span class="mi">4</span>


<span class="k">def</span> <span class="nf">dict_size</span><span class="p">(</span><span class="n">o</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
</code></pre></div>
<p><strong>Output:</strong> (Python 3.8, å…¶ä»– Python 3 çš„ç‰ˆæœ¬ä¹Ÿè®¸ç¨æœ‰ä¸åŒ)
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">o1</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o2</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dict_size</span><span class="p">(</span><span class="n">o1</span><span class="p">)</span>
<span class="mi">104</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dict_size</span><span class="p">(</span><span class="n">o2</span><span class="p">)</span>
<span class="mi">104</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="n">o1</span><span class="o">.</span><span class="n">some_attr1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o3</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dict_size</span><span class="p">(</span><span class="n">o3</span><span class="p">)</span>
<span class="mi">232</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dict_size</span><span class="p">(</span><span class="n">o1</span><span class="p">)</span>
<span class="mi">232</span>
</code></pre></div></p>
<p>è®©æˆ‘ä»¬åœ¨ä¸€ä¸ªæ–°çš„è§£é‡Šå™¨ä¸­å†è¯•ä¸€æ¬¡ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">o1</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o2</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dict_size</span><span class="p">(</span><span class="n">o1</span><span class="p">)</span>
<span class="mi">104</span>  <span class="c1"># æ„æ–™ä¹‹ä¸­</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o1</span><span class="o">.</span><span class="n">some_attr5</span> <span class="o">=</span> <span class="mi">5</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o1</span><span class="o">.</span><span class="n">some_attr6</span> <span class="o">=</span> <span class="mi">6</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dict_size</span><span class="p">(</span><span class="n">o1</span><span class="p">)</span>
<span class="mi">360</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dict_size</span><span class="p">(</span><span class="n">o2</span><span class="p">)</span>
<span class="mi">272</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">o3</span> <span class="o">=</span> <span class="n">SomeClass</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dict_size</span><span class="p">(</span><span class="n">o3</span><span class="p">)</span>
<span class="mi">232</span>
</code></pre></div>
<p>æ˜¯ä»€ä¹ˆè®©é‚£äº›å­—å…¸å˜å¾—è‡ƒè‚¿ï¼Ÿ ä¸ºä»€ä¹ˆæ–°åˆ›å»ºçš„å¯¹è±¡ä¹Ÿä¼šå˜è‡ƒè‚¿ï¼Ÿ</p>
<h4 id="_65">ğŸ’¡ è¯´æ˜</h4>
<ul>
<li>CPython èƒ½å¤Ÿåœ¨å¤šä¸ªå­—å…¸ä¸­é‡ç”¨ç›¸åŒçš„â€œé”®â€å¯¹è±¡ã€‚ è¿™æ·»åŠ åœ¨ <a href="https://www.python.org/dev/peps/pep-0412/">PEP 412</a> ä¸­ï¼Œç›®çš„æ˜¯å‡å°‘å†…å­˜ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å®ä¾‹å­—å…¸ä¸­ â€”â€” é”®ï¼ˆå®ä¾‹å±æ€§ï¼‰å‡ ä¹åœ¨æ‰€æœ‰å®ä¾‹éƒ½é€šç”¨ã€‚</li>
<li>è¿™ç§ä¼˜åŒ–å¯¹äºå®ä¾‹å­—å…¸æ¥è¯´æ˜¯ååˆ†è‡ªç„¶çš„ï¼Œä½†å¦‚æœæŸäº›å‡è®¾è¢«æ‰“ç ´ï¼Œå®ƒå°±ä¼šè¢«ç¦ç”¨ã€‚</li>
<li>å¯†é’¥å…±äº«å­—å…¸ä¸æ”¯æŒåˆ é™¤ï¼›å¦‚æœåˆ é™¤äº†å®ä¾‹å±æ€§ï¼Œåˆ™å­—å…¸æ˜¯â€œæœªå…±äº«çš„â€ï¼Œå¹¶ä¸”åŒä¸€ç±»çš„æ‰€æœ‰æœªæ¥å®ä¾‹éƒ½ç¦ç”¨å¯†é’¥å…±äº«ã€‚</li>
<li>å¦å¤–ï¼Œå¦‚æœå­—å…¸é”®å·²è¢«è°ƒæ•´å¤§å°ï¼ˆå› ä¸ºæ’å…¥äº†æ–°é”®ï¼‰ï¼Œå®ƒä»¬ä¿æŒå…±äº«<em>ä»…å½“</em>å®ƒä»¬è¢«ä¸€ä¸ªå®Œå…¨å•ä¸€çš„å­—å…¸ä½¿ç”¨æ—¶ï¼ˆè¿™å…è®¸åœ¨ç¬¬ä¸€ä¸ªåˆ›å»ºçš„å®ä¾‹çš„ <code>__init__</code> ä¸­æ·»åŠ è®¸å¤šå±æ€§ï¼Œè€Œä¸ä¼šå¯¼è‡´â€œå–æ¶ˆå…±äº«â€ï¼‰ã€‚å¦‚æœå‘ç”Ÿè°ƒæ•´å¤§å°æ—¶å­˜åœ¨å¤šä¸ªå®ä¾‹ï¼Œåˆ™ä¸ºåŒä¸€ç±»çš„æ‰€æœ‰æœªæ¥å®ä¾‹ç¦ç”¨å¯†é’¥å…±äº«ï¼šCPython æ— æ³•åˆ¤æ–­æ‚¨çš„å®ä¾‹æ˜¯å¦æ­£åœ¨ä½¿ç”¨ç›¸åŒçš„å±æ€§é›†ï¼Œå¹¶å†³å®šæ”¾å¼ƒå°è¯•å…±äº«å®ƒä»¬çš„é”®å€¼ã€‚</li>
<li>ä¸€ä¸ªå°æç¤ºï¼Œå¦‚æœä½ çš„ç›®æ ‡æ˜¯é™ä½ç¨‹åºçš„å†…å­˜å ç”¨ï¼šä¸è¦åˆ é™¤å®ä¾‹å±æ€§ï¼Œå¹¶ç¡®ä¿åœ¨ <code>__init__</code> ä¸­åˆå§‹åŒ–æ‰€æœ‰çš„å±æ€§ï¼</li>
</ul>
<hr />
<h3 id="minor-ones">&gt; Minor Ones/å°çŸ¥è¯†ç‚¹</h3>
<ul>
<li><code>join()</code> æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ“ä½œè€Œä¸æ˜¯åˆ—è¡¨æ“ä½œ. (ç¬¬ä¸€æ¬¡æ¥è§¦ä¼šè§‰å¾—æœ‰ç‚¹è¿åç›´è§‰)</li>
</ul>
<p><strong>ğŸ’¡ è¯´æ˜:</strong>
  å¦‚æœ <code>join()</code> æ˜¯å­—ç¬¦ä¸²æ–¹æ³• é‚£ä¹ˆå®ƒå°±å¯ä»¥å¤„ç†ä»»ä½•å¯è¿­ä»£çš„å¯¹è±¡(åˆ—è¡¨ï¼Œå…ƒç»„ï¼Œè¿­ä»£å™¨). å¦‚æœå®ƒæ˜¯åˆ—è¡¨æ–¹æ³•, åˆ™å¿…é¡»åœ¨æ¯ç§ç±»å‹ä¸­å•ç‹¬å®ç°. å¦å¤–, åœ¨ <code>list</code> å¯¹è±¡çš„é€šç”¨APIä¸­å®ç°ä¸€ä¸ªä¸“ç”¨äºå­—ç¬¦ä¸²çš„æ–¹æ³•æ²¡æœ‰å¤ªå¤§çš„æ„ä¹‰.</p>
<ul>
<li>çœ‹ç€å¥‡æ€ªä½†èƒ½æ­£ç¡®è¿è¡Œçš„è¯­å¥:</li>
<li><code>[] = ()</code> è¯­å¥åœ¨è¯­ä¹‰ä¸Šæ˜¯æ­£ç¡®çš„ (è§£åŒ…ä¸€ä¸ªç©ºçš„ <code>tuple</code> å¹¶èµ‹å€¼ç»™ <code>list</code>)</li>
<li><code>'a'[0][0][0][0][0]</code> åœ¨è¯­ä¹‰ä¸Šä¹Ÿæ˜¯æ­£ç¡®çš„, å› ä¸º Python ä¸åƒCè¯­è¨€åŠå…¶æ´¾ç”Ÿè¯­è¨€é‚£æ ·ï¼Œå…·æœ‰å­—ç¬¦æ•°æ®ç±»å‹ã€‚å› æ­¤ï¼Œä»å­—ç¬¦ä¸²ä¸­é€‰æ‹©å•ä¸ªå­—ç¬¦å°†è¿”å›å•ä¸ªå­—ç¬¦ä¸²ã€‚</li>
<li>
<p><code>3 --0-- 5 == 8</code> å’Œ <code>--5 == 5</code> åœ¨è¯­ä¹‰ä¸Šéƒ½æ˜¯æ­£ç¡®çš„, ä¸”ç»“æœç­‰äº <code>True</code>.(è¯‘: 3å‡è´Ÿ0ç­‰äº3ï¼Œå†å‡è´Ÿ5ç›¸å½“äºåŠ 5ç­‰äº8ï¼›è´Ÿçš„è´Ÿ5ç­‰äº5.)</p>
</li>
<li>
<p>é‰´äº <code>a</code> æ˜¯ä¸€ä¸ªæ•°å­—, <code>++a</code> å’Œ <code>--a</code> éƒ½æ˜¯æœ‰æ•ˆçš„ Python è¯­å¥, ä½†å…¶æ•ˆæœä¸ C, C++ æˆ– Java ç­‰ä¸ä¸€æ ·.
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
<span class="mi">5</span>
<span class="o">&gt;&gt;&gt;</span> <span class="o">++</span><span class="n">a</span>
<span class="mi">5</span>
<span class="o">&gt;&gt;&gt;</span> <span class="o">--</span><span class="n">a</span>
<span class="mi">5</span>
</code></pre></div></p>
</li>
</ul>
<p><strong>ğŸ’¡ è¯´æ˜:</strong>
  + python é‡Œæ²¡æœ‰ <code>++</code> æ“ä½œç¬¦. è¿™å…¶å®æ˜¯ä¸¤ä¸ª <code>+</code> æ“ä½œç¬¦.
  + <code>++a</code> è¢«è§£æä¸º <code>+(+a)</code> æœ€åç­‰äº <code>a</code>. <code>--a</code> åŒç†.
  + è¿™ä¸ª StackOverflow <a href="https://stackoverflow.com/questions/3654830/why-are-there-no-and-operators-in-python">å›ç­”</a> è®¨è®ºäº†ä¸ºä»€ä¹ˆ Python ä¸­ç¼ºå°‘å¢é‡å’Œå‡é‡è¿ç®—ç¬¦.</p>
<ul>
<li>
<p>Python ä½¿ç”¨ 2ä¸ªå­—èŠ‚å­˜å‚¨å‡½æ•°ä¸­çš„æœ¬åœ°å˜é‡. ç†è®ºä¸Š, è¿™æ„å‘³ç€å‡½æ•°ä¸­åªèƒ½å®šä¹‰65536ä¸ªå˜é‡. ä½†æ˜¯ï¼ŒPython å†…ç½®äº†ä¸€ä¸ªæ–¹ä¾¿çš„è§£å†³æ–¹æ¡ˆï¼Œå¯ç”¨äºå­˜å‚¨è¶…è¿‡2^16ä¸ªå˜é‡å. ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å½“å®šä¹‰äº†è¶…è¿‡65536ä¸ªå±€éƒ¨å˜é‡æ—¶å †æ ˆä¸­å‘ç”Ÿçš„æƒ…å†µ (è­¦å‘Š: è¿™æ®µä»£ç ä¼šæ‰“å°å¤§çº¦2^18è¡Œæ–‡æœ¬, è¯·åšå¥½å‡†å¤‡!):
     <div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">dis</span>
<span class="n">exec</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">def f():</span>
<span class="s2">    &quot;&quot;&quot;</span> <span class="o">+</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;X&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">65539</span><span class="p">)]))</span>

<span class="n">f</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dis</span><span class="o">.</span><span class="n">dis</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
</code></pre></div></p>
</li>
<li>
<p>ä½ çš„ <em>Python ä»£ç </em> å¹¶ä¸ä¼šå¤šçº¿ç¨‹åŒæ—¶è¿è¡Œ (æ˜¯çš„, ä½ æ²¡å¬é”™!). è™½ç„¶ä½ è§‰å¾—ä¼šäº§ç”Ÿå¤šä¸ªçº¿ç¨‹å¹¶è®©å®ƒä»¬åŒæ—¶æ‰§è¡Œä½ çš„ä»£ç , ä½†æ˜¯, ç”±äº <a href="https://wiki.python.org/moin/GlobalInterpreterLock">å…¨å±€è§£é‡Šé”</a>çš„å­˜åœ¨, ä½ æ‰€åšçš„åªæ˜¯è®©ä½ çš„çº¿ç¨‹ä¾æ¬¡åœ¨åŒä¸€ä¸ªæ ¸å¿ƒä¸Šæ‰§è¡Œ. Python å¤šçº¿ç¨‹é€‚ç”¨äºIOå¯†é›†å‹çš„ä»»åŠ¡, ä½†å¦‚æœæƒ³è¦å¹¶è¡Œå¤„ç†CPUå¯†é›†å‹çš„ä»»åŠ¡, ä½ åº”è¯¥ä¼šæƒ³ä½¿ç”¨ <a href="https://docs.python.org/2/library/multiprocessing.html">multiprocessing</a> æ¨¡å—.</p>
</li>
<li>
<p>åˆ—è¡¨åˆ‡ç‰‡è¶…å‡ºç´¢å¼•è¾¹ç•Œè€Œä¸å¼•å‘ä»»ä½•é”™è¯¯
  <div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">some_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">some_list</span><span class="p">[</span><span class="mi">111</span><span class="p">:]</span>
<span class="p">[]</span>
</code></pre></div></p>
</li>
<li>
<p><code>int('Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©')</code> åœ¨ Python 3 ä¸­ä¼šè¿”å› <code>123456789</code>. åœ¨ Python ä¸­, åè¿›åˆ¶å­—ç¬¦åŒ…æ‹¬æ•°å­—å­—ç¬¦, ä»¥åŠå¯ç”¨äºå½¢æˆåè¿›åˆ¶æ•°å­—çš„æ‰€æœ‰å­—ç¬¦, ä¾‹å¦‚: U+0660, ARABIC-INDIC DIGIT ZERO. è¿™æœ‰ä¸€ä¸ªå…³äºæ­¤çš„ <a href="http://chris.improbable.org/2014/8/25/adventures-in-unicode-digits/">æœ‰è¶£æ•…äº‹</a>.</p>
</li>
<li>
<p><code>'abc'.count('') == 4</code>. è¿™æœ‰ä¸€ä¸ª <code>count</code> æ–¹æ³•çš„ç›¸è¿‘å®ç°, èƒ½æ›´å¥½çš„è¯´æ˜é—®é¢˜
  <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">count</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">sub</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">sub</span><span class="p">)):</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">sub</span><span class="p">)]</span> <span class="o">==</span> <span class="n">sub</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>
  è¿™ä¸ªè¡Œä¸ºæ˜¯ç”±äºç©ºå­ä¸²(<code>''</code>)ä¸åŸå§‹å­—ç¬¦ä¸²ä¸­é•¿åº¦ä¸º0çš„åˆ‡ç‰‡ç›¸åŒ¹é…å¯¼è‡´çš„.</p>
</li>
</ul>
<hr />
<h1 id="contributing">Contributing/è´¡çŒ®</h1>
<p>æ¬¢è¿å„ç§è¡¥ä¸! è¯¦æƒ…è¯·çœ‹<a href="https://github.com/satwikkansal/wtfpython/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a>.(è¯‘: è¿™æ˜¯ç»™åŸåº“æè´¡çŒ®çš„è¦æ±‚æ¨¡ç‰ˆ)</p>
<p>ä½ å¯ä»¥é€šè¿‡æ–°å»º <a href="https://github.com/satwikkansal/wtfpython/issues/new">issue</a> æˆ–è€…åœ¨ä¸Š <a href="https://gitter.im/wtfpython/Lobby">Gitter</a> ä¸æˆ‘ä»¬è¿›è¡Œè®¨è®º.</p>
<p>(è¯‘: å¦‚æœä½ æƒ³å¯¹è¿™ä¸ªç¿»è¯‘é¡¹ç›®æä¾›å¸®åŠ©, è¯·çœ‹<a href="https://github.com/leisurelicht/wtfpython-cn/blob/master/CONTRIBUTING.md">è¿™é‡Œ</a>)</p>
<h1 id="acknowledgements">Acknowledgements/è‡´è°¢</h1>
<p>è¿™ä¸ªç³»åˆ—æœ€åˆçš„æƒ³æ³•å’Œè®¾è®¡çµæ„Ÿæ¥è‡ªäº Denys Dovhan çš„é¡¹ç›® <a href="https://github.com/denysdovhan/wtfjs">wtfjs</a>. ç¤¾åŒºçš„å¼ºå¤§æ”¯æŒè®©å®ƒæˆé•¿ä¸ºç°åœ¨çš„æ¨¡æ ·.</p>
<h4 id="some-nice-links">Some nice Links!/ä¸€äº›ä¸é”™çš„èµ„æº</h4>
<ul>
<li>https://www.youtube.com/watch?v=sH4XF6pKKmk</li>
<li>https://www.reddit.com/r/Python/comments/3cu6ej/what_are_some_wtf_things_about_python</li>
<li>https://sopython.com/wiki/Common_Gotchas_In_Python</li>
<li>https://stackoverflow.com/questions/530530/python-2-x-gotchas-and-landmines</li>
<li>https://stackoverflow.com/questions/1011431/common-pitfalls-in-python</li>
<li>https://www.python.org/doc/humor/</li>
<li>https://www.codementor.io/satwikkansal/python-practices-for-efficient-code-performance-memory-and-usability-aze6oiq65</li>
</ul>
<h1 id="license">ğŸ“ License/è®¸å¯</h1>
<p><a href="http://www.wtfpl.net"><img alt="CC 4.0" src="https://img.shields.io/badge/License-WTFPL%202.0-lightgrey.svg?style=flat-square" /></a></p>
<p>&copy; <a href="https://satwikkansal.xyz">Satwik Kansal</a></p>
<h2 id="help">Help/å¸®åŠ©</h2>
<p>å¦‚æœæ‚¨æœ‰ä»»ä½•æƒ³æ³•æˆ–å»ºè®®ï¼Œæ¬¢è¿åˆ†äº«.</p>
<h2 id="surprise-your-geeky-pythonist-friends">Surprise your geeky pythonist friends?/æƒ³ç»™ä½ çš„æå®¢æœ‹å‹ä¸€ä¸ªæƒŠå–œ?</h2>
<p>æ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›å¿«é“¾å‘ Twitter å’Œ Linkedin ä¸Šçš„æœ‹å‹æ¨è wtfpython,</p>
<p><a href="https://twitter.com/intent/tweet?url=https://github.com/satwikkansal/wtfpython&amp;hastags=python,wtfpython">Twitter</a>
 | <a href="https://www.linkedin.com/shareArticle?url=https://github.com/satwikkansal&amp;title=What%20the%20f*ck%20Python!&amp;summary=An%20interesting%20collection%20of%20subtle%20and%20tricky%20Python%20snippets.">Linkedin</a></p>
<h2 id="need-a-pdf-versionpdf">Need a pdf version?/éœ€è¦æ¥ä¸€ä»½pdfç‰ˆçš„?</h2>
<p>ä½ å¯ä»¥å¿«é€Ÿåœ¨<a href="https://form.jotform.com/221593245656057">è¿™</a>è·å¾—è‹±æ–‡ä½œè€…åˆ¶ä½œçš„ç‰ˆæœ¬.</p>
<h2 id="follow-commitcommit">Follow Commit/è¿½è¸ªCommit</h2>
<p>è¿™æ˜¯ä¸­æ–‡ç‰ˆ fork æ—¶æ‰€å¤„çš„åŸåº“ Commit, å½“åŸåº“æ›´æ–°æ—¶æˆ‘ä¼šè·Ÿéšæ›´æ–°.</p>
<p><a href="https://github.com/satwikkansal/wtfpython/commit/19d4b075152d93e5bc75c5d08279338a895cfa27"><img alt="Commit id" src="https://img.shields.io/badge/Commit-19d4b0-yellow.svg" /></a></p>







  
  




  



                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/satwikkansal" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/satwikkansal" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://satwikkansal.xyz/" target="_blank" rel="noopener" title="satwikkansal.xyz" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64h185.4c2.2 20.4 3.3 41.8 3.3 64zm28.8-64h123.1c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6 78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7 10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5 11.6 26 20.9 58.2 27 94.7zm-209 0H18.6c30-74.1 93.6-130.9 172-151.6-25.5 34.2-45.3 87.7-55.3 151.6zM8.1 192h123.1c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zm186.6 254.6c-11.6-26-20.9-58.2-27-94.6h176.6c-6.1 36.4-15.5 68.6-27 94.6-10.5 23.6-22.2 40.7-33.5 51.5-11.2 10.7-20.5 13.9-27.8 13.9s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6-78.4-20.7-142-77.5-172-151.6h116.7zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6 25.5-34.2 45.2-87.7 55.3-151.6h116.6z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["search.suggest", "search.highlight", "content.tabs.link", "navigation.indexes", "content.tooltips", "navigation.path", "content.code.annotate", "content.code.copy", "content.code.select", "navigation.tabs"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5cfa9459.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>